import{c as L,o as ve,a as Zn,r as Ee,p as Ae,d as Z,b as X,u as to,e as Ve,f as Dt,t as Pt,i as lt,g as St,h as ye,s as it,j as G,k as Le,l as Se,m as yt,S as eo,F as je,n as $t,I as be,q as xe,G as no,v as pe,D as oo,R as so,w as ro,x as ao,y as st,z as io,A as lo}from"./calendar-C_HCiwEi.js";import{G as co}from"./GanttContainer-CW--DMPu.js";import{T as uo,a as go}from"./TaskDataModal-C9rE8Xux.js";function fo(t){const[e,n]=L(!1);let o=0;const s=l=>{o=requestAnimationFrame(s),t(l)},r=()=>{e()||(n(!0),o=requestAnimationFrame(s))},i=()=>{n(!1),cancelAnimationFrame(o)};return ve(i),[e,r,i]}const zt=new Map;let Jt=!1,Yt=[];function Ue(t){if(!Jt)return()=>{};const e=performance.now(),n=Yt.length>0?Yt[Yt.length-1]:null;return Yt.push(t),function(){const s=performance.now()-e;Yt.pop(),zt.has(t)||zt.set(t,{name:t,calls:0,totalTime:0,selfTime:0,minTime:1/0,maxTime:0,parent:new Map});const r=zt.get(t);if(r.calls++,r.totalTime+=s,r.selfTime+=s,r.minTime=Math.min(r.minTime,s),r.maxTime=Math.max(r.maxTime,s),n){const i=zt.get(n);i&&(i.selfTime-=s),r.parent.set(n,(r.parent.get(n)||0)+1)}}}function ho(t,e){if(!Jt)return e();const n=Ue(t);try{return e()}finally{n()}}function mo(){Jt=!0,console.log("[Profiler] Enabled")}function vo(){Jt=!1,console.log("[Profiler] Disabled")}function yo(){zt.clear(),Yt=[]}function bo(){return Jt}function Ge(){return Array.from(zt.values()).map(t=>({...t,avgTime:t.calls>0?t.totalTime/t.calls:0,minTime:t.minTime===1/0?0:t.minTime,parent:Object.fromEntries(t.parent)})).sort((t,e)=>e.totalTime-t.totalTime)}function Ne(){const t=Ge();if(t.length===0)return"No profiling data. Call prof.enable() then interact with the chart.";const e=["","=".repeat(90),"FUNCTION PROFILER REPORT","=".repeat(90),"","Function                              Calls     Total(ms)   Self(ms)    Avg(ms)    Max(ms)","-".repeat(90)];for(const n of t){const o=n.name.padEnd(36).slice(0,36),s=String(n.calls).padStart(8),r=n.totalTime.toFixed(2).padStart(12),i=n.selfTime.toFixed(2).padStart(10),l=n.avgTime.toFixed(3).padStart(10),m=n.maxTime.toFixed(2).padStart(10);e.push(`${o} ${s} ${r} ${i} ${l} ${m}`)}e.push("-".repeat(90)),e.push(""),e.push("CALL RELATIONSHIPS:");for(const n of t.slice(0,15)){const o=Object.entries(n.parent);o.length>0&&e.push(`  ${n.name} <- ${o.map(([s,r])=>`${s}(${r})`).join(", ")}`)}return e.push(""),e.join(`
`)}function xo(){console.log(Ne())}const Oe={start:Ue,time:ho,enable:mo,disable:vo,clear:yo,isEnabled:bo,getData:Ge,report:Ne,log:xo};typeof window<"u"&&(window.prof=Oe);function po(){const[t,e]=Zn({}),[n,o]=L(new Set),[s,r]=L(null);return{tasks:t,getTask:F=>t[F],getBarPosition:F=>{const a=Oe.start("taskStore.getBarPosition"),w=t[F];if(!w||!w.$bar)return a(),null;const J={x:w.$bar.x,y:w.$bar.y,width:w.$bar.width,height:w.$bar.height,index:w._index};return a(),J},getAllTasks:()=>Object.values(t),taskCount:()=>Object.keys(t).length,updateTask:(F,a)=>{e(F,a)},updateBarPosition:(F,a)=>{t[F]&&e(Ae(w=>{w[F]&&(w[F].$bar={...w[F].$bar,...a})}))},updateTasks:F=>{const a={};F.forEach(w=>{a[w.id]=w}),e(Ee(a))},batchMovePositions:(F,a)=>{e(Ae(w=>{var J;for(const[D,{originalX:O}]of F)(J=w[D])!=null&&J.$bar&&(w[D].$bar.x=O+a)}))},removeTask:F=>{e(F,void 0)},clear:()=>{e(Ee({}))},collapsedTasks:n,toggleTaskCollapse:F=>{o(a=>{const w=new Set(a);return w.has(F)?w.delete(F):w.add(F),w})},isTaskCollapsed:F=>n().has(F),expandTask:F=>{o(a=>{if(!a.has(F))return a;const w=new Set(a);return w.delete(F),w})},collapseTask:F=>{o(a=>{if(a.has(F))return a;const w=new Set(a);return w.add(F),w})},expandAllTasks:()=>{o(new Set)},collapseAllTasks:()=>{const F=[];for(const a of Object.values(t))(a.type==="summary"||a._children&&a._children.length>0)&&F.push(a.id);o(new Set(F))},draggingTaskId:s,setDraggingTaskId:r}}function wo(t={}){const[e,n]=L(t.ganttStart||new Date),[o,s]=L(t.ganttEnd||new Date),[r,i]=L(t.unit||"day"),[l,m]=L(t.step||1),[g,b]=L(t.columnWidth||t.column_width||45),[f,I]=L(t.barHeight||t.bar_height||30),[R,h]=L(t.headerHeight||75),[_,u]=L(t.padding||18),[c,y]=L(t.barCornerRadius||t.bar_corner_radius||3),[p,H]=L(t.readonly||!1),[z,F]=L(t.readonlyDates||!1),[a,w]=L(t.readonlyProgress||!1),[J,D]=L(t.showExpectedProgress||!1),[O,K]=L(t.autoMoveLabel||!1),[nt,k]=L(t.ignoredDates||[]),[x,M]=L(t.ignoredFunction||null),[T,$]=L([]),[B,U]=L(t.subtaskHeightRatio||.5),[V,q]=L(t.renderMode||"simple"),[rt,W]=L(new Set(t.expandedTasks||[]));return{ganttStart:e,ganttEnd:o,unit:r,step:l,columnWidth:g,barHeight:f,headerHeight:R,padding:_,barCornerRadius:c,readonly:p,readonlyDates:z,readonlyProgress:a,showExpectedProgress:J,autoMoveLabel:O,ignoredDates:nt,ignoredFunction:x,ignoredPositions:T,subtaskHeightRatio:B,renderMode:V,expandedTasks:rt,setGanttStart:n,setGanttEnd:s,setUnit:i,setStep:m,setColumnWidth:b,setBarHeight:I,setHeaderHeight:h,setPadding:u,setBarCornerRadius:y,setReadonly:H,setReadonlyDates:F,setReadonlyProgress:w,setShowExpectedProgress:D,setAutoMoveLabel:K,setIgnoredDates:k,setIgnoredFunction:M,setIgnoredPositions:$,setSubtaskHeightRatio:U,setRenderMode:q,setExpandedTasks:W,isTaskExpanded:S=>rt().has(S),toggleTaskExpansion:S=>{W(tt=>{const ot=new Set(tt);return ot.has(S)?ot.delete(S):ot.add(S),ot})},expandTask:S=>{W(tt=>{if(tt.has(S))return tt;const ot=new Set(tt);return ot.add(S),ot})},collapseTask:S=>{W(tt=>{if(!tt.has(S))return tt;const ot=new Set(tt);return ot.delete(S),ot})},expandAllTasks:S=>{W(new Set(S))},collapseAllTasks:()=>{W(new Set)},updateOptions:S=>{S.ganttStart!==void 0&&n(S.ganttStart),S.ganttEnd!==void 0&&s(S.ganttEnd),S.unit!==void 0&&i(S.unit),S.step!==void 0&&m(S.step),S.columnWidth!==void 0&&b(S.columnWidth),S.barHeight!==void 0&&I(S.barHeight),S.headerHeight!==void 0&&h(S.headerHeight),S.padding!==void 0&&u(S.padding),S.barCornerRadius!==void 0&&y(S.barCornerRadius),S.readonly!==void 0&&H(S.readonly),S.readonlyDates!==void 0&&F(S.readonlyDates),S.readonlyProgress!==void 0&&w(S.readonlyProgress),S.showExpectedProgress!==void 0&&D(S.showExpectedProgress),S.autoMoveLabel!==void 0&&K(S.autoMoveLabel),S.ignoredDates!==void 0&&k(S.ignoredDates),S.ignoredFunction!==void 0&&M(S.ignoredFunction),S.ignoredPositions!==void 0&&$(S.ignoredPositions),S.subtaskHeightRatio!==void 0&&U(S.subtaskHeightRatio),S.renderMode!==void 0&&q(S.renderMode),S.expandedTasks!==void 0&&W(new Set(S.expandedTasks))},getConfig:()=>({ganttStart:e(),ganttEnd:o(),unit:r(),step:l(),columnWidth:g(),barHeight:f(),headerHeight:R(),padding:_(),barCornerRadius:c(),readonly:p(),readonlyDates:z(),readonlyProgress:a(),showExpectedProgress:J(),autoMoveLabel:O(),ignoredDates:nt(),ignoredFunction:x(),ignoredPositions:T(),subtaskHeightRatio:B(),renderMode:V(),expandedTasks:rt()})}}function me(t){const e=t.getFullYear();return e-e%10+""}function ko(t,e,n){let o=Z.add(t,6,"day"),s=o.getMonth()!==t.getMonth()?"D MMM":"D",r=!e||t.getMonth()!==e.getMonth()?"D MMM":"D";return`${Z.format(t,r,n)} - ${Z.format(o,s,n)}`}const oe=[{name:"Minute",padding:"1h",step:"1min",column_width:20,date_format:"YYYY-MM-DD HH:mm",lower_text:"mm",upper_text:(t,e,n)=>!e||t.getHours()!==e.getHours()?Z.format(t,"D MMM HH:00",n):"",upper_text_frequency:60},{name:"Quarter Hour",padding:"6h",step:"15min",column_width:30,date_format:"YYYY-MM-DD HH:mm",lower_text:"mm",upper_text:(t,e,n)=>!e||t.getHours()!==e.getHours()?Z.format(t,"D MMM HH:00",n):"",upper_text_frequency:4},{name:"Hour",padding:"7d",step:"1h",date_format:"YYYY-MM-DD HH:",lower_text:"HH",upper_text:(t,e,n)=>!e||t.getDate()!==e.getDate()?Z.format(t,"D MMMM",n):"",upper_text_frequency:24},{name:"Quarter Day",padding:"7d",step:"6h",date_format:"YYYY-MM-DD HH:",lower_text:"HH",upper_text:(t,e,n)=>!e||t.getDate()!==e.getDate()?Z.format(t,"D MMM",n):"",upper_text_frequency:4},{name:"Half Day",padding:"14d",step:"12h",date_format:"YYYY-MM-DD HH:",lower_text:"HH",upper_text:(t,e,n)=>!e||t.getDate()!==e.getDate()?t.getMonth()!==t.getMonth()?Z.format(t,"D MMM",n):Z.format(t,"D",n):"",upper_text_frequency:2},{name:"Day",padding:"7d",date_format:"YYYY-MM-DD",step:"1d",lower_text:(t,e,n)=>!e||t.getDate()!==e.getDate()?Z.format(t,"D",n):"",upper_text:(t,e,n)=>!e||t.getMonth()!==e.getMonth()?Z.format(t,"MMMM",n):"",thick_line:t=>t.getDay()===1},{name:"Week",padding:"1m",step:"7d",date_format:"YYYY-MM-DD",column_width:140,lower_text:ko,upper_text:(t,e,n)=>!e||t.getMonth()!==e.getMonth()?Z.format(t,"MMMM",n):"",thick_line:t=>t.getDate()>=1&&t.getDate()<=7,upper_text_frequency:4},{name:"Month",padding:"2m",step:"1m",column_width:120,date_format:"YYYY-MM",lower_text:"MMMM",upper_text:(t,e,n)=>!e||t.getFullYear()!==e.getFullYear()?Z.format(t,"YYYY",n):"",thick_line:t=>t.getMonth()%3===0,snap_at:"7d"},{name:"Year",padding:"2y",step:"1y",column_width:120,date_format:"YYYY",upper_text:(t,e,n)=>!e||me(t)!==me(e)?me(t):"",lower_text:"YYYY",snap_at:"30d"}];function So(t={}){const[e,n]=L(t.ganttStart||new Date),[o,s]=L(t.ganttEnd||new Date),[r,i]=L([]),l=oe.find(k=>k.name==="Day")||oe[3],m=t.viewMode||t.view_mode,g=m&&oe.find(k=>k.name===m)||l,[b,f]=L(g),[I]=L(t.viewModes||oe),[R,h]=L(t.language||"en"),_=X(()=>r().length),u=X(()=>{const k=b();return Z.parse_duration(k.step)}),c=X(()=>u().scale),y=X(()=>u().duration),[p]=L(t.columnWidth||t.column_width||null),H=X(()=>p()||b().column_width||45),z=X(()=>_()*H()),F=(k,x=!1)=>{if(!k||k.length===0){const W=Z.today(),N=b(),{duration:ut,scale:gt}=Z.parse_duration(N.padding||"7d"),wt=Z.add(W,-ut,gt),pt=Z.add(W,ut,gt);n(Z.start_of(wt,c())),s(pt),a();return}let M=null,T=null;for(const W of k){const N=W._start||Z.parse(W.start),ut=W._end||Z.parse(W.end);(!M||N<M)&&(M=N),(!T||ut>T)&&(T=ut)}const $=b(),{duration:B,scale:U}=Z.parse_duration($.padding||"7d");let V=Z.add(M,-B,U),q=Z.add(T,B,U);x&&(V=Z.add(V,-30,c()),q=Z.add(q,30,c())),V=Z.start_of(V,c());const rt=c();rt!=="hour"&&rt!=="minute"&&V.setHours(0,0,0,0),n(V),s(q),a()},a=()=>{const k=e(),x=o(),M=y(),T=c(),$=[];let B=new Date(k);for(;B<x;)$.push(new Date(B)),B=Z.add(B,M,T);i($)},w=(k,x=10)=>{const M=y(),T=c();if(k==="left"){const $=Z.add(e(),-x*M,T);n($)}else{const $=Z.add(o(),x*M,T);s($)}a()},J=k=>{if(typeof k=="string"){const x=I().find(M=>M.name===k);x&&(f(x),a())}else k&&k.name&&(f(k),a())},D=(k,x,M=null)=>{const T=b(),$=R(),B=H(),U=x*B;let V="";typeof T.lower_text=="function"?V=T.lower_text(k,M,$):typeof T.lower_text=="string"&&(V=Z.format(k,T.lower_text,$));let q="";typeof T.upper_text=="function"?q=T.upper_text(k,M,$):typeof T.upper_text=="string"&&(q=Z.format(k,T.upper_text,$));const rt=T.thick_line?T.thick_line(k):!1;return{date:k,x:U,width:B,lowerText:V,upperText:q,isThickLine:rt}},O=X(()=>{const k=r(),x=[];let M=null;for(let T=0;T<k.length;T++){const $=D(k[T],T,M);x.push($),M=k[T]}return x});return{ganttStart:e,ganttEnd:o,dates:r,viewMode:b,viewModes:I,language:R,setGanttStart:n,setGanttEnd:s,setViewMode:J,setLanguage:h,dateCount:_,unit:c,step:y,columnWidth:H,gridWidth:z,getAllDateInfos:O,setupDates:F,generateDates:a,extendTimeline:w,changeViewMode:J,getDateInfo:D,dateToX:k=>{const x=e(),M=y(),T=c(),$=H();return Z.diff(k,x,T)/M*$},xToDate:k=>{const x=e(),M=y(),T=c(),$=H(),B=k/$*M;return Z.add(x,B,T)}}}function Be(t){return!t||t.length===0?[]:t.map(e=>typeof e=="object"&&e!==null?{...e,id:e.id||e.name||String(e),type:e.type||"resource",group:e.group||null}:{id:String(e),type:"resource",group:null})}function To(t,e){const n=[];for(const o of t){if(o.type==="group"){n.push({...o,displayIndex:n.length,isCollapsed:e.has(o.id)});continue}o.group&&e.has(o.group)||n.push({...o,displayIndex:n.length})}return n}function Co(t){if(!t||t.length===0)return[];const e=new Set,n=[];for(const o of t){const s=o.resource||"Unassigned";e.has(s)||(e.add(s),n.push({id:s,type:"resource",group:null}))}return n}function Mo(t=[]){const[e,n]=L(Be(t)),[o,s]=L(new Set),r=X(()=>To(e(),o())),i=X(()=>{const u=new Map,c=r();for(let y=0;y<c.length;y++)u.set(c[y].id,y);return u}),l=X(()=>r().length),m=u=>{s(c=>{const y=new Set(c);return y.has(u)?y.delete(u):y.add(u),y})},g=u=>{s(c=>{const y=new Set(c);return y.delete(u),y})},b=u=>{s(c=>{const y=new Set(c);return y.add(u),y})},f=u=>o().has(u),I=u=>{n(Be(u))},R=X(()=>e().filter(u=>u.type==="group"));return{resources:e,collapsedGroups:o,displayResources:r,resourceIndexMap:i,displayCount:l,getGroups:R,updateResources:I,toggleGroup:m,expandGroup:g,collapseGroup:b,isGroupCollapsed:f,expandAll:()=>{s(new Set)},collapseAll:()=>{const u=R();s(new Set(u.map(c=>c.id)))}}}function _o(t,e,n,o,s){return Z.diff(t,e,n)/o*s}function Do(t,e,n){const o=e+n;return t*o+n/2}function Ho(t,e,n,o,s){return Z.diff(e,t,n)/o*s}function We(t,e,n,o=[],s=45){const r=t+e,i=new Set(o.map(R=>Math.floor(R/s))),m=o.reduce((R,h)=>R+(h>=t&&h<r?1:0),0)*s;let g=(e-m)*n/100;const b=t+g,f=o.reduce((R,h)=>R+(h>=t&&h<b?1:0),0);g+=f*s;let I=t+g;for(;I<r;){const R=Math.floor(I/s);if(i.has(R))g+=s,I=t+g;else break}return Math.min(g,e)}function Ro(t,e,n,o){const s=Z.today(),r=Z.diff(e,t,"hour")/o,i=Z.diff(s,t,"hour")/o,l=Math.min(i,r);return r>0?l*100/r:0}function $o(t,e,n){return e.some(o=>t>=o&&t<o+n)}function we(t,e,n=[]){let o=Math.round(t/e)*e;for(;$o(o,n,e);)o+=e;return o}function Je(t,e,n,o=7){return n.length*o+10<e?{x:t+e/2,position:"inside"}:{x:t+e+5,position:"outside"}}function Po(t,e,n=20){if(!t._children||t._children.length===0)return null;const o=e.get?g=>e.get(g):g=>e[g],s=[],r=g=>{for(const b of g){const f=o(b);f!=null&&f.$bar&&(s.push(f.$bar),f._children&&f._children.length>0&&r(f._children))}};if(r(t._children),s.length===0)return null;const i=Math.min(...s.map(g=>g.x)),l=Math.max(...s.map(g=>g.x+g.width)),m=Math.max(l-i,n);return{x:i,width:m}}function Fo(t){let e=0;for(const n of t.values())n._depth>e&&(e=n._depth);for(let n=e;n>=0;n--)for(const o of t.values())if(o._depth===n&&o.type==="summary"){const s=Po(o,t);s&&o.$bar&&(o.$bar.x=s.x,o.$bar.width=s.width)}}const _t={FS:"FS",SS:"SS",FF:"FF",SF:"SF"},re=0;function Io(t){const e=new Map,n=new Set;for(const r of t){const i=r.from??r.predecessorId,l=r.to??r.successorId;!i||!l||(n.add(i),n.add(l),e.has(i)||e.set(i,[]),e.get(i).push(l))}const o=new Map,s=new Map;for(const r of n)o.set(r,0);for(const r of n){if(o.get(r)!==0)continue;const i=[{node:r,iterator:null}];for(o.set(r,1);i.length>0;){const l=i[i.length-1],m=e.get(l.node)||[];l.iterator===null&&(l.iterator=0);let g=!1;for(;l.iterator<m.length;){const b=m[l.iterator];l.iterator++;const f=o.get(b);if(f===1){const I=[b];for(let R=i.length-1;R>=0&&(I.unshift(i[R].node),i[R].node!==b);R--);return{hasCycle:!0,cycle:I}}if(f===0){o.set(b,1),s.set(b,l.node),i.push({node:b,iterator:null}),g=!0;break}}g||(o.set(l.node,2),i.pop())}}return{hasCycle:!1,cycle:null}}function Eo(t,e,n=new Set){const o=[],s=[t];for(;s.length>0;){const r=s.shift();if(!n.has(r)){n.add(r);for(const i of e)i.elastic===!1&&(i.from===r&&!n.has(i.to)&&(o.push({taskId:i.to,relationship:i}),s.push(i.to)),i.to===r&&!n.has(i.from)&&(o.push({taskId:i.from,relationship:i}),s.push(i.from)))}}return o}function Xt(t,e,n,o,s=null){const r=s??e.$bar.x,i=e.$bar.width,l=n.$bar.width;switch(t){case _t.FS:return r+i+o;case _t.SS:return r+o;case _t.FF:return r+i-l+o;case _t.SF:return r-l+o;default:return r+i+o}}function Ao(t,e,n,o,s=null){return Xt(t,e,n,o,s)}function Lo(t,e,n,o,s){const r=Xt(t,e,n,o,s),i=n.$bar.x;return i<r?r-i:0}function Te(t,e,n,o,s,r={},i=new Set){var f,I;if(i.has(t))return console.warn(`Cycle detected in dependency chain involving task: ${t}`),null;const l=new Set(i);l.add(t);const{pixelsPerTimeUnit:m=1}=r,g=o.getTask(t);if(!g||(f=g.constraints)!=null&&f.locked)return null;const b=Eo(t,s);if(b.length>0){if(b.some(c=>{var p;const y=o.getTask(c.taskId);return(p=y==null?void 0:y.constraints)==null?void 0:p.locked}))return null;const h=e-g.$bar.x,_=n-g.$bar.y,u=[{taskId:t,x:e,y:n}];return b.forEach(c=>{const y=o.getTask(c.taskId);y&&u.push({taskId:c.taskId,x:y.$bar.x+h,y:y.$bar.y+_})}),{type:"batch",updates:u}}for(const R of s){if(R.elastic===!1)continue;const h=R.from===t,_=R.to===t;if(!h&&!_)continue;const u=h?R.to:R.from,c=o.getTask(u);if(!c)continue;const y=R.type||_t.FS,H=(R.lag??re)*m;if(h){const z=Lo(y,g,c,H,e);if(z>0)if((I=c.constraints)!=null&&I.locked){const F=Bo(y,g,c,H,c.$bar.x);e=Math.min(e,F)}else{const F=c.$bar.x+z,a=Te(u,F,c.$bar.y,o,s,r,l);(a==null?void 0:a.type)==="single"?o.updateBarPosition(u,{x:a.x,y:a.y}):(a==null?void 0:a.type)==="batch"&&a.updates.forEach(w=>{o.updateBarPosition(w.taskId,{x:w.x,y:w.y})})}}else{const F=Xt(y,c,g,H);e<F&&(e=F)}}return{type:"single",taskId:t,x:e,y:n}}function Bo(t,e,n,o,s){const r=e.$bar.width,i=n.$bar.width;switch(t){case _t.FS:return s-r-o;case _t.SS:return s-o;case _t.FF:return s-r+i-o;case _t.SF:return s+i-o;default:return s-r-o}}function Wo(t,e,n,o,s={}){if(e>=0)return e;const{pixelsPerTimeUnit:r=1}=s;let i=e;const l=new Set(t.keys());for(const[m,{originalX:g}]of t){const b=o(m);if(b!=null&&b.$bar)for(const f of n){if(f.to!==m)continue;const I=f.from;if(l.has(I))continue;const R=o(I);if(!(R!=null&&R.$bar))continue;const h=f.type||_t.FS,u=(f.lag??re)*r,c=Xt(h,R,b,u);if(g+e<c){const p=c-g;p<=0?i=Math.max(i,p):i=Math.max(i,0)}}}return i}function Yo(t,e,n=null,o=new Set){var r;const s=[t];for(;s.length>0;){const i=s.shift();if(!o.has(i)){if(n){const l=n(i);if((r=l==null?void 0:l.constraints)!=null&&r.locked)continue}o.add(i);for(const l of e)l.from===i&&!o.has(l.to)&&s.push(l.to)}}return o}function zo(t,e,n,o={}){var i;const{pixelsPerTimeUnit:s=1}=o,r=e.getTask(t);if(r){for(const l of n){if(l.from!==t)continue;const m=e.getTask(l.to);if(!m||(i=m.constraints)!=null&&i.locked)continue;const g=l.type||_t.FS,f=(l.lag??re)*s;if(l.elastic!==!1){const R=Xt(g,r,m,f);if(m.$bar.x<R){const h=Te(l.to,R,m.$bar.y,e,n,o,new Set([t]));(h==null?void 0:h.type)==="single"?e.updateBarPosition(l.to,{x:h.x,y:h.y}):(h==null?void 0:h.type)==="batch"&&h.updates.forEach(_=>{e.updateBarPosition(_.taskId,{x:_.x,y:_.y})})}}else{const R=Ao(g,r,m,f);e.updateBarPosition(l.to,{x:R})}}for(const l of n){if(l.to!==t||l.type!==_t.FF&&l.type!==_t.SF)continue;const m=e.getTask(l.from);if(!m)continue;const g=l.type,f=(l.lag??re)*s,I=Xt(g,m,r,f);r.$bar.x<I&&e.updateBarPosition(t,{x:I})}}}function Xo(t,e){return`task-${t.name||""}-${e}-${Date.now()}`.replace(/\s+/g,"-")}function qo(t){return t?typeof t=="object"&&!Array.isArray(t)?[{id:t.id,type:t.type||"FS",lag:t.lag||0}]:typeof t=="string"?t.split(",").map(e=>e.trim()).filter(e=>e.length>0).map(e=>({id:e,type:"FS",lag:0})):Array.isArray(t)?t.filter(e=>e).map(e=>typeof e=="string"?{id:e,type:"FS",lag:0}:{id:e.id,type:e.type||"FS",lag:e.lag||0}):[]:[]}function Vo(t,e){const n={...t};if(n.id||(n.id=Xo(t,e)),n._start=Z.parse(t.start),t.end)n._end=Z.parse(t.end);else if(t.duration){const{duration:s,scale:r}=Z.parse_duration(t.duration);n._end=Z.add(n._start,s,r)}else n._end=new Date(n._start);return Z.diff(n._end,n._start,"year")>10?(console.error(`Task "${n.name}" has duration > 10 years`),null):(n._end<n._start&&(console.warn(`Task "${n.name}" has end before start, swapping`),[n._start,n._end]=[n._end,n._start]),n.dependencies=qo(t.dependencies),n._index=e,typeof n.progress!="number"&&(n.progress=0),n.progress=Math.max(0,Math.min(100,n.progress)),n.constraints={locked:!1,...t.constraints},t.parentId!==void 0&&(n.parentId=t.parentId),t.type!==void 0&&(n.type=t.type),n._children=[],n._depth=0,n)}function jo(t,e,n=null){const o=[],s=[];for(let g=0;g<t.length;g++){const b=Vo(t[g],g);b&&o.push(b)}const r=new Set,i=[];for(const g of o){const b=g.resource||"Unassigned";r.has(b)||(r.add(b),i.push(b))}let l;n?l=n:(l=new Map,i.forEach((g,b)=>l.set(g,b)));for(const g of o){const b=g.resource||"Unassigned",f=l.get(b),I=f!==void 0?f:-1,R=I<0,h=_o(g._start,e.ganttStart,e.unit,e.step,e.columnWidth),_=R?-1e3:Do(I,e.barHeight,e.padding),u=Ho(g._start,g._end,e.unit,e.step,e.columnWidth);g.$bar={x:h,y:_,width:u,height:e.barHeight},g._resourceIndex=I,g._isHidden=R;for(const c of g.dependencies)o.find(p=>p.id===c.id)&&s.push({from:c.id,to:g.id,type:c.type||"FS",lag:c.lag||0,elastic:!0})}const m=Io(s);return m.hasCycle&&console.warn(`Circular dependency detected: ${m.cycle.join(" â†’ ")}`,`
This may cause unexpected behavior during task dragging.`),{tasks:o,relationships:s,resources:i}}function Uo(t){let e=null,n=null;for(const o of t){const s=o._start,r=o._end;(!e||s<e)&&(e=s),(!n||r>n)&&(n=r)}return{minDate:e||new Date,maxDate:n||new Date}}function Go(t){return t?t.entries?Array.from(t.entries()):Object.entries(t):[]}function Ke(t,e){return t?t.get?t.get(e):t[e]:null}function No(t,e,n,o){var f,I,R,h;const{barHeight:s=30,padding:r=18,subtaskHeightRatio:i=.5}=e,l=s+r,m=new Map;let g=0;const b=new Map;for(const[_,u]of Go(o))u.resource&&(b.has(u.resource)||b.set(u.resource,[]),b.get(u.resource).push(u));for(const _ of t){let u=[];const c=b.get(_.id)||[];for(const D of c)D.parentId||D.type!=="project"&&n!=null&&n.has(D.id)&&((f=D._children)==null?void 0:f.length)>0&&u.push(D);if(u.length>0){let D=0;for(const O of u)D+=Ye(O,e,o);c.filter(O=>!O.parentId&&O.type!=="project"&&!(n!=null&&n.has(O.id))).length}const y=new Map,p=g+r/2,H=[...c].filter(D=>!D.parentId).sort((D,O)=>D.type==="project"&&O.type!=="project"?-1:O.type==="project"&&D.type!=="project"?1:(D._start||0)-(O._start||0)),z=[],F=(D,O)=>{var k,x,M;const K=D._start??((k=D.$bar)==null?void 0:k.x)??0,nt=D._end??((x=D.$bar)==null?void 0:x.x)+((M=D.$bar)==null?void 0:M.width)??K+1;for(const T of O.occupiedRanges)if(!(nt<=T.start||K>=T.end))return!0;return!1},a=(D,O)=>{var x,M,T;const K=D._start??((x=D.$bar)==null?void 0:x.x)??0,nt=D._end??((M=D.$bar)==null?void 0:M.x)+((T=D.$bar)==null?void 0:T.width)??K+1;for(const $ of z)if(!F(D,$))return $.occupiedRanges.push({start:K,end:nt}),$.height=Math.max($.height,O),$.y;const k=z.length===0?p:z[z.length-1].y+z[z.length-1].height;return z.push({y:k,height:O,occupiedRanges:[{start:K,end:nt}]}),k};for(const D of H){const O=(n==null?void 0:n.has(D.id))&&((I=D._children)==null?void 0:I.length)>0;let K,nt;if(O){K=Ye(D,e,o);const k=D.subtaskLayout||"sequential",x=k==="sequential"?s:K;nt=a(D,k==="sequential"?l:K),y.set(D.id,{y:nt,height:x,x:(R=D.$bar)==null?void 0:R.x,width:(h=D.$bar)==null?void 0:h.width,isExpanded:O});const T=s*i,$=r*.4;if(D._children){const B=k==="mixed"||k==="parallel"?Qe(D._children,o):null,U=(s-T)/2;D._children.forEach((V,q)=>{Ke(o,V);let rt;if(k==="sequential")rt=nt+U;else{const W=(B==null?void 0:B.get(V))??q;rt=nt+U+W*(T+$)}y.set(V,{y:rt,height:T,isSubtask:!0})})}}else D.type==="project"?(K=s*.6,nt=a(D,K),y.set(D.id,{y:nt,height:K,isExpanded:!1})):(K=l,nt=a(D,K),y.set(D.id,{y:nt,height:s,isExpanded:!1}))}let w=p;for(const D of z)w=Math.max(w,D.y+D.height);const J=Math.max(l,w-g);m.set(_.id,{y:g,height:J,contentY:g+r/2,contentHeight:J-r,type:_.type,expandedTasks:u.map(D=>D.id),taskPositions:y}),g+=J}return m.set("__total__",{height:g}),m}function Ye(t,e,n){const{barHeight:o=30,padding:s=18,subtaskHeightRatio:r=.5}=e,i=o*r,l=s*.4,m=t._children||[];if(m.length===0)return o+s;const g=t.subtaskLayout||"sequential";if(g==="sequential")return o+s;if(g==="parallel"){const b=(o-i)/2,f=m.length;return b*2+f*i+(f-1)*l}return g==="mixed"?Oo(t,e,n):o+s}function Qe(t,e){var r,i,l;const n=new Map;if(!(t!=null&&t.length)||!e)return n;const o=t.map(m=>Ke(e,m)).filter(m=>m!=null).sort((m,g)=>m.order!==void 0&&g.order!==void 0?m.order-g.order:(m._start||0)-(g._start||0)),s=[];for(const m of o){const g=m._start??((r=m.$bar)==null?void 0:r.x)??0,b=m._end??((i=m.$bar)==null?void 0:i.x)+((l=m.$bar)==null?void 0:l.width)??g+1;let f=-1;for(let I=0;I<s.length;I++)if(!s[I].some(h=>!(b<=h.start||g>=h.end))){f=I,s[I].push({start:g,end:b});break}f===-1&&(f=s.length,s.push([{start:g,end:b}])),n.set(m.id,f)}return n}function Oo(t,e,n){const{barHeight:o=30,padding:s=18,subtaskHeightRatio:r=.5}=e,i=o*r,l=s*.4,m=t._children||[];if(m.length===0)return o+s;const g=Qe(m,n),f=Math.max(0,...g.values())+1;return(o-i)/2*2+f*i+(f-1)*l}function ze(t,e){if(t.length===0)return-1;if(e<0)return 0;let n=0,o=t.length-1;for(;n<=o;){const s=Math.floor((n+o)/2),r=t[s];if(e>=r.y&&e<r.y+r.height)return s;e<r.y?o=s-1:n=s+1}return Math.min(n,t.length-1)}function Jo(t){const e=[];for(const[n,o]of t)n!=="__total__"&&e.push({id:n,...o});return e.sort((n,o)=>n.y-o.y),e}function Ko(t,e){const{barHeight:n=30,padding:o=18}=e,s=n+o,r=new Map;for(let i=0;i<t.length;i++){const l=t[i],m=i*s;r.set(l.id,{y:m,height:s,contentY:m+o/2,contentHeight:n,type:l.type})}return r.set("__total__",{height:t.length*s}),r}const se=(t,e)=>(t==null?void 0:t.start)===(e==null?void 0:e.start)&&(t==null?void 0:t.end)===(e==null?void 0:e.end);function Qo(t){const{scrollX:e,scrollY:n,viewportWidth:o,viewportHeight:s,columnWidth:r,rowHeight:i,totalRows:l,sortedRowLayouts:m,overscanCols:g=5,overscanRows:b=20,overscanX:f=2500}=t,I=X(()=>{const c=r(),y=e(),p=o();return c<=0||p<=0?{start:0,end:100}:{start:Math.max(0,Math.floor(y/c)-g),end:Math.ceil((y+p)/c)+g}},void 0,{equals:se}),R=X(()=>{const c=n(),y=s(),p=l();if(y<=0)return{start:0,end:Math.min(p,30)};const H=m==null?void 0:m();if(H&&H.length>0){const F=Math.max(0,ze(H,c)-b),a=Math.min(p,ze(H,c+y)+1+b);return{start:F,end:a}}const z=i();return z<=0?{start:0,end:Math.min(p,30)}:{start:Math.max(0,Math.floor(c/z)-b),end:Math.min(p,Math.ceil((c+y)/z)+b)}},void 0,{equals:se}),h=100,_=X(()=>{const c=e(),y=o();return{start:Math.max(0,Math.floor((c-f)/h)*h),end:Math.ceil((c+y+f)/h)*h}},void 0,{equals:se}),u=X(()=>{const c=n(),y=s(),p=(i==null?void 0:i())||48,H=b*p;return{start:Math.max(0,c-H),end:c+y+H}},void 0,{equals:se});return{colRange:I,rowRange:R,xRange:_,yRange:u}}function Zo(t){const e=new Map;for(const s of t)s._children=[],s._depth=0,e.set(s.id,s);for(const s of t)if(s.parentId){const r=e.get(s.parentId);r&&(r._children.push(s.id),r.type||(r.type="summary"))}const n=t.filter(s=>!s.parentId),o=n.map(s=>({task:s,depth:0}));for(;o.length>0;){const{task:s,depth:r}=o.shift();s._depth=r;for(const i of s._children){const l=e.get(i);l&&o.push({task:l,depth:r+1})}}for(const s of t)s.parentId&&s._depth===0&&!n.includes(s)&&(console.warn(`Circular or orphaned parent reference detected for task ${s.id}`),s._depth=0);return e}function ts(t,e){const n=new Set,o=[t],s=e.get?r=>e.get(r):r=>e[r];for(;o.length>0;){const r=o.shift(),i=s(r);for(const l of(i==null?void 0:i._children)||[])n.has(l)||(n.add(l),o.push(l))}return n}function es(t,e,n){const o=e.get?r=>e.get(r):r=>e[r];let s=o(t);for(;s!=null&&s.parentId;){if(n.has(s.parentId))return!0;s=o(s.parentId)}return!1}var ns=Pt('<div style=position:absolute><div class=bar style=position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box></div><div class=bar-expected-progress style=position:absolute;top:0;left:0;height:100%></div><div class=bar-progress style=position:absolute;top:0;left:0;height:100%;opacity:0.3></div><div style=position:absolute;top:50%;white-space:nowrap;pointer-events:none;font-size:12px></div><div style=position:absolute;top:2px;right:4px;font-size:10px;pointer-events:none>ðŸ”’</div><div class="handle handle-left"style="position:absolute;left:-2px;top:25%;width:4px;height:50%;border-radius:1px;background-color:var(--g-handle-color, #ddd);cursor:ew-resize;opacity:0"></div><div class="handle handle-right"style="position:absolute;right:-2px;top:25%;width:4px;height:50%;border-radius:1px;background-color:var(--g-handle-color, #ddd);cursor:ew-resize;opacity:0"></div><div class="handle handle-progress"style="position:absolute;top:50%;transform:translateY(-50%);width:10px;height:10px;border-radius:50%;background-color:var(--g-progress-handle-color, #fff);cursor:ew-resize;opacity:0;box-sizing:border-box">');function os(t){const e=to(),n=()=>{const d=t.task;return typeof d=="function"?d():d},o=()=>{const d=n();return(d==null?void 0:d.$bar)??{x:t.x??0,y:t.y??0,width:t.width??100,height:t.height??30}},s=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.barCornerRadius)==null?void 0:E.call(d))??t.cornerRadius??3}),r=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.readonly)==null?void 0:E.call(d))??t.readonly??!1}),i=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.readonlyDates)==null?void 0:E.call(d))??t.readonlyDates??!1}),l=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.readonlyProgress)==null?void 0:E.call(d))??t.readonlyProgress??!1}),m=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.showExpectedProgress)==null?void 0:E.call(d))??t.showExpectedProgress??!1}),g=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.columnWidth)==null?void 0:E.call(d))??t.columnWidth??45}),b=X(()=>{var d,E;return((E=(d=t.ganttConfig)==null?void 0:d.ignoredPositions)==null?void 0:E.call(d))??t.ignoredPositions??[]}),f=X(()=>{var E,S;const d=n();return d?{id:d.id??"",name:d.name??"",color:d.color??"#b8c2cc",colorProgress:d.color_progress??"#a3a3ff",progress:d.progress??0,locked:((E=d.constraints)==null?void 0:E.locked)??!1,invalid:d.invalid??!1,customClass:d.custom_class??"",hasChildren:(((S=d._children)==null?void 0:S.length)??0)>0,start:d._start??d.start??null,end:d._end??d.end??null}:{id:"",name:"",color:"#b8c2cc",colorProgress:"#a3a3ff",progress:0,locked:!1,invalid:!1,customClass:"",hasChildren:!1,start:null,end:null}}),I=X(()=>o()),R=()=>{var d;return((d=I())==null?void 0:d.x)??0},h=()=>{var E;const d=typeof t.taskPosition=="function"?t.taskPosition():t.taskPosition;return(d==null?void 0:d.y)??((E=I())==null?void 0:E.y)??0},_=()=>{var d;return((d=I())==null?void 0:d.width)??100},u=()=>{var d;return((d=I())==null?void 0:d.height)??30},c=()=>g();let y=!1;const{dragState:p,isDragging:H,startDrag:z}=Ve({onDragStart:(d,E)=>{var S,tt,ot;if(y=!1,d.originalX=R(),d.originalY=h(),d.originalWidth=_(),d.originalProgress=f().progress,(tt=(S=t.taskStore)==null?void 0:S.setDraggingTaskId)==null||tt.call(S,f().id),E==="dragging_bar"){const dt=new Set;if(t.onCollectDependents){const et=t.onCollectDependents(f().id);for(const at of et)dt.add(at)}if(t.onCollectDescendants){const et=t.onCollectDescendants(f().id);for(const at of et)dt.add(at)}d.dependentOriginals=new Map;for(const et of dt){const at=(ot=t.taskStore)==null?void 0:ot.getBarPosition(et);at&&d.dependentOriginals.set(et,{originalX:at.x})}}},onDragMove:(d,E,S)=>{var dt;if(!t.taskStore||!f().id)return;y=!0;const tt=g(),ot=b();if(S==="dragging_bar"){let et=we(E.originalX+d.deltaX,tt,ot),at=et-E.originalX;if(((dt=E.dependentOriginals)==null?void 0:dt.size)>0&&t.taskStore.batchMovePositions)t.onClampBatchDelta&&at<0&&(at=t.onClampBatchDelta(E.dependentOriginals,at)),t.taskStore.batchMovePositions(E.dependentOriginals,at);else{if(t.onConstrainPosition){const A=t.onConstrainPosition(f().id,et,h());if(A===null)return;et=A.x??et}t.taskStore.updateBarPosition(f().id,{x:et})}}else if(S==="dragging_left"){const et=d.deltaX,at=Math.round(et/tt)*tt;let A=E.originalX+at,P=E.originalWidth-at;if(P<c()&&(P=c(),A=E.originalX+E.originalWidth-c()),A=we(A,tt,ot),t.onConstrainPosition){const Tt=t.onConstrainPosition(f().id,A,h());if(Tt===null)return;Tt.x>A&&(P=P-(Tt.x-A),A=Tt.x)}t.taskStore.updateBarPosition(f().id,{x:A,width:P})}else if(S==="dragging_right"){const et=d.deltaX,at=Math.round(et/tt)*tt;let A=E.originalWidth+at;A=Math.max(c(),A),t.taskStore.updateBarPosition(f().id,{width:A})}else if(S==="dragging_progress"){const et=R(),at=_(),A=b(),P=g();let Tt=Le(E.startSvgX+d.deltaX,et,et+at);const Q=A.reduce((Y,j)=>Y+(j>=et&&j<et+at?1:0),0),ht=at-Q*P,xt=Tt-et,ct=A.reduce((Y,j)=>Y+(j>=et&&j<Tt?1:0),0),bt=xt-ct*P,v=ht>0?Le(Math.round(bt/ht*100),0,100):0;if(t.taskStore){const Y=t.taskStore.getTask(f().id);Y&&t.taskStore.updateTask(f().id,{...Y,progress:v})}}},onDragEnd:(d,E,S)=>{var et,at,A;(at=(et=t.taskStore)==null?void 0:et.setDraggingTaskId)==null||at.call(et,null);const tt=t.onDateChange??e.onDateChange,ot=t.onResizeEnd??e.onResizeEnd,dt=t.onProgressChange??e.onProgressChange;if(S==="dragging_bar"||S==="dragging_left"||S==="dragging_right"){const P=(A=t.taskStore)==null?void 0:A.getBarPosition(f().id);tt==null||tt(f().id,{x:(P==null?void 0:P.x)??R(),width:(P==null?void 0:P.width)??_()}),(S==="dragging_left"||S==="dragging_right")&&(ot==null||ot(f().id))}else S==="dragging_progress"&&(dt==null||dt(f().id,f().progress))}}),F=d=>{if(r()||i()||N())return;const E=d.target;E.classList&&E.classList.contains("handle")||(y=!1,z(d,"dragging_bar",{taskId:f().id}))},a=d=>{const E=t.onHover??e.onHover;E&&!H()&&E(f().id,d.clientX,d.clientY)},w=()=>{const d=t.onHoverEnd??e.onHoverEnd;d&&d()},J=d=>{const E=t.onTaskClick??e.onTaskClick;!y&&E&&(d.stopPropagation(),E(f().id,d))},D=d=>{r()||i()||N()||(d.stopPropagation(),z(d,"dragging_left",{taskId:f().id}))},O=d=>{r()||i()||N()||(d.stopPropagation(),z(d,"dragging_right",{taskId:f().id}))},K=d=>{r()||l()||N()||(d.stopPropagation(),z(d,"dragging_progress",{taskId:f().id}))},nt=X(()=>We(R(),_(),f().progress,b(),g())),k=X(()=>{var tt,ot,dt,et;if(!m())return 0;const d=f().start,E=f().end;if(!d||!E)return 0;const S=Ro(d,E,((ot=(tt=t.ganttConfig)==null?void 0:tt.unit)==null?void 0:ot.call(tt))??"day",((et=(dt=t.ganttConfig)==null?void 0:dt.step)==null?void 0:et.call(dt))??1);return We(R(),_(),S,b(),g())}),x=X(()=>Je(R(),_(),f().name)),M=()=>f().color,T=()=>f().colorProgress,$=()=>"var(--g-expected-progress-color, rgba(0,0,0,0.2))",B=()=>f().hasChildren,U=()=>f().invalid,V=()=>f().customClass,q=()=>!r(),rt=()=>q()&&!i(),W=()=>q()&&!l(),N=()=>f().locked,ut=()=>H()?`dragging ${p()}`:"",gt=()=>N()?"#7f8c8d":H()?"#2c3e50":M(),wt=()=>N()||H()?1:B()?0:.1;Dt(()=>{const d=f().id,E=gt(),S=wt();d==="task-0"&&console.log("[Bar task-0]",{bg:E,op:S,locked:N(),dragging:H(),hasSubtasks:B()})});const pt=()=>t.visible??!0,Mt=()=>`translate(${R()}px, ${h()}px)`;return(()=>{var d=ns(),E=d.firstChild,S=E.nextSibling,tt=S.nextSibling,ot=tt.nextSibling,dt=ot.nextSibling,et=dt.nextSibling,at=et.nextSibling,A=at.nextSibling;return d.$$click=J,d.addEventListener("mouseleave",w),d.addEventListener("mouseenter",a),d.$$mousedown=F,lt(ot,()=>f().name),et.$$mousedown=D,at.$$mousedown=O,A.$$mousedown=K,St(P=>{var Tt=`bar-wrapper ${V()} ${U()?"invalid":""} ${N()?"locked":""} ${ut()}`,Q=f().id,ht=Mt(),xt=`${_()}px`,ct=`${u()}px`,bt=N()?"not-allowed":r()?"default":"move",v=pt()?"visible":"hidden",Y=`${s()}px`,j=N()?"#7f8c8d":H()?"#2c3e50":M(),ft=N()||H()?1:B()?0:.1,vt=`${N()?"2px":"1.5px"} solid ${N()?"#c0392b":M()}`,mt=N()?"dashed":"solid",Ht=H()?"none":"background-color 0.1s ease",Ft=`${k()}px`,Rt=`${s()}px`,It=$(),kt=m()&&k()>0?"block":"none",Et=`${nt()}px`,qt=`${s()}px`,At=T(),Kt=`bar-label ${x().position}`,Lt=x().position==="inside"?"50%":`${_()+5}px`,Vt=x().position==="inside"?"translate(-50%, -50%)":"translateY(-50%)",Bt=x().position==="inside"?"#fff":"#333",Qt=N()?"block":"none",Wt=q()&&!N()&&rt()?"block":"none",jt=q()&&!N()&&rt()?"block":"none",Ut=`${nt()-5}px`,Gt=`2px solid ${T()}`,Nt=q()&&!N()&&W()&&nt()>0?"block":"none";return Tt!==P.e&&ye(d,P.e=Tt),Q!==P.t&&it(d,"data-id",P.t=Q),ht!==P.a&&G(d,"transform",P.a=ht),xt!==P.o&&G(d,"width",P.o=xt),ct!==P.i&&G(d,"height",P.i=ct),bt!==P.n&&G(d,"cursor",P.n=bt),v!==P.s&&G(d,"visibility",P.s=v),Y!==P.h&&G(E,"border-radius",P.h=Y),j!==P.r&&G(E,"background-color",P.r=j),ft!==P.d&&G(E,"opacity",P.d=ft),vt!==P.l&&G(E,"border",P.l=vt),mt!==P.u&&G(E,"border-style",P.u=mt),Ht!==P.c&&G(E,"transition",P.c=Ht),Ft!==P.w&&G(S,"width",P.w=Ft),Rt!==P.m&&G(S,"border-radius",P.m=Rt),It!==P.f&&G(S,"background-color",P.f=It),kt!==P.y&&G(S,"display",P.y=kt),Et!==P.g&&G(tt,"width",P.g=Et),qt!==P.p&&G(tt,"border-radius",P.p=qt),At!==P.b&&G(tt,"background-color",P.b=At),Kt!==P.T&&ye(ot,P.T=Kt),Lt!==P.A&&G(ot,"left",P.A=Lt),Vt!==P.O&&G(ot,"transform",P.O=Vt),Bt!==P.I&&G(ot,"color",P.I=Bt),Qt!==P.S&&G(dt,"display",P.S=Qt),Wt!==P.W&&G(et,"display",P.W=Wt),jt!==P.C&&G(at,"display",P.C=jt),Ut!==P.B&&G(A,"left",P.B=Ut),Gt!==P.v&&G(A,"border",P.v=Gt),Nt!==P.k&&G(A,"display",P.k=Nt),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0}),d})()}Se(["mousedown","click"]);var ss=Pt("<div data-type=summary style=position:absolute;will-change:transform;pointer-events:auto><div class=bar style=position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box></div><div class=bar-progress style=position:absolute;top:0;left:0;height:100%;pointer-events:none></div><div class=bar-label style=position:absolute;top:50%;font-size:12px;font-weight:500;pointer-events:none;user-select:none;white-space:nowrap></div><div style=position:absolute;top:50%;transform:translateY(-50%);font-size:10px;color:#888;pointer-events:none;white-space:nowrap>(<!>)");function rs(t){const e=()=>{const a=t.taskId;return typeof a=="function"?a():a},n=()=>{const a=e();if(t.taskStore&&a){const w=t.taskStore.tasks[a];if(w!=null&&w.$bar)return w.$bar}return{x:0,y:0,width:100,height:30}},o=()=>{const a=e();return t.taskStore&&a?t.taskStore.tasks[a]??{}:{}},s=X(()=>n()),r=()=>{var a;return((a=s())==null?void 0:a.x)??0},i=()=>{var w;const a=typeof t.taskPosition=="function"?t.taskPosition():t.taskPosition;return(a==null?void 0:a.y)??((w=s())==null?void 0:w.y)??0},l=()=>{var a;return((a=s())==null?void 0:a.width)??100},m=()=>{var a;return((a=s())==null?void 0:a.height)??30},g=X(()=>{var a,w;return((w=(a=t.ganttConfig)==null?void 0:a.columnWidth)==null?void 0:w.call(a))??45}),b=X(()=>{var a,w;return((w=(a=t.ganttConfig)==null?void 0:a.readonly)==null?void 0:w.call(a))??!1}),f=X(()=>{var a,w;return((w=(a=t.ganttConfig)==null?void 0:a.barCornerRadius)==null?void 0:w.call(a))??3}),I=()=>{var a;return((a=o())==null?void 0:a.color)??"var(--g-bar-color, #b8c2cc)"},R=()=>{var a;return((a=o())==null?void 0:a.color_progress)??"var(--g-bar-progress-color, #a3a3ff)"},h=()=>{var a;return((a=o())==null?void 0:a.progress)??0},_=()=>l()*h()/100,u=X(()=>{var w;const a=((w=o())==null?void 0:w.name)??"";return Je(r(),l(),a,7)}),{dragState:c,isDragging:y,startDrag:p}=Ve({onDragStart:(a,w)=>{var J;if(a.originalX=r(),a.originalY=i(),w==="dragging_bar"&&t.onCollectDescendants){const D=t.onCollectDescendants(e());D.add(e()),a.batchOriginals=new Map;for(const O of D){const K=(J=t.taskStore)==null?void 0:J.getBarPosition(O);K&&a.batchOriginals.set(O,{originalX:K.x})}}},onDragMove:(a,w,J)=>{var nt;if(!t.taskStore||!e()||J!=="dragging_bar")return;const D=g();let K=we(w.originalX+a.deltaX,D,[])-w.originalX;((nt=w.batchOriginals)==null?void 0:nt.size)>0&&t.taskStore.batchMovePositions&&(t.onClampBatchDelta&&K<0&&(K=t.onClampBatchDelta(w.batchOriginals,K)),t.taskStore.batchMovePositions(w.batchOriginals,K))},onDragEnd:(a,w)=>{var J;w==="dragging_bar"&&((J=t.onDragEnd)==null||J.call(t,e()))}}),H=()=>{const a=c();return a==="idle"?"":`dragging ${a}`},z=a=>{b()||(a.preventDefault(),a.stopPropagation(),p(a,"dragging_bar"))},F=()=>`translate(${r()}px, ${i()}px)`;return(()=>{var a=ss(),w=a.firstChild,J=w.nextSibling,D=J.nextSibling,O=D.nextSibling,K=O.firstChild,nt=K.nextSibling;return nt.nextSibling,a.$$mousedown=z,lt(D,()=>{var k;return((k=o())==null?void 0:k.name)??""}),lt(O,()=>{var k,x;return((x=(k=o())==null?void 0:k._children)==null?void 0:x.length)??0},nt),St(k=>{var S,tt,ot,dt;var x=`summary-bar-wrapper bar-wrapper ${H()}`,M=e(),T=F(),$=`${l()}px`,B=`${m()}px`,U=b()?"default":"grab",V=`${f()}px`,q=y()?"#2c3e50":I(),rt=y()?"none":"background-color 0.1s ease",W=`${_()}px`,N=`${f()}px`,ut=R(),gt=h()>0?"block":"none",wt=u().position==="inside"?"50%":`${l()+8}px`,pt=u().position==="inside"?"translate(-50%, -50%)":"translateY(-50%)",Mt=u().position==="inside"?"#fff":"#333",d=`${l()+8+(((tt=(S=o())==null?void 0:S.name)==null?void 0:tt.length)??0)*7}px`,E=((dt=(ot=o())==null?void 0:ot._children)==null?void 0:dt.length)>0?"block":"none";return x!==k.e&&ye(a,k.e=x),M!==k.t&&it(a,"data-id",k.t=M),T!==k.a&&G(a,"transform",k.a=T),$!==k.o&&G(a,"width",k.o=$),B!==k.i&&G(a,"height",k.i=B),U!==k.n&&G(a,"cursor",k.n=U),V!==k.s&&G(w,"border-radius",k.s=V),q!==k.h&&G(w,"background-color",k.h=q),rt!==k.r&&G(w,"transition",k.r=rt),W!==k.d&&G(J,"width",k.d=W),N!==k.l&&G(J,"border-radius",k.l=N),ut!==k.u&&G(J,"background-color",k.u=ut),gt!==k.c&&G(J,"display",k.c=gt),wt!==k.w&&G(D,"left",k.w=wt),pt!==k.m&&G(D,"transform",k.m=pt),Mt!==k.f&&G(D,"color",k.f=Mt),d!==k.y&&G(O,"left",k.y=d),E!==k.g&&G(O,"display",k.g=E),k},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),a})()}Se(["mousedown"]);var as=Pt("<svg><rect class=subtask-bar-progress fill-opacity=0.3 style=pointer-events:none></svg>",!1,!0,!1),is=Pt("<svg><g class=subtask-bar><rect class=subtask-bar-bg fill-opacity=0.1 stroke-width=1.5></rect><text class=subtask-label font-size=10 fill=#333 text-anchor=middle dominant-baseline=middle style=pointer-events:none;user-select:none></svg>",!1,!0,!1);function ls(t){const e=()=>t.task,n=()=>{var u;return((u=e())==null?void 0:u.$bar)||{x:0,width:100}},o=()=>n().x,s=()=>n().width,r=()=>t.y??0,i=()=>t.config||{},l=()=>i().barHeight??30,m=()=>i().subtaskHeightRatio??.5,g=()=>(i().cornerRadius??3)*.7,b=()=>l()*m(),f=()=>{var u;return((u=e())==null?void 0:u.color)??i().parentColor??"var(--g-bar-color, #b8c2cc)"},I=()=>{var u;return((u=e())==null?void 0:u.color_progress)??f()},R=()=>{var u;return((u=e())==null?void 0:u.progress)??0},h=()=>{const u=s(),c=R();return Math.max(0,u*c/100)},_=()=>o()+s()/2;return(()=>{var u=is(),c=u.firstChild,y=c.nextSibling;return lt(u,yt(eo,{get when(){return R()>0},get children(){var p=as();return St(H=>{var z=o(),F=r(),a=h(),w=b(),J=g(),D=g(),O=I();return z!==H.e&&it(p,"x",H.e=z),F!==H.t&&it(p,"y",H.t=F),a!==H.a&&it(p,"width",H.a=a),w!==H.o&&it(p,"height",H.o=w),J!==H.i&&it(p,"rx",H.i=J),D!==H.n&&it(p,"ry",H.n=D),O!==H.s&&it(p,"fill",H.s=O),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),p}}),y),lt(y,()=>{var p;return((p=e())==null?void 0:p.name)??""}),St(p=>{var M;var H=(M=e())==null?void 0:M.id,z=t.index,F=o(),a=r(),w=s(),J=b(),D=g(),O=g(),K=f(),nt=f(),k=_(),x=r()+b()/2;return H!==p.e&&it(u,"data-id",p.e=H),z!==p.t&&it(u,"data-index",p.t=z),F!==p.a&&it(c,"x",p.a=F),a!==p.o&&it(c,"y",p.o=a),w!==p.i&&it(c,"width",p.i=w),J!==p.n&&it(c,"height",p.n=J),D!==p.s&&it(c,"rx",p.s=D),O!==p.h&&it(c,"ry",p.h=O),K!==p.r&&it(c,"fill",p.r=K),nt!==p.d&&it(c,"stroke",p.d=nt),k!==p.l&&it(y,"x",p.l=k),x!==p.u&&it(y,"y",p.u=x),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),u})()}var cs=Pt("<svg><g class=expanded-task-container><rect class=parent-container fill=none stroke-width=2 stroke-opacity=0.6 stroke-dasharray=6,3></rect><g class=subtasks></svg>",!1,!0,!1);function ds(t){const e=()=>{var h;return(h=t.taskStore)==null?void 0:h.tasks[t.taskId]},n=()=>{var u,c;const h=e();if(!((u=h==null?void 0:h._children)!=null&&u.length))return[];const _=(c=t.taskStore)==null?void 0:c.tasks;return _?h._children.map(y=>_[y]).filter(y=>y!=null):[]},o=()=>{var h;return((h=e())==null?void 0:h.subtaskLayout)||"sequential"},s=()=>{var h,_;return((_=(h=t.ganttConfig)==null?void 0:h.barHeight)==null?void 0:_.call(h))??30},r=()=>{var h,_;return((_=(h=t.ganttConfig)==null?void 0:h.padding)==null?void 0:_.call(h))??18},i=()=>{var h,_;return((_=(h=t.ganttConfig)==null?void 0:h.subtaskHeightRatio)==null?void 0:_.call(h))??.5},l=()=>{var h,_;return((_=(h=t.ganttConfig)==null?void 0:h.barCornerRadius)==null?void 0:_.call(h))??3},m=()=>{var h;return((h=e())==null?void 0:h.$bar)||{x:0,y:0,width:100,height:30}},g=()=>{var u;const h=t.rowLayout,_=(u=h==null?void 0:h.taskPositions)==null?void 0:u.get(t.taskId);return(_==null?void 0:_.y)!==void 0?_.y:h?h.y:m().y-r()/2},b=()=>{var H;const h=t.rowLayout,_=(H=h==null?void 0:h.taskPositions)==null?void 0:H.get(t.taskId);if((_==null?void 0:_.height)!==void 0)return _.height;if(o()==="sequential")return s();const u=s()*i(),c=r()*.4,y=n().length;return(s()-u)/2*2+y*u+(y-1)*c},f=()=>{var h;return((h=e())==null?void 0:h.color)??"var(--g-bar-color, #b8c2cc)"},I=()=>({barHeight:s(),padding:r(),subtaskHeightRatio:i(),cornerRadius:l(),parentColor:f()}),R=(h,_)=>{var z;const u=t.rowLayout,c=(z=u==null?void 0:u.taskPositions)==null?void 0:z.get(_==null?void 0:_.id);if((c==null?void 0:c.y)!==void 0)return c.y;const y=s()*i(),p=r()*.4,H=(s()-y)/2;return o()==="sequential"?g()+H:g()+H+h*(y+p)};return(()=>{var h=cs(),_=h.firstChild,u=_.nextSibling;return lt(u,yt(je,{get each(){return n()},children:(c,y)=>yt(ls,{task:c,get index(){return y()},get y(){return R(y(),c)},get layout(){return o()},get config(){return I()},get ganttConfig(){return t.ganttConfig}})})),St(c=>{var y=t.taskId,p=o(),H=m().x,z=g(),F=m().width,a=b(),w=f(),J=l(),D=l();return y!==c.e&&it(h,"data-id",c.e=y),p!==c.t&&it(h,"data-layout",c.t=p),H!==c.a&&it(_,"x",c.a=H),z!==c.o&&it(_,"y",c.o=z),F!==c.i&&it(_,"width",c.i=F),a!==c.n&&it(_,"height",c.n=a),w!==c.s&&it(_,"stroke",c.s=w),J!==c.h&&it(_,"rx",c.h=J),D!==c.r&&it(_,"ry",c.r=D),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),h})()}var us=Pt('<div class=task-layer style="contain:layout style;position:relative;width:100%;height:100%"><div class=summary-layer style="contain:layout style"></div><div class=expanded-layer style="contain:layout style"></div><div class=task-bars-layer style="contain:layout style">'),gs=Pt("<div>"),fs=Pt("<div style=pointer-events:auto>");const Xe=5;function hs(t){const e=()=>t.relationships||[],n=(x,M,T)=>{var U,V;if(!t.taskStore)return{x:M,y:T};const $=((V=(U=t.ganttConfig)==null?void 0:U.columnWidth)==null?void 0:V.call(U))??45,B=Te(x,M,T,t.taskStore,e(),{pixelsPerTimeUnit:$});if(!B)return null;if(B.type==="batch"){for(const rt of B.updates)rt.taskId!==x&&t.taskStore.updateBarPosition(rt.taskId,{x:rt.x});const q=B.updates.find(rt=>rt.taskId===x);return q?{x:q.x,y:q.y}:{x:M,y:T}}return{x:B.x,y:B.y}},o=(x,M)=>{var T;(T=t.onDateChange)==null||T.call(t,x,M)},s=(x,M)=>{var T;(T=t.onProgressChange)==null||T.call(t,x,M)},r=x=>{var M;t.taskStore&&zo(x,t.taskStore,e()),(M=t.onResizeEnd)==null||M.call(t,x)},i=(x,M,T)=>{var $;($=t.onHover)==null||$.call(t,x,M,T)},l=()=>{var x;(x=t.onHoverEnd)==null||x.call(t)},m=(x,M)=>{var T;(T=t.onTaskClick)==null||T.call(t,x,M)},g=x=>{var T,$;const M=($=(T=t.taskStore)==null?void 0:T.getTask)==null?void 0:$.bind(t.taskStore);return Yo(x,e(),M)},b=(x,M)=>{var B,U,V,q;const T=(U=(B=t.taskStore)==null?void 0:B.getTask)==null?void 0:U.bind(t.taskStore),$=((q=(V=t.ganttConfig)==null?void 0:V.columnWidth)==null?void 0:q.call(V))??45;return Wo(x,M,e(),T,{pixelsPerTimeUnit:$})},f=x=>{if(!t.taskStore)return new Set;const M=t.taskStore.tasks;return ts(x,M)},I=x=>{var M;(M=t.taskStore)==null||M.toggleTaskCollapse(x)},R=()=>{var x;return((x=t.resourceStore)==null?void 0:x.displayResources())||[]},h=()=>t.startRow??0,_=()=>t.endRow??R().length,u=()=>t.startX??0,c=()=>t.endX??1/0;let y=null,p=-1;const H=()=>{var $;const x=($=t.taskStore)==null?void 0:$.tasks;if(!x)return new Map;const M=$t(()=>Object.keys(x));if(M.length===p&&y)return y;p=M.length;const T=new Map;return $t(()=>{for(const B of M){const U=x[B];if(!U||U._isHidden)continue;const V=U.resource||"Unassigned";T.has(V)||T.set(V,[]),T.get(V).push(U)}}),y=T,T},z=X(()=>{const x=[],M=R(),T=H(),$=h(),B=_(),U=u(),V=c();for(let q=$;q<B&&q<M.length;q++){const rt=M[q];if(rt.type==="group")continue;const W=T.get(rt.id);W&&$t(()=>{if(V===1/0)for(let N=0;N<W.length;N++)x.push(W[N].id);else for(let N=0;N<W.length;N++){const ut=W[N],gt=ut.$bar;(!gt||gt.x+gt.width>=U-200&&gt.x<=V+200)&&x.push(ut.id)}})}return x}),F=x=>{var M,T;return((T=(M=t.ganttConfig)==null?void 0:M.isTaskExpanded)==null?void 0:T.call(M,x))??!1},a=()=>{var x,M;return((M=(x=t.ganttConfig)==null?void 0:x.renderMode)==null?void 0:M.call(x))==="simple"},w=X(()=>{const x=a(),M=z();return $t(()=>{var rt;const T=[],$=[],B=[],U=((rt=t.taskStore)==null?void 0:rt.tasks)??{},V=new Map,q=W=>(V.has(W)||V.set(W,F(W)),V.get(W));for(const W of M){const N=U[W];if(!N)continue;const ut=N.parentId,gt=N.type,wt=N._children;if(x){if(ut)continue;gt==="summary"||gt==="project"?$.push(W):T.push(W);continue}const pt=wt&&wt.length>0,Mt=q(W);pt&&Mt?B.push(W):gt==="summary"||gt==="project"?$.push(W):(!ut||!q(ut))&&T.push(W)}return{regularIds:T,summaryIds:$,expandedIds:B}})});let J=0,D=0;const O=X(()=>{const x=w().regularIds;J=Math.max(J,x.length);const M=J+Xe,T=new Array(M);for(let $=0;$<x.length;$++)T[$]=x[$];return T}),K=X(()=>{var T;const x=O(),M=((T=t.taskStore)==null?void 0:T.tasks)??{};return $t(()=>x.map($=>$?M[$]:void 0))}),nt=X(()=>{const x=w().summaryIds;D=Math.max(D,x.length);const M=D+Xe,T=new Array(M);for(let $=0;$<x.length;$++)T[$]=x[$];return T}),k=x=>{var U,V,q;const M=t.rowLayouts;if(!M)return null;const T=(V=(U=t.taskStore)==null?void 0:U.getTask)==null?void 0:V.call(U,x);if(!T)return null;const $=M.get(T.resource);if(!$)return null;if(a())return{...$,y:$.contentY,height:$.contentHeight,isExpanded:!1};const B=(q=$.taskPositions)==null?void 0:q.get(x);return B?{...$,y:B.y,height:B.height,isExpanded:B.isExpanded}:$};return(()=>{var x=us(),M=x.firstChild,T=M.nextSibling,$=T.nextSibling;return lt(M,yt(be,{get each(){return nt()},children:B=>(()=>{var U=gs();return lt(U,yt(rs,{taskId:B,get taskStore(){return t.taskStore},get ganttConfig(){return t.ganttConfig},onCollectDescendants:f,onClampBatchDelta:b,onToggleCollapse:I,onDragEnd:r})),St(V=>G(U,"display",B()?"block":"none")),U})()})),lt(T,yt(je,{get each(){return w().expandedIds},children:B=>yt(ds,{taskId:B,get taskStore(){return t.taskStore},get ganttConfig(){return t.ganttConfig},get rowLayout(){return k(B)}})})),lt($,yt(be,{get each(){return K()},children:B=>(()=>{var U=fs();return lt(U,yt(os,{task:B,get taskStore(){return t.taskStore},get ganttConfig(){return t.ganttConfig},onConstrainPosition:n,onCollectDependents:g,onCollectDescendants:f,onClampBatchDelta:b,onDateChange:o,onProgressChange:s,onResizeEnd:r,onHover:i,onHoverEnd:l,onTaskClick:m})),St(V=>G(U,"display",B()?"block":"none")),U})()})),x})()}var ms=Pt("<div style=position:absolute><div style=position:absolute;top:0;left:0;width:100%;height:100%;opacity:0.15;border-radius:3px></div><div style=position:absolute;top:0;left:0;height:100%;background-color:#a3a3ff;opacity:0.3;border-radius:3px></div><div style=position:absolute;top:50%;left:8px;transform:translateY(-50%);color:#fff;font-size:12px;white-space:nowrap></div><div style=position:absolute;bottom:2px;right:4px;font-size:9px;color:#888>");function vs(t){const e=()=>typeof t.task=="function"?t.task():t.task,n=X(()=>{var i,l,m,g;const o=e(),s=(o==null?void 0:o.progress)??0,r=((i=o==null?void 0:o.$bar)==null?void 0:i.width)??100;return{color:(o==null?void 0:o.color)??"#3b82f6",progress:s,name:(o==null?void 0:o.name)??"",pw:r*s/100,id:(o==null?void 0:o.id)??"",x:((l=o==null?void 0:o.$bar)==null?void 0:l.x)??0,y:((m=o==null?void 0:o.$bar)==null?void 0:m.y)??0,width:r,height:((g=o==null?void 0:o.$bar)==null?void 0:g.height)??30}});return(()=>{var o=ms(),s=o.firstChild,r=s.nextSibling,i=r.nextSibling,l=i.nextSibling;return lt(i,()=>n().name),lt(l,()=>n().id),St(m=>{var g=`translate(${n().x}px, ${n().y}px)`,b=`${n().width}px`,f=`${n().height}px`,I=n().color,R=`${n().pw}px`;return g!==m.e&&G(o,"transform",m.e=g),b!==m.t&&G(o,"width",m.t=b),f!==m.a&&G(o,"height",m.a=f),I!==m.o&&G(s,"background-color",m.o=I),R!==m.i&&G(r,"width",m.i=R),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o})()}var ys=Pt('<div class=task-layer-minimal style="contain:layout style;position:relative;width:100%;height:100%">');function bs(t){const e=()=>{var b;return((b=t.resourceStore)==null?void 0:b.displayResources())||[]},n=()=>t.startRow??0,o=()=>t.endRow??50,s=()=>t.startX??0,r=()=>t.endX??1/0;let i=null,l=-1;const m=()=>{var R;const b=(R=t.taskStore)==null?void 0:R.tasks;if(!b)return new Map;const f=$t(()=>Object.keys(b));if(f.length===l&&i)return i;l=f.length;const I=new Map;return $t(()=>{for(const h of f){const _=b[h];if(!_||_._isHidden)continue;const u=_.resource||"Unassigned";I.has(u)||I.set(u,[]),I.get(u).push(_)}}),i=I,I},g=X(()=>{const b=[],f=e(),I=m(),R=n(),h=o(),_=s(),u=r();for(let c=R;c<h&&c<f.length;c++){const y=f[c];if(y.type==="group")continue;const p=I.get(y.id);p&&$t(()=>{if(u===1/0)for(let H=0;H<p.length;H++)b.push(p[H]);else for(let H=0;H<p.length;H++){const z=p[H],F=z.$bar;(!F||F.x+F.width>=_-200&&F.x<=u+200)&&b.push(z)}})}return b});return(()=>{var b=ys();return lt(b,yt(be,{get each(){return g()},children:f=>yt(vs,{task:f})})),b})()}function xs(t){var bt;const e=po(),n=wo(t.options||{}),o=So(t.options||{}),s=Mo(t.resources||[]);typeof window<"u"&&(window.__ganttTaskStore=e,window.__ganttConfig=n,window.__ganttDateStore=o);const[r,i]=L(null),[l,m]=L(0),[g,b]=L(0),[f,I]=L(0),[R,h]=L(0),[_,u]=L(!1);let c=null;const[y,p]=L([]),[H,z]=L([]),[F,a]=L(null),[w,J]=L({x:0,y:0}),[D,O]=L(!1),[K,nt]=L(null),[k,x]=L(!1),M=X(()=>{const v=F();return v?e.getTask(v):null}),T=X(()=>{const v=F();return v?e.getBarPosition(v):null}),$=X(()=>{const v=K();return v?e.getTask(v):null}),B=X(()=>{const v=K();return v?e.getBarPosition(v):null}),U=X(()=>{const v=K();return v?y().filter(Y=>Y.from===v||Y.to===v):[]}),V=(v,Y=!0)=>{if(!v||v.length===0){e.clear(),p([]),o.setupDates([]);return}Uo(v.map(kt=>({_start:kt._start||new Date(kt.start),_end:kt._end||new Date(kt.end||kt.start)}))),o.setupDates(v),n.setGanttStart(o.ganttStart()),n.setGanttEnd(o.ganttEnd()),n.setUnit(o.unit()),n.setStep(o.step()),n.setColumnWidth(o.columnWidth());const j={ganttStart:o.ganttStart(),ganttEnd:o.ganttEnd(),unit:o.unit(),step:o.step(),columnWidth:o.columnWidth(),headerHeight:n.headerHeight(),barHeight:n.barHeight(),padding:n.padding()};let ft=null;const vt=s.resources().length>0;if(vt&&Y)ft=s.resourceIndexMap();else if(!vt){const kt=Co(v);s.updateResources(kt),ft=s.resourceIndexMap()}const{tasks:mt,relationships:Ht,resources:Ft}=jo(v,j,ft),Rt=Zo(mt);Fo(Rt);const It=e.collapsedTasks();for(const kt of Rt.values())es(kt.id,Rt,It)&&(kt._isHidden=!0);e.updateTasks(Array.from(Rt.values())),p(Ht),z(Ft)};xe(()=>{V(t.tasks)}),Dt(()=>{const v=t.tasks;s.collapsedGroups(),e.collapsedTasks(),v&&v.length>0&&$t(()=>V(v))}),Dt(()=>{const v=t.options;v&&n.updateOptions(v)});const[q,rt]=L((bt=t.options)==null?void 0:bt.view_mode);Dt(()=>{var j;const v=(j=t.options)==null?void 0:j.view_mode,Y=q();v&&v!==Y&&(rt(v),o.changeViewMode(v),t.tasks&&t.tasks.length>0&&$t(()=>V(t.tasks)))});const W=X(()=>{const v=e.tasks;return v?Object.keys(v).length:0}),N=X(()=>{const v=s.displayCount();return v>0?v:H().length}),ut=X(()=>o.gridWidth()),gt=X(()=>o.getAllDateInfos()),wt=X(()=>n.barHeight()+n.padding()),pt=X(()=>{const v=s.displayResources(),Y=n.renderMode();if(!v||v.length===0)return new Map;const j=v.map((Ht,Ft)=>({id:Ht.id,type:Ht.type||"resource",displayIndex:Ft,taskId:Ht.taskId})),ft={barHeight:n.barHeight(),padding:n.padding(),subtaskHeightRatio:n.subtaskHeightRatio()};if(Y==="simple")return Ko(j,ft);const vt=n.expandedTasks(),mt=e.tasks;return No(j,ft,vt,mt)}),Mt=X(()=>Jo(pt()));Dt(()=>{const v=pt();!v||v.size===0||$t(()=>{for(const[Y,j]of v)if(Y!=="__total__"&&j.taskPositions)for(const[ft,vt]of j.taskPositions){const mt=e.tasks[ft];mt&&mt.$bar&&mt.$bar.y!==vt.y&&e.updateBarPosition(ft,{y:vt.y})}})});const d=X(()=>{const Y=pt().get("__total__");return Y?Y.height:(N()||W())*wt()}),E=X(()=>{const v=d();if(v>0)return v;const Y=n.barHeight(),j=n.padding();return(N()||W())*(Y+j)}),S=Qo({scrollX:l,scrollY:g,viewportWidth:f,viewportHeight:R,columnWidth:()=>o.columnWidth(),rowHeight:wt,totalRows:()=>N()||W(),sortedRowLayouts:Mt,overscanCols:t.overscanCols??5,overscanRows:t.overscanRows??5,overscanX:t.overscanX??600}),tt=(v,Y)=>{var j;(j=t.onDateChange)==null||j.call(t,v,Y)},ot=(v,Y)=>{var j;(j=t.onProgressChange)==null||j.call(t,v,Y)},dt=v=>{var Y;(Y=t.onResizeEnd)==null||Y.call(t,v)},et=(v,Y)=>{var j;nt(v),x(!0),(j=t.onTaskClick)==null||j.call(t,v,Y)},at=(v,Y,j)=>{a(v),J({x:Y,y:j}),O(!0)},A=()=>{O(!1),a(null)},P=()=>{x(!1),nt(null)},Tt=v=>{var ft;i(v),I(v.getContainerWidth()),h(v.getContainerHeight()),v.scrollLeftSignal&&v.scrollTopSignal?Dt(()=>{const vt=v.scrollLeftSignal(),mt=v.scrollTopSignal();ao(()=>{m(vt),b(mt)})}):(v.scrollLeftSignal&&Dt(()=>m(v.scrollLeftSignal())),v.scrollTopSignal&&Dt(()=>b(v.scrollTopSignal())));let Y=g(),j=l();if(Dt(()=>{const vt=l(),mt=g();(vt!==j||mt!==Y)&&(j=vt,Y=mt,u(!0),clearTimeout(c),c=setTimeout(()=>{u(!1)},150))}),v.containerWidthSignal&&Dt(()=>I(v.containerWidthSignal())),v.containerHeightSignal&&Dt(()=>h(v.containerHeightSignal())),((ft=t.options)==null?void 0:ft.scroll_to)==="today"){const vt=o.dateToX(new Date);v.scrollTo(vt-v.getContainerWidth()/4,!1)}};let Q=!1;Dt(()=>{var ft,vt;const v=e.tasks,Y=r(),j=Object.keys(v);if(!Q&&Y&&((ft=t.options)==null?void 0:ft.scroll_to)==="start"&&v&&j.length>0){const mt=v[j[0]];(vt=mt==null?void 0:mt.$bar)!=null&&vt.x&&(Y.scrollTo(Math.max(0,mt.$bar.x-50),!1),Q=!0)}});const ht=()=>{var v;return((v=t.options)==null?void 0:v.upper_header_height)||45},xt=()=>{var v;return((v=t.options)==null?void 0:v.lower_header_height)||30},ct=()=>{var v;return((v=t.options)==null?void 0:v.resource_column_width)||120};return X(()=>{var v,Y,j,ft;return{stroke:((v=t.options)==null?void 0:v.arrow_color)||"#666",curveRadius:((Y=t.options)==null?void 0:Y.arrow_curve)||5,headShape:((j=t.options)==null?void 0:j.arrow_head_shape)||"chevron",headSize:((ft=t.options)==null?void 0:ft.arrow_head_size)||5,...t.arrowConfig}}),yt(ro,{onDateChange:tt,onProgressChange:ot,onResizeEnd:dt,onTaskClick:et,onHover:at,onHoverEnd:A,get children(){return[yt(co,{ganttConfig:n,get svgWidth(){return ut()},get svgHeight(){return E()},get headerHeight(){return n.headerHeight()},get resourceColumnWidth(){return ct()},resourceHeaderLabel:"Resource",onContainerReady:Tt,get resourceColumn(){return yt(so,{resourceStore:s,ganttConfig:n,get width(){return ct()},get startRow(){return S.rowRange().start},get endRow(){return S.rowRange().end},get rowLayouts(){return pt()}})},get header(){return yt(oo,{get dateInfos(){return gt()},get columnWidth(){return o.columnWidth()},get gridWidth(){return ut()},get upperHeaderHeight(){return ht()},get lowerHeaderHeight(){return xt()},get startCol(){return S.colRange().start},get endCol(){return S.colRange().end}})},get barsLayer(){return pe(()=>t.taskLayerMode==="minimal")()?yt(bs,{taskStore:e,ganttConfig:n,resourceStore:s,get startRow(){return S.rowRange().start},get endRow(){return S.rowRange().end},get startX(){return S.xRange().start},get endX(){return S.xRange().end}}):yt(hs,{taskStore:e,ganttConfig:n,get relationships(){return y()},resourceStore:s,onDateChange:tt,onProgressChange:ot,onResizeEnd:dt,onTaskClick:et,onHover:at,onHoverEnd:A,get startRow(){return S.rowRange().start},get endRow(){return S.rowRange().end},get startX(){return S.xRange().start},get endX(){return S.xRange().end},get rowLayouts(){return pt()}})},get children(){return yt(no,{get width(){return ut()},get height(){return E()},get barHeight(){return n.barHeight()},get padding(){return n.padding()},get taskCount(){return N()||W()},get columnWidth(){return o.columnWidth()},get dateInfos(){return gt()},get lines(){var v;return((v=t.options)==null?void 0:v.lines)||"both"},get startRow(){return S.rowRange().start},get endRow(){return S.rowRange().end},resourceStore:s,get rowLayouts(){return pt()}})}}),yt(uo,{visible:D,position:w,task:M,barPosition:T}),yt(go,{visible:k,task:$,barPosition:B,relationships:U,onClose:P})]}})}function ps(){var _;let t=[],e=!1,n=null,o=null,s=0,r=!1;const i=typeof PerformanceObserver<"u"&&((_=PerformanceObserver.supportedEntryTypes)==null?void 0:_.includes("long-animation-frame"));function l(){n=new PerformanceObserver(u=>{var c;for(const y of u.getEntries())t.push({timestamp:y.startTime,duration:y.duration,blockingDuration:y.blockingDuration||0,scripts:((c=y.scripts)==null?void 0:c.map(p=>p.sourceURL||p.name))||[],source:"laf",renderStart:y.renderStart,styleAndLayoutStart:y.styleAndLayoutStart,firstUIEventTimestamp:y.firstUIEventTimestamp})}),n.observe({type:"long-animation-frame",buffered:!0}),r=!0}function m(){s=performance.now();function u(){if(!e)return;const c=performance.now(),y=c-s;y>4&&t.push({timestamp:s,duration:y,blockingDuration:y>16.67?y-16.67:0,scripts:[],source:"raf"}),s=c,o=requestAnimationFrame(u)}o=requestAnimationFrame(u),r=!1}function g(u={}){e||(t=[],e=!0,i&&!u.preferRAF?l():m())}function b(){e=!1,n&&(n.disconnect(),n=null),o&&(cancelAnimationFrame(o),o=null)}function f(){return[...t]}function I(){t=[]}function R(){if(t.length===0)return{frameCount:0,totalDuration:0,avgFrameTime:0,avgFPS:0,minFrameTime:0,maxFrameTime:0,worstFrame:null,droppedFrames:0,percentile95:0,percentile99:0,blockingTime:0,source:r?"laf":"raf"};const u=t.map(a=>a.duration).sort((a,w)=>a-w),c=u.reduce((a,w)=>a+w,0),y=t.reduce((a,w)=>a+w.blockingDuration,0),p=t.reduce((a,w)=>w.duration>a.duration?w:a,t[0]),H=t.filter(a=>a.duration>16.67).length,z=Math.floor(u.length*.95),F=Math.floor(u.length*.99);return{frameCount:t.length,totalDuration:c,avgFrameTime:c/t.length,avgFPS:1e3/(c/t.length),minFrameTime:u[0],maxFrameTime:u[u.length-1],worstFrame:{timestamp:p.timestamp,duration:p.duration,blockingDuration:p.blockingDuration,scripts:p.scripts},droppedFrames:H,droppedFramePercent:H/t.length*100,percentile95:u[z]||u[u.length-1],percentile99:u[F]||u[u.length-1],blockingTime:y,source:r?"laf":"raf"}}function h(u=100){if(t.length===0)return[];const c=[];let y=t[0].timestamp,p=[];for(const H of t){if(H.timestamp-y>=u){if(p.length>0){const F=p.reduce((a,w)=>a+w.duration,0)/p.length;c.push({time:y,fps:1e3/F,frameCount:p.length})}y=H.timestamp,p=[]}p.push(H)}if(p.length>0){const z=p.reduce((F,a)=>F+a.duration,0)/p.length;c.push({time:y,fps:1e3/z,frameCount:p.length})}return c}return{startTracking:g,stopTracking:b,getFrames:f,clear:I,analyze:R,getFPSTimeline:h,get isTracking(){return e},get hasLAF(){return i}}}const Ze=new Map;let Ce=[],ke=!1;function ws(){ke=!0,Ce=[];function t(){ke&&(performance.now(),requestAnimationFrame(t))}requestAnimationFrame(t)}function ks(){ke=!1}function Ss(){Ze.clear(),Ce=[]}function Ts(){return Array.from(Ze.values()).map(t=>({...t,minTime:t.minTime===1/0?0:t.minTime}))}function Cs(){const t=new Map;for(const n of Ce)t.has(n.frameId)||t.set(n.frameId,[]),t.get(n.frameId).push(n);const e=[];for(const[n,o]of t)if(o.length>1){const s=new Set(o.map(i=>i.name)),r=o.reduce((i,l)=>i+l.duration,0);e.push({frameId:n,memoCount:s.size,invocationCount:o.length,totalTime:r,memos:Array.from(s),invocations:o.sort((i,l)=>i.timestamp-l.timestamp)})}return e.sort((n,o)=>o.totalTime-n.totalTime)}function Ms(){const t=Ts(),e=Cs(),n=[],o=.1,s=1,r=100,i=5;for(const l of t){const m={name:l.name,status:"KEEP_MEMO",reason:"",metrics:{callCount:l.callCount,avgTime:l.avgTime.toFixed(3),totalTime:l.totalTime.toFixed(3)}};if(l.avgTime<o&&l.callCount<r)m.status="CONSIDER_PLAIN_FUNCTION",m.reason=`Avg time ${l.avgTime.toFixed(3)}ms is under ${o}ms threshold. Memo overhead may exceed computation cost.`;else if(l.avgTime>s&&l.callCount>r)m.status="OPTIMIZE_COMPUTATION",m.reason=`Called ${l.callCount} times with avg ${l.avgTime.toFixed(3)}ms. Total ${l.totalTime.toFixed(1)}ms spent in this memo.`;else{const g=e.filter(b=>b.memos.includes(l.name)).length;g>i&&(m.status="CHECK_REACTIVE_CASCADE",m.reason=`Involved in ${g} cascade events. May be triggering unnecessary reactive updates.`)}n.push(m)}return n.sort((l,m)=>{const g=parseFloat(l.metrics.totalTime);return parseFloat(m.metrics.totalTime)-g}),{summary:{memoCount:t.length,totalInvocations:t.reduce((l,m)=>l+m.callCount,0),totalTime:t.reduce((l,m)=>l+m.totalTime,0),cascadeEvents:e.length},recommendations:n,cascades:e.slice(0,10)}}function _s(t){const{frameAnalysis:e={},memoAnalysis:n={},config:o={},timeline:s=[]}=t;return{metadata:{version:"1.0.0",timestamp:new Date().toISOString(),browser:$s(),userAgent:(navigator==null?void 0:navigator.userAgent)||"unknown"},configuration:{taskCount:o.taskCount??0,arrowCount:o.arrowCount??0,viewMode:o.viewMode??"Day",viewportWidth:o.viewportWidth??(window==null?void 0:window.innerWidth)??0,viewportHeight:o.viewportHeight??(window==null?void 0:window.innerHeight)??0,arrowRenderer:o.arrowRenderer??"individual",testDuration:o.testDuration??0,testType:o.testType??"manual"},frameMetrics:{frameCount:e.frameCount??0,totalDuration:Ct(e.totalDuration),avgFrameTime:Ct(e.avgFrameTime),avgFPS:Ct(e.avgFPS),minFrameTime:Ct(e.minFrameTime),maxFrameTime:Ct(e.maxFrameTime),percentile95:Ct(e.percentile95),percentile99:Ct(e.percentile99),droppedFrames:e.droppedFrames??0,droppedFramePercent:Ct(e.droppedFramePercent),blockingTime:Ct(e.blockingTime),source:e.source??"unknown",worstFrame:e.worstFrame?{timestamp:Ct(e.worstFrame.timestamp),duration:Ct(e.worstFrame.duration),blockingDuration:Ct(e.worstFrame.blockingDuration),scripts:e.worstFrame.scripts||[]}:null},memoAnalysis:{summary:n.summary??{},recommendations:(n.recommendations||[]).slice(0,20),cascades:(n.cascades||[]).slice(0,10)},memory:Ps(),timeline:s.map(r=>({time:Ct(r.time),fps:Ct(r.fps),frameCount:r.frameCount}))}}function Ds(t,e={}){const{pretty:n=!0}=e;return JSON.stringify(t,null,n?2:0)}function Hs(t,e){const n=Ds(t),o=new Blob([n],{type:"application/json"}),s=URL.createObjectURL(o),r=new Date().toISOString().replace(/[:.]/g,"-"),i=e||`gantt-benchmark-${r}.json`,l=document.createElement("a");l.href=s,l.download=i,l.click(),URL.revokeObjectURL(s)}function Rs(t){var n,o,s,r;const e=[];if(e.push("=== Gantt Chart Performance Benchmark ==="),e.push(`Timestamp: ${t.metadata.timestamp}`),e.push(`Browser: ${t.metadata.browser}`),e.push(""),e.push("Configuration:"),e.push(`  Tasks: ${t.configuration.taskCount}`),e.push(`  Arrows: ${t.configuration.arrowCount}`),e.push(`  Arrow Renderer: ${t.configuration.arrowRenderer}`),e.push(`  Viewport: ${t.configuration.viewportWidth}x${t.configuration.viewportHeight}`),e.push(""),e.push("Frame Metrics:"),e.push(`  Average FPS: ${t.frameMetrics.avgFPS}`),e.push(`  Average Frame: ${t.frameMetrics.avgFrameTime}ms`),e.push(`  Worst Frame: ${t.frameMetrics.maxFrameTime}ms`),e.push(`  95th Percentile: ${t.frameMetrics.percentile95}ms`),e.push(`  Dropped Frames: ${t.frameMetrics.droppedFrames} (${t.frameMetrics.droppedFramePercent}%)`),e.push(`  Measurement Source: ${t.frameMetrics.source}`),e.push(""),(o=(n=t.memoAnalysis)==null?void 0:n.summary)!=null&&o.memoCount&&(e.push("Memo Analysis:"),e.push(`  Tracked Memos: ${t.memoAnalysis.summary.memoCount}`),e.push(`  Total Invocations: ${t.memoAnalysis.summary.totalInvocations}`),e.push(`  Total Time: ${Ct(t.memoAnalysis.summary.totalTime)}ms`),e.push(`  Cascade Events: ${t.memoAnalysis.summary.cascadeEvents}`),((s=t.memoAnalysis.recommendations)==null?void 0:s.length)>0)){e.push(""),e.push("Top Recommendations:");for(const i of t.memoAnalysis.recommendations.slice(0,5))e.push(`  [${i.status}] ${i.name}`),i.reason&&e.push(`    ${i.reason}`)}return(r=t.memory)!=null&&r.jsHeapSizeLimit&&(e.push(""),e.push("Memory:"),e.push(`  Used Heap: ${qe(t.memory.usedJSHeapSize)}`),e.push(`  Total Heap: ${qe(t.memory.totalJSHeapSize)}`)),e.join(`
`)}function Ct(t,e=2){return typeof t!="number"||isNaN(t)?0:Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function $s(){if(typeof navigator>"u")return"unknown";const t=navigator.userAgent;if(t.includes("Chrome")){const e=t.match(/Chrome\/(\d+)/);return`Chrome ${(e==null?void 0:e[1])||""}`}if(t.includes("Firefox")){const e=t.match(/Firefox\/(\d+)/);return`Firefox ${(e==null?void 0:e[1])||""}`}if(t.includes("Safari")&&!t.includes("Chrome")){const e=t.match(/Version\/(\d+)/);return`Safari ${(e==null?void 0:e[1])||""}`}return"unknown"}function Ps(){return typeof performance>"u"||!performance.memory?null:{jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize}}function qe(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,o)).toFixed(2))+" "+n[o]}var Fs=Pt('<div><div><h1 style=margin:0;font-size:20px>Performance Test</h1><div><div><span>Tasks:</span><span></span></div><div><span>Arrows:</span><span></span></div><div><span>Render:</span><span></span></div><div><span>FPS:</span><span></span></div><div><span>Worst:</span><span>ms</span></div><div><span>Avg:</span><span>ms</span></div><div><span>Scroll/s:</span><span></span></div><div><span>Heap:</span><span></span></div></div><div><label style=font-size:13px>View:<select style=width:100px;margin-left:5px><option value=Hour>Hour</option><option value=Day>Day</option><option value=Week>Week</option><option value=Month>Month</option></select></label><button>Reload</button><button></button><button></button><span style="color:#9ca3af;margin:0 5px">|</span><button></button><button>Export JSON</button><label style=font-size:13px>Arrows:<select style=width:100px;margin-left:5px><option value=individual>Individual</option><option value=batched>Batched</option></select></label><label style=font-size:13px>Mode:<select style=width:100px;margin-left:5px><option value=simple>Simple</option><option value=detailed>Detailed</option></select></label><label style=font-size:13px>TaskLayer:<select style=width:100px;margin-left:5px><option value=full>Full</option><option value=minimal>Minimal (V7j)</option></select></label></div><div style=display:flex;gap:15px;align-items:center;font-size:12px;color:#6b7280><span style=font-weight:bold>Buffers:</span><label style=display:flex;align-items:center;gap:4px>Rows:<input type=range min=1 max=30 style=width:60px><span style=min-width:20px></span></label><label style=display:flex;align-items:center;gap:4px>X:<input type=range min=200 max=3000 step=100 style=width:60px><span style=min-width:45px>px</span></label><label style=display:flex;align-items:center;gap:4px>Cols:<input type=range min=1 max=30 style=width:60px><span style=min-width:20px></span></label></div></div><div>');function Is(){const[t,e]=L([]),[n,o]=L(null),[s,r]=L({tasks:0,arrows:0}),[i,l]=L("Hour"),[m,g]=L(0),[b,f]=L(0),[I,R]=L(0),[h,_]=L(!1),[u,c]=L(!1),[y,p]=L(0),[H,z]=L(5),[F,a]=L(600),[w,J]=L(5),[D,O]=L(null),[K,nt]=L(!1),[k,x]=L(null),[M,T]=L("batched"),[$,B]=L("simple"),[U,V]=L("full");let q=null,rt=performance.now(),W=[],N=0,ut=performance.now(),gt=0,wt=performance.now();const[,pt]=fo(Q=>{gt++;const ht=Q-rt;rt=Q,W.push(ht),W.length>60&&W.shift();const xt=Q-wt;if(xt>=1e3){if(g(Math.round(gt*1e3/xt)),gt=0,wt=Q,W.length>0){const bt=Math.max(...W),v=W.reduce((Y,j)=>Y+j,0)/W.length;f(bt.toFixed(1)),R(v.toFixed(1))}const ct=Q-ut;ct>=1e3&&(p(Math.round(N*1e3/ct)),N=0,ut=Q),performance.memory&&O((performance.memory.usedJSHeapSize/1048576).toFixed(1))}});let Mt=null;const d=()=>{if(h()){Mt&&(Mt.abort=!0),_(!1);return}const Q=document.querySelector(".gantt-scroll-area");if(!Q)return;_(!0),W=[],f(0);const ht={abort:!1};Mt=ht;const xt=3e4,ct=performance.now();let bt=1,v=Q.scrollLeft;const Y=()=>{if(ht.abort||performance.now()-ct>xt){_(!1),console.log("H-Scroll test complete:",{worst:b(),avg:I()});return}const j=bt*200;v+=j,v>Q.scrollWidth-Q.clientWidth-500?bt=-1:v<500&&(bt=1),Q.scrollLeft=v,requestAnimationFrame(Y)};requestAnimationFrame(Y)};let E=null;const S=()=>{if(u()){E&&(E.abort=!0),c(!1);return}const Q=document.querySelector(".gantt-scroll-area");if(!Q)return;c(!0),W=[],f(0);const ht={abort:!1};E=ht;const xt=3e4,ct=performance.now();let bt=1,v=Q.scrollTop;const Y=()=>{if(ht.abort||performance.now()-ct>xt){c(!1),console.log("V-Scroll test complete:",{worst:b(),avg:I()});return}const j=bt*100;v+=j,v>Q.scrollHeight-Q.clientHeight-200?bt=-1:v<200&&(bt=1),Q.scrollTop=v,requestAnimationFrame(Y)};requestAnimationFrame(Y)},tt=()=>{if(K()){ot();return}q=ps(),Ss(),ws(),q.startTracking(),nt(!0),W=[],console.log("Benchmark started - scroll or interact, then click Stop")},ot=()=>{if(!K())return;q==null||q.stopTracking(),ks(),nt(!1);const Q=(q==null?void 0:q.analyze())||{},ht=Ms(),xt=(q==null?void 0:q.getFPSTimeline(100))||[],ct=_s({frameAnalysis:Q,memoAnalysis:ht,timeline:xt,config:{taskCount:s().tasks,arrowCount:s().arrows,viewMode:i(),arrowRenderer:M(),viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,testType:"manual"}});x(ct),console.log("Benchmark complete:",Rs(ct))},dt=()=>{const Q=k();Q?Hs(Q):console.warn("No benchmark results to export. Run a benchmark first.")};xe(()=>{const Q=document.querySelector(".gantt-scroll-area");if(Q){const ct=()=>N++;Q.addEventListener("scroll",ct,{passive:!0}),ve(()=>Q.removeEventListener("scroll",ct))}let ht=0;const xt=setInterval(()=>{if(h()||u()){const ct=performance.now();ct-ht>2e3&&(ht=ct,console.log("[PERF]",{fps:m(),avgFrame:I()+"ms",worstFrame:b()+"ms",scrollEvents:y()+"/sec",heap:D()+"MB"}))}},500);ve(()=>clearInterval(xt))});const et=X(()=>({view_mode:i(),renderMode:$(),bar_height:20,padding:8,column_width:i()==="Hour"?25:30,upper_header_height:35,lower_header_height:25,headerHeight:60,lines:"both",scroll_to:"start"})),at=()=>{const Q=performance.now();e(io.tasks),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{o((performance.now()-Q).toFixed(1)),r({tasks:document.querySelectorAll(".bar-wrapper").length,arrows:document.querySelectorAll(".arrow-layer > g").length})},0)})})};xe(()=>{at(),pt()});const A={container:{"max-width":"100%",height:"100vh",margin:0,padding:"10px",display:"flex","flex-direction":"column","box-sizing":"border-box",overflow:"hidden","font-family":'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},header:{"margin-bottom":"10px",display:"flex","align-items":"center",gap:"20px","flex-wrap":"wrap"},stats:{display:"flex",gap:"15px",padding:"10px 15px","background-color":"#1f2937",color:"#fff","border-radius":"6px","font-size":"13px","font-family":"monospace"},statItem:{display:"flex",gap:"5px"},statLabel:{color:"#9ca3af"},statValue:{color:"#10b981","font-weight":"bold"},controls:{display:"flex",gap:"10px","align-items":"center"},select:{padding:"6px 10px",border:"1px solid #d1d5db","border-radius":"4px","font-size":"13px",cursor:"pointer"},button:{padding:"6px 12px","background-color":"#3b82f6",color:"#fff",border:"none","border-radius":"4px",cursor:"pointer","font-size":"13px"},ganttWrapper:{border:"1px solid #e0e0e0","border-radius":"8px",overflow:"hidden","background-color":"#fff",flex:1,"min-height":0}},P=()=>m()>=55?"#10b981":m()>=30?"#f59e0b":"#ef4444",Tt=Q=>Q<=16.67?"#10b981":Q<=33?"#f59e0b":"#ef4444";return(()=>{var Q=Fs(),ht=Q.firstChild,xt=ht.firstChild,ct=xt.nextSibling,bt=ct.firstChild,v=bt.firstChild,Y=v.nextSibling,j=bt.nextSibling,ft=j.firstChild,vt=ft.nextSibling,mt=j.nextSibling,Ht=mt.firstChild,Ft=Ht.nextSibling,Rt=mt.nextSibling,It=Rt.firstChild,kt=It.nextSibling,Et=Rt.nextSibling,qt=Et.firstChild,At=qt.nextSibling,Kt=At.firstChild,Lt=Et.nextSibling,Vt=Lt.firstChild,Bt=Vt.nextSibling,Qt=Bt.firstChild,Wt=Lt.nextSibling,jt=Wt.firstChild,Ut=jt.nextSibling,Gt=Wt.nextSibling,Nt=Gt.firstChild,Me=Nt.nextSibling,ae=ct.nextSibling,_e=ae.firstChild,tn=_e.firstChild,ie=tn.nextSibling,le=_e.nextSibling,Zt=le.nextSibling,te=Zt.nextSibling,en=te.nextSibling,ee=en.nextSibling,ne=ee.nextSibling,De=ne.nextSibling,nn=De.firstChild,ce=nn.nextSibling,He=De.nextSibling,on=He.firstChild,de=on.nextSibling,sn=He.nextSibling,rn=sn.firstChild,ue=rn.nextSibling,an=ae.nextSibling,ln=an.firstChild,Re=ln.nextSibling,cn=Re.firstChild,ge=cn.nextSibling,dn=ge.nextSibling,$e=Re.nextSibling,un=$e.firstChild,fe=un.nextSibling,Pe=fe.nextSibling,gn=Pe.firstChild,fn=$e.nextSibling,hn=fn.firstChild,he=hn.nextSibling,mn=he.nextSibling,Fe=ht.nextSibling;return lt(Y,()=>s().tasks),lt(vt,()=>s().arrows),lt(Ft,(()=>{var C=pe(()=>!!n());return()=>C()?`${n()}ms`:"..."})()),lt(kt,m),lt(At,b,Kt),lt(Bt,I,Qt),lt(Ut,y),lt(Me,(()=>{var C=pe(()=>!!D());return()=>C()?`${D()}MB`:"N/A"})()),ie.addEventListener("change",C=>l(C.target.value)),le.$$click=at,Zt.$$click=d,lt(Zt,()=>h()?"Stop":"H-Scroll"),te.$$click=S,lt(te,()=>u()?"Stop":"V-Scroll"),ee.$$click=tt,lt(ee,()=>K()?"Stop Bench":"Benchmark"),ne.$$click=dt,ce.addEventListener("change",C=>T(C.target.value)),de.addEventListener("change",C=>B(C.target.value)),ue.addEventListener("change",C=>V(C.target.value)),ge.$$input=C=>z(+C.target.value),lt(dn,H),fe.$$input=C=>a(+C.target.value),lt(Pe,F,gn),he.$$input=C=>J(+C.target.value),lt(mn,w),lt(Fe,yt(xs,{get tasks(){return t()},get options(){return et()},get overscanRows(){return H()},get overscanX(){return F()},get overscanCols(){return w()},get arrowRenderer(){return M()},get taskLayerMode(){return U()},onDateChange:(C,Ot)=>console.log("Date changed:",C,Ot),onProgressChange:(C,Ot)=>console.log("Progress changed:",C,Ot),onTaskClick:C=>console.log("Task clicked:",C)})),St(C=>{var Ot=A.container,vn=A.header,yn=A.stats,bn=A.statItem,xn=A.statLabel,pn=A.statValue,wn=A.statItem,kn=A.statLabel,Sn=A.statValue,Tn=A.statItem,Cn=A.statLabel,Mn=A.statValue,_n=A.statItem,Dn=A.statLabel,Hn={...A.statValue,color:P()},Rn=A.statItem,$n=A.statLabel,Pn={...A.statValue,color:Tt(b())},Fn=A.statItem,In=A.statLabel,En={...A.statValue,color:Tt(I())},An=A.statItem,Ln=A.statLabel,Bn=A.statValue,Wn=A.statItem,Yn=A.statLabel,zn=A.statValue,Xn=A.controls,qn={...A.select},Vn=A.button,jn={...A.button,"background-color":h()?"#ef4444":"#8b5cf6"},Un={...A.button,"background-color":u()?"#ef4444":"#8b5cf6"},Gn={...A.button,"background-color":K()?"#ef4444":"#059669"},Nn={...A.button,"background-color":k()?"#0891b2":"#6b7280"},Ie=!k(),On={...A.select},Jn={...A.select},Kn={...A.select},Qn=A.ganttWrapper;return C.e=st(Q,Ot,C.e),C.t=st(ht,vn,C.t),C.a=st(ct,yn,C.a),C.o=st(bt,bn,C.o),C.i=st(v,xn,C.i),C.n=st(Y,pn,C.n),C.s=st(j,wn,C.s),C.h=st(ft,kn,C.h),C.r=st(vt,Sn,C.r),C.d=st(mt,Tn,C.d),C.l=st(Ht,Cn,C.l),C.u=st(Ft,Mn,C.u),C.c=st(Rt,_n,C.c),C.w=st(It,Dn,C.w),C.m=st(kt,Hn,C.m),C.f=st(Et,Rn,C.f),C.y=st(qt,$n,C.y),C.g=st(At,Pn,C.g),C.p=st(Lt,Fn,C.p),C.b=st(Vt,In,C.b),C.T=st(Bt,En,C.T),C.A=st(Wt,An,C.A),C.O=st(jt,Ln,C.O),C.I=st(Ut,Bn,C.I),C.S=st(Gt,Wn,C.S),C.W=st(Nt,Yn,C.W),C.C=st(Me,zn,C.C),C.B=st(ae,Xn,C.B),C.v=st(ie,qn,C.v),C.k=st(le,Vn,C.k),C.x=st(Zt,jn,C.x),C.j=st(te,Un,C.j),C.q=st(ee,Gn,C.q),C.z=st(ne,Nn,C.z),Ie!==C.P&&(ne.disabled=C.P=Ie),C.H=st(ce,On,C.H),C.F=st(de,Jn,C.F),C.M=st(ue,Kn,C.M),C.D=st(Fe,Qn,C.D),C},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0,H:void 0,F:void 0,M:void 0,D:void 0}),St(()=>ie.value=i()),St(()=>ce.value=M()),St(()=>de.value=$()),St(()=>ue.value=U()),St(()=>ge.value=H()),St(()=>fe.value=F()),St(()=>he.value=w()),Q})()}Se(["click","input"]);lo(()=>yt(Is,{}),document.getElementById("app"));
