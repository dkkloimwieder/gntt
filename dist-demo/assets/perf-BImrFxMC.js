import{c as B,o as ht,a as Gn,r as Ft,p as Et,d as Z,b as X,u as Nn,e as Xt,f as De,t as $e,i as le,g as Ce,h as mt,s as ie,j as O,k as It,l as wt,m as ye,S as On,F as qt,n as Pe,I as vt,q as yt,G as Jn,v as bt,D as Kn,R as Qn,w as Zn,x as eo,y as se,z as to,A as no}from"./calendar-DFJjUJ4H.js";import{d as oo,T as so,a as ro}from"./TaskDataModal-C9uSWs71.js";import{G as ao}from"./GanttContainer-BN_Omoqz.js";function io(e){const[t,n]=B(!1);let o=0;const s=u=>{o=requestAnimationFrame(s),e(u)},a=()=>{t()||(n(!0),o=requestAnimationFrame(s))},l=()=>{n(!1),cancelAnimationFrame(o)};return ht(l),[t,a,l]}function lo(){const[e,t]=Gn({}),[n,o]=B(new Set),[s,a]=B(null);return{tasks:e,getTask:R=>e[R],getBarPosition:R=>{const r=e[R];return!r||!r.$bar?null:{x:r.$bar.x,y:r.$bar.y,width:r.$bar.width,height:r.$bar.height,index:r._index}},getAllTasks:()=>Object.values(e),taskCount:()=>Object.keys(e).length,updateTask:(R,r)=>{t(R,r)},updateBarPosition:(R,r)=>{e[R]&&t(Et(w=>{w[R]&&(w[R].$bar={...w[R].$bar,...r})}))},updateTasks:R=>{const r={};R.forEach(w=>{r[w.id]=w}),t(Ft(r))},batchMovePositions:(R,r)=>{t(Et(w=>{var Y;for(const[T,{originalX:j}]of R)(Y=w[T])!=null&&Y.$bar&&(w[T].$bar.x=j+r)}))},removeTask:R=>{t(R,void 0)},clear:()=>{t(Ft({}))},collapsedTasks:n,toggleTaskCollapse:R=>{o(r=>{const w=new Set(r);return w.has(R)?w.delete(R):w.add(R),w})},isTaskCollapsed:R=>n().has(R),expandTask:R=>{o(r=>{if(!r.has(R))return r;const w=new Set(r);return w.delete(R),w})},collapseTask:R=>{o(r=>{if(r.has(R))return r;const w=new Set(r);return w.add(R),w})},expandAllTasks:()=>{o(new Set)},collapseAllTasks:()=>{const R=[];for(const r of Object.values(e))(r.type==="summary"||r._children&&r._children.length>0)&&R.push(r.id);o(new Set(R))},draggingTaskId:s,setDraggingTaskId:a}}function co(e={}){const[t,n]=B(e.ganttStart||new Date),[o,s]=B(e.ganttEnd||new Date),[a,l]=B(e.unit||"day"),[u,b]=B(e.step||1),[f,k]=B(e.columnWidth||e.column_width||45),[h,E]=B(e.barHeight||e.bar_height||30),[I,v]=B(e.headerHeight||75),[x,c]=B(e.padding||18),[i,g]=B(e.barCornerRadius||e.bar_corner_radius||3),[y,H]=B(e.readonly||!1),[q,R]=B(e.readonlyDates||!1),[r,w]=B(e.readonlyProgress||!1),[Y,T]=B(e.showExpectedProgress||!1),[j,K]=B(e.autoMoveLabel||!1),[ne,S]=B(e.ignoredDates||[]),[p,D]=B(e.ignoredFunction||null),[M,P]=B([]),[L,N]=B(e.subtaskHeightRatio||.5),[U,V]=B(e.renderMode||"simple"),[re,W]=B(new Set(e.expandedTasks||[]));return{ganttStart:t,ganttEnd:o,unit:a,step:u,columnWidth:f,barHeight:h,headerHeight:I,padding:x,barCornerRadius:i,readonly:y,readonlyDates:q,readonlyProgress:r,showExpectedProgress:Y,autoMoveLabel:j,ignoredDates:ne,ignoredFunction:p,ignoredPositions:M,subtaskHeightRatio:L,renderMode:U,expandedTasks:re,setGanttStart:n,setGanttEnd:s,setUnit:l,setStep:b,setColumnWidth:k,setBarHeight:E,setHeaderHeight:v,setPadding:c,setBarCornerRadius:g,setReadonly:H,setReadonlyDates:R,setReadonlyProgress:w,setShowExpectedProgress:T,setAutoMoveLabel:K,setIgnoredDates:S,setIgnoredFunction:D,setIgnoredPositions:P,setSubtaskHeightRatio:N,setRenderMode:V,setExpandedTasks:W,isTaskExpanded:C=>re().has(C),toggleTaskExpansion:C=>{W(ee=>{const oe=new Set(ee);return oe.has(C)?oe.delete(C):oe.add(C),oe})},expandTask:C=>{W(ee=>{if(ee.has(C))return ee;const oe=new Set(ee);return oe.add(C),oe})},collapseTask:C=>{W(ee=>{if(!ee.has(C))return ee;const oe=new Set(ee);return oe.delete(C),oe})},expandAllTasks:C=>{W(new Set(C))},collapseAllTasks:()=>{W(new Set)},updateOptions:C=>{C.ganttStart!==void 0&&n(C.ganttStart),C.ganttEnd!==void 0&&s(C.ganttEnd),C.unit!==void 0&&l(C.unit),C.step!==void 0&&b(C.step),C.columnWidth!==void 0&&k(C.columnWidth),C.barHeight!==void 0&&E(C.barHeight),C.headerHeight!==void 0&&v(C.headerHeight),C.padding!==void 0&&c(C.padding),C.barCornerRadius!==void 0&&g(C.barCornerRadius),C.readonly!==void 0&&H(C.readonly),C.readonlyDates!==void 0&&R(C.readonlyDates),C.readonlyProgress!==void 0&&w(C.readonlyProgress),C.showExpectedProgress!==void 0&&T(C.showExpectedProgress),C.autoMoveLabel!==void 0&&K(C.autoMoveLabel),C.ignoredDates!==void 0&&S(C.ignoredDates),C.ignoredFunction!==void 0&&D(C.ignoredFunction),C.ignoredPositions!==void 0&&P(C.ignoredPositions),C.subtaskHeightRatio!==void 0&&N(C.subtaskHeightRatio),C.renderMode!==void 0&&V(C.renderMode),C.expandedTasks!==void 0&&W(new Set(C.expandedTasks))},getConfig:()=>({ganttStart:t(),ganttEnd:o(),unit:a(),step:u(),columnWidth:f(),barHeight:h(),headerHeight:I(),padding:x(),barCornerRadius:i(),readonly:y(),readonlyDates:q(),readonlyProgress:r(),showExpectedProgress:Y(),autoMoveLabel:j(),ignoredDates:ne(),ignoredFunction:p(),ignoredPositions:M(),subtaskHeightRatio:L(),renderMode:U(),expandedTasks:re()})}}function gt(e){const t=e.getFullYear();return t-t%10+""}function uo(e,t,n){let o=Z.add(e,6,"day"),s=o.getMonth()!==e.getMonth()?"D MMM":"D",a=!t||e.getMonth()!==t.getMonth()?"D MMM":"D";return`${Z.format(e,a,n)} - ${Z.format(o,s,n)}`}const et=[{name:"Minute",padding:"1h",step:"1min",column_width:20,date_format:"YYYY-MM-DD HH:mm",lower_text:"mm",upper_text:(e,t,n)=>!t||e.getHours()!==t.getHours()?Z.format(e,"D MMM HH:00",n):"",upper_text_frequency:60},{name:"Quarter Hour",padding:"6h",step:"15min",column_width:30,date_format:"YYYY-MM-DD HH:mm",lower_text:"mm",upper_text:(e,t,n)=>!t||e.getHours()!==t.getHours()?Z.format(e,"D MMM HH:00",n):"",upper_text_frequency:4},{name:"Hour",padding:"7d",step:"1h",date_format:"YYYY-MM-DD HH:",lower_text:"HH",upper_text:(e,t,n)=>!t||e.getDate()!==t.getDate()?Z.format(e,"D MMMM",n):"",upper_text_frequency:24},{name:"Quarter Day",padding:"7d",step:"6h",date_format:"YYYY-MM-DD HH:",lower_text:"HH",upper_text:(e,t,n)=>!t||e.getDate()!==t.getDate()?Z.format(e,"D MMM",n):"",upper_text_frequency:4},{name:"Half Day",padding:"14d",step:"12h",date_format:"YYYY-MM-DD HH:",lower_text:"HH",upper_text:(e,t,n)=>!t||e.getDate()!==t.getDate()?e.getMonth()!==e.getMonth()?Z.format(e,"D MMM",n):Z.format(e,"D",n):"",upper_text_frequency:2},{name:"Day",padding:"7d",date_format:"YYYY-MM-DD",step:"1d",lower_text:(e,t,n)=>!t||e.getDate()!==t.getDate()?Z.format(e,"D",n):"",upper_text:(e,t,n)=>!t||e.getMonth()!==t.getMonth()?Z.format(e,"MMMM",n):"",thick_line:e=>e.getDay()===1},{name:"Week",padding:"1m",step:"7d",date_format:"YYYY-MM-DD",column_width:140,lower_text:uo,upper_text:(e,t,n)=>!t||e.getMonth()!==t.getMonth()?Z.format(e,"MMMM",n):"",thick_line:e=>e.getDate()>=1&&e.getDate()<=7,upper_text_frequency:4},{name:"Month",padding:"2m",step:"1m",column_width:120,date_format:"YYYY-MM",lower_text:"MMMM",upper_text:(e,t,n)=>!t||e.getFullYear()!==t.getFullYear()?Z.format(e,"YYYY",n):"",thick_line:e=>e.getMonth()%3===0,snap_at:"7d"},{name:"Year",padding:"2y",step:"1y",column_width:120,date_format:"YYYY",upper_text:(e,t,n)=>!t||gt(e)!==gt(t)?gt(e):"",lower_text:"YYYY",snap_at:"30d"}];function go(e={}){const[t,n]=B(e.ganttStart||new Date),[o,s]=B(e.ganttEnd||new Date),[a,l]=B([]),u=et.find(S=>S.name==="Day")||et[3],b=e.viewMode||e.view_mode,f=b&&et.find(S=>S.name===b)||u,[k,h]=B(f),[E]=B(e.viewModes||et),[I,v]=B(e.language||"en"),x=X(()=>a().length),c=X(()=>{const S=k();return Z.parse_duration(S.step)}),i=X(()=>c().scale),g=X(()=>c().duration),[y]=B(e.columnWidth||e.column_width||null),H=X(()=>y()||k().column_width||45),q=X(()=>x()*H()),R=(S,p=!1)=>{if(!S||S.length===0){const W=Z.today(),J=k(),{duration:ue,scale:ge}=Z.parse_duration(J.padding||"7d"),ke=Z.add(W,-ue,ge),pe=Z.add(W,ue,ge);n(Z.start_of(ke,i())),s(pe),r();return}let D=null,M=null;for(const W of S){const J=W._start||Z.parse(W.start),ue=W._end||Z.parse(W.end);(!D||J<D)&&(D=J),(!M||ue>M)&&(M=ue)}const P=k(),{duration:L,scale:N}=Z.parse_duration(P.padding||"7d");let U=Z.add(D,-L,N),V=Z.add(M,L,N);p&&(U=Z.add(U,-30,i()),V=Z.add(V,30,i())),U=Z.start_of(U,i());const re=i();re!=="hour"&&re!=="minute"&&U.setHours(0,0,0,0),n(U),s(V),r()},r=()=>{const S=t(),p=o(),D=g(),M=i(),P=[];let L=new Date(S);for(;L<p;)P.push(new Date(L)),L=Z.add(L,D,M);l(P)},w=(S,p=10)=>{const D=g(),M=i();if(S==="left"){const P=Z.add(t(),-p*D,M);n(P)}else{const P=Z.add(o(),p*D,M);s(P)}r()},Y=S=>{if(typeof S=="string"){const p=E().find(D=>D.name===S);p&&(h(p),r())}else S&&S.name&&(h(S),r())},T=(S,p,D=null)=>{const M=k(),P=I(),L=H(),N=p*L;let U="";typeof M.lower_text=="function"?U=M.lower_text(S,D,P):typeof M.lower_text=="string"&&(U=Z.format(S,M.lower_text,P));let V="";typeof M.upper_text=="function"?V=M.upper_text(S,D,P):typeof M.upper_text=="string"&&(V=Z.format(S,M.upper_text,P));const re=M.thick_line?M.thick_line(S):!1;return{date:S,x:N,width:L,lowerText:U,upperText:V,isThickLine:re}},j=X(()=>{const S=a(),p=[];let D=null;for(let M=0;M<S.length;M++){const P=T(S[M],M,D);p.push(P),D=S[M]}return p});return{ganttStart:t,ganttEnd:o,dates:a,viewMode:k,viewModes:E,language:I,setGanttStart:n,setGanttEnd:s,setViewMode:Y,setLanguage:v,dateCount:x,unit:i,step:g,columnWidth:H,gridWidth:q,getAllDateInfos:j,setupDates:R,generateDates:r,extendTimeline:w,changeViewMode:Y,getDateInfo:T,dateToX:S=>{const p=t(),D=g(),M=i(),P=H();return Z.diff(S,p,M)/D*P},xToDate:S=>{const p=t(),D=g(),M=i(),P=H(),L=S/P*D;return Z.add(p,L,M)}}}function At(e){return!e||e.length===0?[]:e.map(t=>typeof t=="object"&&t!==null?{...t,id:t.id||t.name||String(t),type:t.type||"resource",group:t.group||null}:{id:String(t),type:"resource",group:null})}function fo(e,t){const n=[];for(const o of e){if(o.type==="group"){n.push({...o,displayIndex:n.length,isCollapsed:t.has(o.id)});continue}o.group&&t.has(o.group)||n.push({...o,displayIndex:n.length})}return n}function ho(e){if(!e||e.length===0)return[];const t=new Set,n=[];for(const o of e){const s=o.resource||"Unassigned";t.has(s)||(t.add(s),n.push({id:s,type:"resource",group:null}))}return n}function mo(e=[]){const[t,n]=B(At(e)),[o,s]=B(new Set),a=X(()=>fo(t(),o())),l=X(()=>{const c=new Map,i=a();for(let g=0;g<i.length;g++)c.set(i[g].id,g);return c}),u=X(()=>a().length),b=c=>{s(i=>{const g=new Set(i);return g.has(c)?g.delete(c):g.add(c),g})},f=c=>{s(i=>{const g=new Set(i);return g.delete(c),g})},k=c=>{s(i=>{const g=new Set(i);return g.add(c),g})},h=c=>o().has(c),E=c=>{n(At(c))},I=X(()=>t().filter(c=>c.type==="group"));return{resources:t,collapsedGroups:o,displayResources:a,resourceIndexMap:l,displayCount:u,getGroups:I,updateResources:E,toggleGroup:b,expandGroup:f,collapseGroup:k,isGroupCollapsed:h,expandAll:()=>{s(new Set)},collapseAll:()=>{const c=I();s(new Set(c.map(i=>i.id)))}}}function vo(e,t,n,o,s){return Z.diff(e,t,n)/o*s}function yo(e,t,n){const o=t+n;return e*o+n/2}function bo(e,t,n,o,s){return Z.diff(t,e,n)/o*s}function Bt(e,t,n,o=[],s=45){const a=e+t,l=new Set(o.map(I=>Math.floor(I/s))),b=o.reduce((I,v)=>I+(v>=e&&v<a?1:0),0)*s;let f=(t-b)*n/100;const k=e+f,h=o.reduce((I,v)=>I+(v>=e&&v<k?1:0),0);f+=h*s;let E=e+f;for(;E<a;){const I=Math.floor(E/s);if(l.has(I))f+=s,E=e+f;else break}return Math.min(f,t)}function xo(e,t,n,o){const s=Z.today(),a=Z.diff(t,e,"hour")/o,l=Z.diff(s,e,"hour")/o,u=Math.min(l,a);return a>0?u*100/a:0}function po(e,t,n){return t.some(o=>e>=o&&e<o+n)}function xt(e,t,n=[]){let o=Math.round(e/t)*t;for(;po(o,n,t);)o+=t;return o}function Vt(e,t,n,o=7){return n.length*o+10<t?{x:e+t/2,position:"inside"}:{x:e+t+5,position:"outside"}}function wo(e,t,n=20){if(!e._children||e._children.length===0)return null;const o=t.get?f=>t.get(f):f=>t[f],s=[],a=f=>{for(const k of f){const h=o(k);h!=null&&h.$bar&&(s.push(h.$bar),h._children&&h._children.length>0&&a(h._children))}};if(a(e._children),s.length===0)return null;const l=Math.min(...s.map(f=>f.x)),u=Math.max(...s.map(f=>f.x+f.width)),b=Math.max(u-l,n);return{x:l,width:b}}function ko(e){let t=0;for(const n of e.values())n._depth>t&&(t=n._depth);for(let n=t;n>=0;n--)for(const o of e.values())if(o._depth===n&&o.type==="summary"){const s=wo(o,e);s&&o.$bar&&(o.$bar.x=s.x,o.$bar.width=s.width)}}function So(e,t){return`task-${e.name||""}-${t}-${Date.now()}`.replace(/\s+/g,"-")}function Co(e){return e?Array.isArray(e)?e.filter(t=>t&&typeof t=="object").map(t=>({id:t.id,type:t.type||"FS",lag:t.lag||0,max:t.max})):(console.warn("parseDependencies: dependencies must be an array, got:",typeof e,e),[]):[]}function To(e,t){const n={...e};if(n.id||(n.id=So(e,t)),n._start=Z.parse(e.start),e.end)n._end=Z.parse(e.end);else if(e.duration){const{duration:s,scale:a}=Z.parse_duration(e.duration);n._end=Z.add(n._start,s,a)}else n._end=new Date(n._start);return Z.diff(n._end,n._start,"year")>10?(console.error(`Task "${n.name}" has duration > 10 years`),null):(n._end<n._start&&(console.warn(`Task "${n.name}" has end before start, swapping`),[n._start,n._end]=[n._end,n._start]),n.dependencies=Co(e.dependencies),n._index=t,typeof n.progress!="number"&&(n.progress=0),n.progress=Math.max(0,Math.min(100,n.progress)),n.constraints={locked:!1,...e.constraints},e.parentId!==void 0&&(n.parentId=e.parentId),e.type!==void 0&&(n.type=e.type),n._children=[],n._depth=0,n)}function Mo(e,t,n=null){const o=[],s=[];for(let f=0;f<e.length;f++){const k=To(e[f],f);k&&o.push(k)}const a=new Set,l=[];for(const f of o){const k=f.resource||"Unassigned";a.has(k)||(a.add(k),l.push(k))}let u;n?u=n:(u=new Map,l.forEach((f,k)=>u.set(f,k)));for(const f of o){const k=f.resource||"Unassigned",h=u.get(k),E=h!==void 0?h:-1,I=E<0,v=vo(f._start,t.ganttStart,t.unit,t.step,t.columnWidth),x=I?-1e3:yo(E,t.barHeight,t.padding),c=bo(f._start,f._end,t.unit,t.step,t.columnWidth);f.$bar={x:v,y:x,width:c,height:t.barHeight},f._resourceIndex=E,f._isHidden=I;for(const i of f.dependencies)o.find(y=>y.id===i.id)&&s.push({from:i.id,to:f.id,type:i.type||"FS",lag:i.lag||0,elastic:!0})}const b=oo(s);return b.hasCycle&&console.warn(`Circular dependency detected: ${b.cycle.join(" â†’ ")}`,`
This may cause unexpected behavior during task dragging.`),{tasks:o,relationships:s,resources:l}}function _o(e){let t=null,n=null;for(const o of e){const s=o._start,a=o._end;(!t||s<t)&&(t=s),(!n||a>n)&&(n=a)}return{minDate:t||new Date,maxDate:n||new Date}}function Do(e){return e?e.entries?Array.from(e.entries()):Object.entries(e):[]}function jt(e,t){return e?e.get?e.get(t):e[t]:null}function Ho(e,t,n,o){var h,E,I,v;const{barHeight:s=30,padding:a=18,subtaskHeightRatio:l=.5}=t,u=s+a,b=new Map;let f=0;const k=new Map;for(const[x,c]of Do(o))c.resource&&(k.has(c.resource)||k.set(c.resource,[]),k.get(c.resource).push(c));for(const x of e){let c=[];const i=k.get(x.id)||[];for(const T of i)T.parentId||T.type!=="project"&&n!=null&&n.has(T.id)&&((h=T._children)==null?void 0:h.length)>0&&c.push(T);if(c.length>0){let T=0;for(const j of c)T+=Lt(j,t,o);i.filter(j=>!j.parentId&&j.type!=="project"&&!(n!=null&&n.has(j.id))).length}const g=new Map,y=f+a/2,H=[...i].filter(T=>!T.parentId).sort((T,j)=>T.type==="project"&&j.type!=="project"?-1:j.type==="project"&&T.type!=="project"?1:(T._start||0)-(j._start||0)),q=[],R=(T,j)=>{var S,p,D;const K=T._start??((S=T.$bar)==null?void 0:S.x)??0,ne=T._end??((p=T.$bar)==null?void 0:p.x)+((D=T.$bar)==null?void 0:D.width)??K+1;for(const M of j.occupiedRanges)if(!(ne<=M.start||K>=M.end))return!0;return!1},r=(T,j)=>{var p,D,M;const K=T._start??((p=T.$bar)==null?void 0:p.x)??0,ne=T._end??((D=T.$bar)==null?void 0:D.x)+((M=T.$bar)==null?void 0:M.width)??K+1;for(const P of q)if(!R(T,P))return P.occupiedRanges.push({start:K,end:ne}),P.height=Math.max(P.height,j),P.y;const S=q.length===0?y:q[q.length-1].y+q[q.length-1].height;return q.push({y:S,height:j,occupiedRanges:[{start:K,end:ne}]}),S};for(const T of H){const j=(n==null?void 0:n.has(T.id))&&((E=T._children)==null?void 0:E.length)>0;let K,ne;if(j){K=Lt(T,t,o);const S=T.subtaskLayout||"sequential",p=S==="sequential"?s:K;ne=r(T,S==="sequential"?u:K),g.set(T.id,{y:ne,height:p,x:(I=T.$bar)==null?void 0:I.x,width:(v=T.$bar)==null?void 0:v.width,isExpanded:j});const M=s*l,P=a*.4;if(T._children){const L=S==="mixed"||S==="parallel"?Ut(T._children,o):null,N=(s-M)/2;T._children.forEach((U,V)=>{jt(o,U);let re;if(S==="sequential")re=ne+N;else{const W=(L==null?void 0:L.get(U))??V;re=ne+N+W*(M+P)}g.set(U,{y:re,height:M,isSubtask:!0})})}}else T.type==="project"?(K=s*.6,ne=r(T,K),g.set(T.id,{y:ne,height:K,isExpanded:!1})):(K=u,ne=r(T,K),g.set(T.id,{y:ne,height:s,isExpanded:!1}))}let w=y;for(const T of q)w=Math.max(w,T.y+T.height);const Y=Math.max(u,w-f);b.set(x.id,{y:f,height:Y,contentY:f+a/2,contentHeight:Y-a,type:x.type,expandedTasks:c.map(T=>T.id),taskPositions:g}),f+=Y}return b.set("__total__",{height:f}),b}function Lt(e,t,n){const{barHeight:o=30,padding:s=18,subtaskHeightRatio:a=.5}=t,l=o*a,u=s*.4,b=e._children||[];if(b.length===0)return o+s;const f=e.subtaskLayout||"sequential";if(f==="sequential")return o+s;if(f==="parallel"){const k=(o-l)/2,h=b.length;return k*2+h*l+(h-1)*u}return f==="mixed"?Ro(e,t,n):o+s}function Ut(e,t){var a,l,u;const n=new Map;if(!(e!=null&&e.length)||!t)return n;const o=e.map(b=>jt(t,b)).filter(b=>b!=null).sort((b,f)=>b.order!==void 0&&f.order!==void 0?b.order-f.order:(b._start||0)-(f._start||0)),s=[];for(const b of o){const f=b._start??((a=b.$bar)==null?void 0:a.x)??0,k=b._end??((l=b.$bar)==null?void 0:l.x)+((u=b.$bar)==null?void 0:u.width)??f+1;let h=-1;for(let E=0;E<s.length;E++)if(!s[E].some(v=>!(k<=v.start||f>=v.end))){h=E,s[E].push({start:f,end:k});break}h===-1&&(h=s.length,s.push([{start:f,end:k}])),n.set(b.id,h)}return n}function Ro(e,t,n){const{barHeight:o=30,padding:s=18,subtaskHeightRatio:a=.5}=t,l=o*a,u=s*.4,b=e._children||[];if(b.length===0)return o+s;const f=Ut(b,n),h=Math.max(0,...f.values())+1;return(o-l)/2*2+h*l+(h-1)*u}function Wt(e,t){if(e.length===0)return-1;if(t<0)return 0;let n=0,o=e.length-1;for(;n<=o;){const s=Math.floor((n+o)/2),a=e[s];if(t>=a.y&&t<a.y+a.height)return s;t<a.y?o=s-1:n=s+1}return Math.min(n,e.length-1)}function Po(e){const t=[];for(const[n,o]of e)n!=="__total__"&&t.push({id:n,...o});return t.sort((n,o)=>n.y-o.y),t}function $o(e,t){const{barHeight:n=30,padding:o=18}=t,s=n+o,a=new Map;for(let l=0;l<e.length;l++){const u=e[l],b=l*s;a.set(u.id,{y:b,height:s,contentY:b+o/2,contentHeight:n,type:u.type})}return a.set("__total__",{height:e.length*s}),a}const tt=(e,t)=>(e==null?void 0:e.start)===(t==null?void 0:t.start)&&(e==null?void 0:e.end)===(t==null?void 0:t.end);function Fo(e){const{scrollX:t,scrollY:n,viewportWidth:o,viewportHeight:s,columnWidth:a,rowHeight:l,totalRows:u,sortedRowLayouts:b,overscanCols:f=5,overscanRows:k=20,overscanX:h=2500}=e,E=X(()=>{const i=a(),g=t(),y=o();return i<=0||y<=0?{start:0,end:100}:{start:Math.max(0,Math.floor(g/i)-f),end:Math.ceil((g+y)/i)+f}},void 0,{equals:tt}),I=X(()=>{const i=n(),g=s(),y=u();if(g<=0)return{start:0,end:Math.min(y,30)};const H=b==null?void 0:b();if(H&&H.length>0){const R=Math.max(0,Wt(H,i)-k),r=Math.min(y,Wt(H,i+g)+1+k);return{start:R,end:r}}const q=l();return q<=0?{start:0,end:Math.min(y,30)}:{start:Math.max(0,Math.floor(i/q)-k),end:Math.min(y,Math.ceil((i+g)/q)+k)}},void 0,{equals:tt}),v=100,x=X(()=>{const i=t(),g=o();return{start:Math.max(0,Math.floor((i-h)/v)*v),end:Math.ceil((i+g+h)/v)*v}},void 0,{equals:tt}),c=X(()=>{const i=n(),g=s(),y=(l==null?void 0:l())||48,H=k*y;return{start:Math.max(0,i-H),end:i+g+H}},void 0,{equals:tt});return{colRange:E,rowRange:I,xRange:x,yRange:c}}function Eo(e){const t=new Map;for(const s of e)s._children=[],s._depth=0,t.set(s.id,s);for(const s of e)if(s.parentId){const a=t.get(s.parentId);a&&(a._children.push(s.id),a.type||(a.type="summary"))}const n=e.filter(s=>!s.parentId),o=n.map(s=>({task:s,depth:0}));for(;o.length>0;){const{task:s,depth:a}=o.shift();s._depth=a;for(const l of s._children){const u=t.get(l);u&&o.push({task:u,depth:a+1})}}for(const s of e)s.parentId&&s._depth===0&&!n.includes(s)&&(console.warn(`Circular or orphaned parent reference detected for task ${s.id}`),s._depth=0);return t}function Io(e,t){const n=new Set,o=[e],s=t.get?a=>t.get(a):a=>t[a];for(;o.length>0;){const a=o.shift(),l=s(a);for(const u of(l==null?void 0:l._children)||[])n.has(u)||(n.add(u),o.push(u))}return n}function Ao(e,t,n){const o=t.get?a=>t.get(a):a=>t[a];let s=o(e);for(;s!=null&&s.parentId;){if(n.has(s.parentId))return!0;s=o(s.parentId)}return!1}var Bo=$e('<div style=position:absolute><div class=bar style=position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box></div><div class=bar-expected-progress style=position:absolute;top:0;left:0;height:100%></div><div class=bar-progress style=position:absolute;top:0;left:0;height:100%;opacity:0.3></div><div style=position:absolute;top:50%;white-space:nowrap;pointer-events:none;font-size:12px></div><div style=position:absolute;top:2px;right:4px;font-size:10px;pointer-events:none>ðŸ”’</div><div class="handle handle-left"style="position:absolute;left:-2px;top:25%;width:4px;height:50%;border-radius:1px;background-color:var(--g-handle-color, #ddd);cursor:ew-resize;opacity:0"></div><div class="handle handle-right"style="position:absolute;right:-2px;top:25%;width:4px;height:50%;border-radius:1px;background-color:var(--g-handle-color, #ddd);cursor:ew-resize;opacity:0"></div><div class="handle handle-progress"style="position:absolute;top:50%;transform:translateY(-50%);width:10px;height:10px;border-radius:50%;background-color:var(--g-progress-handle-color, #fff);cursor:ew-resize;opacity:0;box-sizing:border-box">');function Lo(e){const t=Nn(),n=()=>{const d=e.task;return typeof d=="function"?d():d},o=()=>{const d=n();return(d==null?void 0:d.$bar)??{x:e.x??0,y:e.y??0,width:e.width??100,height:e.height??30}},s=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.barCornerRadius)==null?void 0:F.call(d))??e.cornerRadius??3}),a=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.readonly)==null?void 0:F.call(d))??e.readonly??!1}),l=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.readonlyDates)==null?void 0:F.call(d))??e.readonlyDates??!1}),u=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.readonlyProgress)==null?void 0:F.call(d))??e.readonlyProgress??!1}),b=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.showExpectedProgress)==null?void 0:F.call(d))??e.showExpectedProgress??!1}),f=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.columnWidth)==null?void 0:F.call(d))??e.columnWidth??45}),k=X(()=>{var d,F;return((F=(d=e.ganttConfig)==null?void 0:d.ignoredPositions)==null?void 0:F.call(d))??e.ignoredPositions??[]}),h=X(()=>{var F,C;const d=n();return d?{id:d.id??"",name:d.name??"",color:d.color??"#b8c2cc",colorProgress:d.color_progress??"#a3a3ff",progress:d.progress??0,locked:((F=d.constraints)==null?void 0:F.locked)??!1,invalid:d.invalid??!1,customClass:d.custom_class??"",hasChildren:(((C=d._children)==null?void 0:C.length)??0)>0,start:d._start??d.start??null,end:d._end??d.end??null}:{id:"",name:"",color:"#b8c2cc",colorProgress:"#a3a3ff",progress:0,locked:!1,invalid:!1,customClass:"",hasChildren:!1,start:null,end:null}}),E=X(()=>o()),I=()=>{var d;return((d=E())==null?void 0:d.x)??0},v=()=>{var F;const d=typeof e.taskPosition=="function"?e.taskPosition():e.taskPosition;return(d==null?void 0:d.y)??((F=E())==null?void 0:F.y)??0},x=()=>{var d;return((d=E())==null?void 0:d.width)??100},c=()=>{var d;return((d=E())==null?void 0:d.height)??30},i=()=>f();let g=!1;const{dragState:y,isDragging:H,startDrag:q}=Xt({onDragStart:(d,F)=>{var C,ee,oe;if(g=!1,d.originalX=I(),d.originalY=v(),d.originalWidth=x(),d.originalProgress=h().progress,(ee=(C=e.taskStore)==null?void 0:C.setDraggingTaskId)==null||ee.call(C,h().id),F==="dragging_bar"){const de=new Set;if(e.onCollectDependents){const te=e.onCollectDependents(h().id);for(const ae of te)de.add(ae)}if(e.onCollectDescendants){const te=e.onCollectDescendants(h().id);for(const ae of te)de.add(ae)}d.dependentOriginals=new Map;for(const te of de){const ae=(oe=e.taskStore)==null?void 0:oe.getBarPosition(te);ae&&d.dependentOriginals.set(te,{originalX:ae.x})}}},onDragMove:(d,F,C)=>{var de;if(!e.taskStore||!h().id)return;g=!0;const ee=f(),oe=k();if(C==="dragging_bar"){let te=xt(F.originalX+d.deltaX,ee,oe),ae=te-F.originalX;if(((de=F.dependentOriginals)==null?void 0:de.size)>0&&e.taskStore.batchMovePositions)e.onClampBatchDelta&&ae<0&&(ae=e.onClampBatchDelta(F.dependentOriginals,ae)),e.taskStore.batchMovePositions(F.dependentOriginals,ae);else{if(e.onConstrainPosition){const A=e.onConstrainPosition(h().id,te,v());if(A===null)return;te=A.x??te}e.taskStore.updateBarPosition(h().id,{x:te})}}else if(C==="dragging_left"){const te=d.deltaX,ae=Math.round(te/ee)*ee;let A=F.originalX+ae,$=F.originalWidth-ae;if($<i()&&($=i(),A=F.originalX+F.originalWidth-i()),A=xt(A,ee,oe),e.onConstrainPosition){const Te=e.onConstrainPosition(h().id,A,v());if(Te===null)return;Te.x>A&&($=$-(Te.x-A),A=Te.x)}e.taskStore.updateBarPosition(h().id,{x:A,width:$})}else if(C==="dragging_right"){const te=d.deltaX,ae=Math.round(te/ee)*ee;let A=F.originalWidth+ae;A=Math.max(i(),A),e.taskStore.updateBarPosition(h().id,{width:A})}else if(C==="dragging_progress"){const te=I(),ae=x(),A=k(),$=f();let Te=It(F.startSvgX+d.deltaX,te,te+ae);const Q=A.reduce((z,G)=>z+(G>=te&&G<te+ae?1:0),0),he=ae-Q*$,xe=Te-te,ce=A.reduce((z,G)=>z+(G>=te&&G<Te?1:0),0),be=xe-ce*$,m=he>0?It(Math.round(be/he*100),0,100):0;if(e.taskStore){const z=e.taskStore.getTask(h().id);z&&e.taskStore.updateTask(h().id,{...z,progress:m})}}},onDragEnd:(d,F,C)=>{var te,ae,A;(ae=(te=e.taskStore)==null?void 0:te.setDraggingTaskId)==null||ae.call(te,null);const ee=e.onDateChange??t.onDateChange,oe=e.onResizeEnd??t.onResizeEnd,de=e.onProgressChange??t.onProgressChange;if(C==="dragging_bar"||C==="dragging_left"||C==="dragging_right"){const $=(A=e.taskStore)==null?void 0:A.getBarPosition(h().id);ee==null||ee(h().id,{x:($==null?void 0:$.x)??I(),width:($==null?void 0:$.width)??x()}),(C==="dragging_left"||C==="dragging_right")&&(oe==null||oe(h().id))}else C==="dragging_progress"&&(de==null||de(h().id,h().progress))}}),R=d=>{if(a()||l()||J())return;const F=d.target;F.classList&&F.classList.contains("handle")||(g=!1,q(d,"dragging_bar",{taskId:h().id}))},r=d=>{const F=e.onHover??t.onHover;F&&!H()&&F(h().id,d.clientX,d.clientY)},w=()=>{const d=e.onHoverEnd??t.onHoverEnd;d&&d()},Y=d=>{const F=e.onTaskClick??t.onTaskClick;!g&&F&&(d.stopPropagation(),F(h().id,d))},T=d=>{a()||l()||J()||(d.stopPropagation(),q(d,"dragging_left",{taskId:h().id}))},j=d=>{a()||l()||J()||(d.stopPropagation(),q(d,"dragging_right",{taskId:h().id}))},K=d=>{a()||u()||J()||(d.stopPropagation(),q(d,"dragging_progress",{taskId:h().id}))},ne=X(()=>Bt(I(),x(),h().progress,k(),f())),S=X(()=>{var ee,oe,de,te;if(!b())return 0;const d=h().start,F=h().end;if(!d||!F)return 0;const C=xo(d,F,((oe=(ee=e.ganttConfig)==null?void 0:ee.unit)==null?void 0:oe.call(ee))??"day",((te=(de=e.ganttConfig)==null?void 0:de.step)==null?void 0:te.call(de))??1);return Bt(I(),x(),C,k(),f())}),p=X(()=>Vt(I(),x(),h().name)),D=()=>h().color,M=()=>h().colorProgress,P=()=>"var(--g-expected-progress-color, rgba(0,0,0,0.2))",L=()=>h().hasChildren,N=()=>h().invalid,U=()=>h().customClass,V=()=>!a(),re=()=>V()&&!l(),W=()=>V()&&!u(),J=()=>h().locked,ue=()=>H()?`dragging ${y()}`:"",ge=()=>J()?"#7f8c8d":H()?"#2c3e50":D(),ke=()=>J()||H()?1:L()?0:.1;De(()=>{const d=h().id,F=ge(),C=ke();d==="task-0"&&console.log("[Bar task-0]",{bg:F,op:C,locked:J(),dragging:H(),hasSubtasks:L()})});const pe=()=>e.visible??!0,_e=()=>`translate(${I()}px, ${v()}px)`;return(()=>{var d=Bo(),F=d.firstChild,C=F.nextSibling,ee=C.nextSibling,oe=ee.nextSibling,de=oe.nextSibling,te=de.nextSibling,ae=te.nextSibling,A=ae.nextSibling;return d.$$click=Y,d.addEventListener("mouseleave",w),d.addEventListener("mouseenter",r),d.$$mousedown=R,le(oe,()=>h().name),te.$$mousedown=T,ae.$$mousedown=j,A.$$mousedown=K,Ce($=>{var Te=`bar-wrapper ${U()} ${N()?"invalid":""} ${J()?"locked":""} ${ue()}`,Q=h().id,he=_e(),xe=`${x()}px`,ce=`${c()}px`,be=J()?"not-allowed":a()?"default":"move",m=pe()?"visible":"hidden",z=`${s()}px`,G=J()?"#7f8c8d":H()?"#2c3e50":D(),fe=J()||H()?1:L()?0:.1,ve=`${J()?"2px":"1.5px"} solid ${J()?"#c0392b":D()}`,me=J()?"dashed":"solid",He=H()?"none":"background-color 0.1s ease",Fe=`${S()}px`,Re=`${s()}px`,Ee=P(),Se=b()&&S()>0?"block":"none",Ie=`${ne()}px`,Ye=`${s()}px`,Ae=M(),Ne=`bar-label ${p().position}`,Be=p().position==="inside"?"50%":`${x()+5}px`,ze=p().position==="inside"?"translate(-50%, -50%)":"translateY(-50%)",Le=p().position==="inside"?"#fff":"#333",Oe=J()?"block":"none",We=V()&&!J()&&re()?"block":"none",Xe=V()&&!J()&&re()?"block":"none",qe=`${ne()-5}px`,Ve=`2px solid ${M()}`,je=V()&&!J()&&W()&&ne()>0?"block":"none";return Te!==$.e&&mt(d,$.e=Te),Q!==$.t&&ie(d,"data-id",$.t=Q),he!==$.a&&O(d,"transform",$.a=he),xe!==$.o&&O(d,"width",$.o=xe),ce!==$.i&&O(d,"height",$.i=ce),be!==$.n&&O(d,"cursor",$.n=be),m!==$.s&&O(d,"visibility",$.s=m),z!==$.h&&O(F,"border-radius",$.h=z),G!==$.r&&O(F,"background-color",$.r=G),fe!==$.d&&O(F,"opacity",$.d=fe),ve!==$.l&&O(F,"border",$.l=ve),me!==$.u&&O(F,"border-style",$.u=me),He!==$.c&&O(F,"transition",$.c=He),Fe!==$.w&&O(C,"width",$.w=Fe),Re!==$.m&&O(C,"border-radius",$.m=Re),Ee!==$.f&&O(C,"background-color",$.f=Ee),Se!==$.y&&O(C,"display",$.y=Se),Ie!==$.g&&O(ee,"width",$.g=Ie),Ye!==$.p&&O(ee,"border-radius",$.p=Ye),Ae!==$.b&&O(ee,"background-color",$.b=Ae),Ne!==$.T&&mt(oe,$.T=Ne),Be!==$.A&&O(oe,"left",$.A=Be),ze!==$.O&&O(oe,"transform",$.O=ze),Le!==$.I&&O(oe,"color",$.I=Le),Oe!==$.S&&O(de,"display",$.S=Oe),We!==$.W&&O(te,"display",$.W=We),Xe!==$.C&&O(ae,"display",$.C=Xe),qe!==$.B&&O(A,"left",$.B=qe),Ve!==$.v&&O(A,"border",$.v=Ve),je!==$.k&&O(A,"display",$.k=je),$},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0}),d})()}wt(["mousedown","click"]);var Wo=$e("<div data-type=summary style=position:absolute;will-change:transform;pointer-events:auto><div class=bar style=position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box></div><div class=bar-progress style=position:absolute;top:0;left:0;height:100%;pointer-events:none></div><div class=bar-label style=position:absolute;top:50%;font-size:12px;font-weight:500;pointer-events:none;user-select:none;white-space:nowrap></div><div style=position:absolute;top:50%;transform:translateY(-50%);font-size:10px;color:#888;pointer-events:none;white-space:nowrap>(<!>)");function Yo(e){const t=()=>{const r=e.taskId;return typeof r=="function"?r():r},n=()=>{const r=t();if(e.taskStore&&r){const w=e.taskStore.tasks[r];if(w!=null&&w.$bar)return w.$bar}return{x:0,y:0,width:100,height:30}},o=()=>{const r=t();return e.taskStore&&r?e.taskStore.tasks[r]??{}:{}},s=X(()=>n()),a=()=>{var r;return((r=s())==null?void 0:r.x)??0},l=()=>{var w;const r=typeof e.taskPosition=="function"?e.taskPosition():e.taskPosition;return(r==null?void 0:r.y)??((w=s())==null?void 0:w.y)??0},u=()=>{var r;return((r=s())==null?void 0:r.width)??100},b=()=>{var r;return((r=s())==null?void 0:r.height)??30},f=X(()=>{var r,w;return((w=(r=e.ganttConfig)==null?void 0:r.columnWidth)==null?void 0:w.call(r))??45}),k=X(()=>{var r,w;return((w=(r=e.ganttConfig)==null?void 0:r.readonly)==null?void 0:w.call(r))??!1}),h=X(()=>{var r,w;return((w=(r=e.ganttConfig)==null?void 0:r.barCornerRadius)==null?void 0:w.call(r))??3}),E=()=>{var r;return((r=o())==null?void 0:r.color)??"var(--g-bar-color, #b8c2cc)"},I=()=>{var r;return((r=o())==null?void 0:r.color_progress)??"var(--g-bar-progress-color, #a3a3ff)"},v=()=>{var r;return((r=o())==null?void 0:r.progress)??0},x=()=>u()*v()/100,c=X(()=>{var w;const r=((w=o())==null?void 0:w.name)??"";return Vt(a(),u(),r,7)}),{dragState:i,isDragging:g,startDrag:y}=Xt({onDragStart:(r,w)=>{var Y;if(r.originalX=a(),r.originalY=l(),w==="dragging_bar"&&e.onCollectDescendants){const T=e.onCollectDescendants(t());T.add(t()),r.batchOriginals=new Map;for(const j of T){const K=(Y=e.taskStore)==null?void 0:Y.getBarPosition(j);K&&r.batchOriginals.set(j,{originalX:K.x})}}},onDragMove:(r,w,Y)=>{var ne;if(!e.taskStore||!t()||Y!=="dragging_bar")return;const T=f();let K=xt(w.originalX+r.deltaX,T,[])-w.originalX;((ne=w.batchOriginals)==null?void 0:ne.size)>0&&e.taskStore.batchMovePositions&&(e.onClampBatchDelta&&K<0&&(K=e.onClampBatchDelta(w.batchOriginals,K)),e.taskStore.batchMovePositions(w.batchOriginals,K))},onDragEnd:(r,w)=>{var Y;w==="dragging_bar"&&((Y=e.onDragEnd)==null||Y.call(e,t()))}}),H=()=>{const r=i();return r==="idle"?"":`dragging ${r}`},q=r=>{k()||(r.preventDefault(),r.stopPropagation(),y(r,"dragging_bar"))},R=()=>`translate(${a()}px, ${l()}px)`;return(()=>{var r=Wo(),w=r.firstChild,Y=w.nextSibling,T=Y.nextSibling,j=T.nextSibling,K=j.firstChild,ne=K.nextSibling;return ne.nextSibling,r.$$mousedown=q,le(T,()=>{var S;return((S=o())==null?void 0:S.name)??""}),le(j,()=>{var S,p;return((p=(S=o())==null?void 0:S._children)==null?void 0:p.length)??0},ne),Ce(S=>{var C,ee,oe,de;var p=`summary-bar-wrapper bar-wrapper ${H()}`,D=t(),M=R(),P=`${u()}px`,L=`${b()}px`,N=k()?"default":"grab",U=`${h()}px`,V=g()?"#2c3e50":E(),re=g()?"none":"background-color 0.1s ease",W=`${x()}px`,J=`${h()}px`,ue=I(),ge=v()>0?"block":"none",ke=c().position==="inside"?"50%":`${u()+8}px`,pe=c().position==="inside"?"translate(-50%, -50%)":"translateY(-50%)",_e=c().position==="inside"?"#fff":"#333",d=`${u()+8+(((ee=(C=o())==null?void 0:C.name)==null?void 0:ee.length)??0)*7}px`,F=((de=(oe=o())==null?void 0:oe._children)==null?void 0:de.length)>0?"block":"none";return p!==S.e&&mt(r,S.e=p),D!==S.t&&ie(r,"data-id",S.t=D),M!==S.a&&O(r,"transform",S.a=M),P!==S.o&&O(r,"width",S.o=P),L!==S.i&&O(r,"height",S.i=L),N!==S.n&&O(r,"cursor",S.n=N),U!==S.s&&O(w,"border-radius",S.s=U),V!==S.h&&O(w,"background-color",S.h=V),re!==S.r&&O(w,"transition",S.r=re),W!==S.d&&O(Y,"width",S.d=W),J!==S.l&&O(Y,"border-radius",S.l=J),ue!==S.u&&O(Y,"background-color",S.u=ue),ge!==S.c&&O(Y,"display",S.c=ge),ke!==S.w&&O(T,"left",S.w=ke),pe!==S.m&&O(T,"transform",S.m=pe),_e!==S.f&&O(T,"color",S.f=_e),d!==S.y&&O(j,"left",S.y=d),F!==S.g&&O(j,"display",S.g=F),S},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),r})()}wt(["mousedown"]);var zo=$e("<svg><rect class=subtask-bar-progress fill-opacity=0.3 style=pointer-events:none></svg>",!1,!0,!1),Xo=$e("<svg><g class=subtask-bar><rect class=subtask-bar-bg fill-opacity=0.1 stroke-width=1.5></rect><text class=subtask-label font-size=10 fill=#333 text-anchor=middle dominant-baseline=middle style=pointer-events:none;user-select:none></svg>",!1,!0,!1);function qo(e){const t=()=>e.task,n=()=>{var c;return((c=t())==null?void 0:c.$bar)||{x:0,width:100}},o=()=>n().x,s=()=>n().width,a=()=>e.y??0,l=()=>e.config||{},u=()=>l().barHeight??30,b=()=>l().subtaskHeightRatio??.5,f=()=>(l().cornerRadius??3)*.7,k=()=>u()*b(),h=()=>{var c;return((c=t())==null?void 0:c.color)??l().parentColor??"var(--g-bar-color, #b8c2cc)"},E=()=>{var c;return((c=t())==null?void 0:c.color_progress)??h()},I=()=>{var c;return((c=t())==null?void 0:c.progress)??0},v=()=>{const c=s(),i=I();return Math.max(0,c*i/100)},x=()=>o()+s()/2;return(()=>{var c=Xo(),i=c.firstChild,g=i.nextSibling;return le(c,ye(On,{get when(){return I()>0},get children(){var y=zo();return Ce(H=>{var q=o(),R=a(),r=v(),w=k(),Y=f(),T=f(),j=E();return q!==H.e&&ie(y,"x",H.e=q),R!==H.t&&ie(y,"y",H.t=R),r!==H.a&&ie(y,"width",H.a=r),w!==H.o&&ie(y,"height",H.o=w),Y!==H.i&&ie(y,"rx",H.i=Y),T!==H.n&&ie(y,"ry",H.n=T),j!==H.s&&ie(y,"fill",H.s=j),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),y}}),g),le(g,()=>{var y;return((y=t())==null?void 0:y.name)??""}),Ce(y=>{var D;var H=(D=t())==null?void 0:D.id,q=e.index,R=o(),r=a(),w=s(),Y=k(),T=f(),j=f(),K=h(),ne=h(),S=x(),p=a()+k()/2;return H!==y.e&&ie(c,"data-id",y.e=H),q!==y.t&&ie(c,"data-index",y.t=q),R!==y.a&&ie(i,"x",y.a=R),r!==y.o&&ie(i,"y",y.o=r),w!==y.i&&ie(i,"width",y.i=w),Y!==y.n&&ie(i,"height",y.n=Y),T!==y.s&&ie(i,"rx",y.s=T),j!==y.h&&ie(i,"ry",y.h=j),K!==y.r&&ie(i,"fill",y.r=K),ne!==y.d&&ie(i,"stroke",y.d=ne),S!==y.l&&ie(g,"x",y.l=S),p!==y.u&&ie(g,"y",y.u=p),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),c})()}var Vo=$e("<svg><g class=expanded-task-container><rect class=parent-container fill=none stroke-width=2 stroke-opacity=0.6 stroke-dasharray=6,3></rect><g class=subtasks></svg>",!1,!0,!1);function jo(e){const t=()=>{var v;return(v=e.taskStore)==null?void 0:v.tasks[e.taskId]},n=()=>{var c,i;const v=t();if(!((c=v==null?void 0:v._children)!=null&&c.length))return[];const x=(i=e.taskStore)==null?void 0:i.tasks;return x?v._children.map(g=>x[g]).filter(g=>g!=null):[]},o=()=>{var v;return((v=t())==null?void 0:v.subtaskLayout)||"sequential"},s=()=>{var v,x;return((x=(v=e.ganttConfig)==null?void 0:v.barHeight)==null?void 0:x.call(v))??30},a=()=>{var v,x;return((x=(v=e.ganttConfig)==null?void 0:v.padding)==null?void 0:x.call(v))??18},l=()=>{var v,x;return((x=(v=e.ganttConfig)==null?void 0:v.subtaskHeightRatio)==null?void 0:x.call(v))??.5},u=()=>{var v,x;return((x=(v=e.ganttConfig)==null?void 0:v.barCornerRadius)==null?void 0:x.call(v))??3},b=()=>{var v;return((v=t())==null?void 0:v.$bar)||{x:0,y:0,width:100,height:30}},f=()=>{var c;const v=e.rowLayout,x=(c=v==null?void 0:v.taskPositions)==null?void 0:c.get(e.taskId);return(x==null?void 0:x.y)!==void 0?x.y:v?v.y:b().y-a()/2},k=()=>{var H;const v=e.rowLayout,x=(H=v==null?void 0:v.taskPositions)==null?void 0:H.get(e.taskId);if((x==null?void 0:x.height)!==void 0)return x.height;if(o()==="sequential")return s();const c=s()*l(),i=a()*.4,g=n().length;return(s()-c)/2*2+g*c+(g-1)*i},h=()=>{var v;return((v=t())==null?void 0:v.color)??"var(--g-bar-color, #b8c2cc)"},E=()=>({barHeight:s(),padding:a(),subtaskHeightRatio:l(),cornerRadius:u(),parentColor:h()}),I=(v,x)=>{var q;const c=e.rowLayout,i=(q=c==null?void 0:c.taskPositions)==null?void 0:q.get(x==null?void 0:x.id);if((i==null?void 0:i.y)!==void 0)return i.y;const g=s()*l(),y=a()*.4,H=(s()-g)/2;return o()==="sequential"?f()+H:f()+H+v*(g+y)};return(()=>{var v=Vo(),x=v.firstChild,c=x.nextSibling;return le(c,ye(qt,{get each(){return n()},children:(i,g)=>ye(qo,{task:i,get index(){return g()},get y(){return I(g(),i)},get layout(){return o()},get config(){return E()},get ganttConfig(){return e.ganttConfig}})})),Ce(i=>{var g=e.taskId,y=o(),H=b().x,q=f(),R=b().width,r=k(),w=h(),Y=u(),T=u();return g!==i.e&&ie(v,"data-id",i.e=g),y!==i.t&&ie(v,"data-layout",i.t=y),H!==i.a&&ie(x,"x",i.a=H),q!==i.o&&ie(x,"y",i.o=q),R!==i.i&&ie(x,"width",i.i=R),r!==i.n&&ie(x,"height",i.n=r),w!==i.s&&ie(x,"stroke",i.s=w),Y!==i.h&&ie(x,"rx",i.h=Y),T!==i.r&&ie(x,"ry",i.r=T),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v})()}const we={FS:"FS",SS:"SS",FF:"FF",SF:"SF"},nt=0;function Uo(e,t,n=new Set){const o=[],s=[e];for(;s.length>0;){const a=s.shift();if(!n.has(a)){n.add(a);for(const l of t)l.elastic===!1&&(l.from===a&&!n.has(l.to)&&(o.push({taskId:l.to,relationship:l}),s.push(l.to)),l.to===a&&!n.has(l.from)&&(o.push({taskId:l.from,relationship:l}),s.push(l.from)))}}return o}function Ge(e,t,n,o,s=null){const a=s??t.$bar.x,l=t.$bar.width,u=n.$bar.width;switch(e){case we.FS:return a+l+o;case we.SS:return a+o;case we.FF:return a+l-u+o;case we.SF:return a-u+o;default:return a+l+o}}function Go(e,t,n,o,s=null){return Ge(e,t,n,o,s)}function No(e,t,n,o,s){const a=Ge(e,t,n,o,s),l=n.$bar.x;return l<a?a-l:0}function ft(e,t){if(e.getBarPosition)return e.getBarPosition(t);const n=e.getTask(t);return n==null?void 0:n.$bar}function kt(e,t,n,o,s,a={},l=new Set){var E,I;if(l.has(e))return console.warn(`Cycle detected in dependency chain involving task: ${e}`),null;const u=new Set(l);u.add(e);const{pixelsPerTimeUnit:b=1}=a,f=o.getTask(e),k=ft(o,e);if(!f||!k||(E=f.constraints)!=null&&E.locked)return null;const h=Uo(e,s);if(h.length>0){if(h.some(g=>{var H;const y=o.getTask(g.taskId);return(H=y==null?void 0:y.constraints)==null?void 0:H.locked}))return null;const x=t-k.x,c=n-k.y,i=[{taskId:e,x:t,y:n}];return h.forEach(g=>{const y=ft(o,g.taskId);y&&i.push({taskId:g.taskId,x:y.x+x,y:y.y+c})}),{type:"batch",updates:i}}for(const v of s){if(v.elastic===!1)continue;const x=v.from===e,c=v.to===e;if(!x&&!c)continue;const i=x?v.to:v.from,g=o.getTask(i),y=ft(o,i);if(!g||!y)continue;const H=v.type||we.FS,R=(v.lag??nt)*b;if(x){const r=No(H,f,g,R,t);if(r>0)if((I=g.constraints)!=null&&I.locked){const w=Oo(H,f,g,R,g.$bar.x);t=Math.min(t,w)}else{const w=g.$bar.x+r,Y=kt(i,w,g.$bar.y,o,s,a,u);(Y==null?void 0:Y.type)==="single"?o.updateBarPosition(i,{x:Y.x,y:Y.y}):(Y==null?void 0:Y.type)==="batch"&&Y.updates.forEach(T=>{o.updateBarPosition(T.taskId,{x:T.x,y:T.y})})}}else{const w=Ge(H,g,f,R);t<w&&(t=w)}}return{type:"single",taskId:e,x:t,y:n}}function Oo(e,t,n,o,s){const a=t.$bar.width,l=n.$bar.width;switch(e){case we.FS:return s-a-o;case we.SS:return s-o;case we.FF:return s-a+l-o;case we.SF:return s+l-o;default:return s-a-o}}function Jo(e,t,n,o,s={}){if(t>=0)return t;const{pixelsPerTimeUnit:a=1}=s;let l=t;const u=new Set(e.keys());for(const[b,{originalX:f}]of e){const k=o(b);if(k!=null&&k.$bar)for(const h of n){if(h.to!==b)continue;const E=h.from;if(u.has(E))continue;const I=o(E);if(!(I!=null&&I.$bar))continue;const v=h.type||we.FS,c=(h.lag??nt)*a,i=Ge(v,I,k,c);if(f+t<i){const y=i-f;y<=0?l=Math.max(l,y):l=Math.max(l,0)}}}return l}function Ko(e,t,n=null,o=new Set){var a;const s=[e];for(;s.length>0;){const l=s.shift();if(!o.has(l)){if(n){const u=n(l);if((a=u==null?void 0:u.constraints)!=null&&a.locked)continue}o.add(l);for(const u of t)u.from===l&&!o.has(u.to)&&s.push(u.to)}}return o}function Qo(e,t,n,o={}){var E,I,v;const{pixelsPerTimeUnit:s=1,newX:a,newWidth:l}=o,u=t.getTask(e);if(console.log("[resolveAfterResize] taskId:",e,"newX:",a,"newWidth:",l),!u){console.log("[resolveAfterResize] task not found!");return}const b=a??((E=u.$bar)==null?void 0:E.x)??0,f=l??((I=u.$bar)==null?void 0:I.width)??0,k=b+f;console.log("[resolveAfterResize] predX:",b,"predWidth:",f,"predEnd:",k);let h=!1;for(const x of n){if(x.from!==e)continue;h=!0,console.log("[resolveAfterResize] Found successor rel:",x);const c=t.getTask(x.to),i=t.getBarPosition?t.getBarPosition(x.to):c==null?void 0:c.$bar;if(console.log("[resolveAfterResize] succTask:",x.to,"succBar:",i),!c||!i||(v=c.constraints)!=null&&v.locked)continue;const g=x.type||we.FS,H=(x.lag??nt)*s;if(x.elastic!==!1){let R;const r=i.width??0,w=i.x??0,Y=i.y??0;switch(g){case we.FS:R=k+H;break;case we.SS:R=b+H;break;case we.FF:R=k-r+H;break;case we.SF:R=b-r+H;break;default:R=k+H}if(console.log("[resolveAfterResize] minSuccX:",R,"succX:",w,"needs push:",w<R),w<R){const T=kt(x.to,R,Y,t,n,o,new Set([e]));(T==null?void 0:T.type)==="single"?t.updateBarPosition(x.to,{x:T.x,y:T.y}):(T==null?void 0:T.type)==="batch"&&T.updates.forEach(j=>{t.updateBarPosition(j.taskId,{x:j.x,y:j.y})})}}else{const R=Go(g,u,c,H);t.updateBarPosition(x.to,{x:R})}}h||console.log("[resolveAfterResize] No successor relationships found for",e);for(const x of n){if(x.to!==e||x.type!==we.FF&&x.type!==we.SF)continue;const c=t.getTask(x.from);if(!c)continue;const i=x.type,y=(x.lag??nt)*s,H=Ge(i,c,u,y);u.$bar.x<H&&t.updateBarPosition(e,{x:H})}}var Zo=$e('<div class=task-layer style="contain:layout style;position:relative;width:100%;height:100%"><div class=summary-layer style="contain:layout style"></div><div class=expanded-layer style="contain:layout style"></div><div class=task-bars-layer style="contain:layout style">'),es=$e("<div>"),ts=$e("<div style=pointer-events:auto>");const Yt=5;function ns(e){const t=()=>e.relationships||[],n=(p,D,M)=>{var N,U;if(!e.taskStore)return{x:D,y:M};const P=((U=(N=e.ganttConfig)==null?void 0:N.columnWidth)==null?void 0:U.call(N))??45,L=kt(p,D,M,e.taskStore,t(),{pixelsPerTimeUnit:P});if(!L)return null;if(L.type==="batch"){for(const re of L.updates)re.taskId!==p&&e.taskStore.updateBarPosition(re.taskId,{x:re.x});const V=L.updates.find(re=>re.taskId===p);return V?{x:V.x,y:V.y}:{x:D,y:M}}return{x:L.x,y:L.y}},o=(p,D)=>{var M;(M=e.onDateChange)==null||M.call(e,p,D)},s=(p,D)=>{var M;(M=e.onProgressChange)==null||M.call(e,p,D)},a=p=>{var D;e.taskStore&&Qo(p,e.taskStore,t()),(D=e.onResizeEnd)==null||D.call(e,p)},l=(p,D,M)=>{var P;(P=e.onHover)==null||P.call(e,p,D,M)},u=()=>{var p;(p=e.onHoverEnd)==null||p.call(e)},b=(p,D)=>{var M;(M=e.onTaskClick)==null||M.call(e,p,D)},f=p=>{var M,P;const D=(P=(M=e.taskStore)==null?void 0:M.getTask)==null?void 0:P.bind(e.taskStore);return Ko(p,t(),D)},k=(p,D)=>{var L,N,U,V;const M=(N=(L=e.taskStore)==null?void 0:L.getTask)==null?void 0:N.bind(e.taskStore),P=((V=(U=e.ganttConfig)==null?void 0:U.columnWidth)==null?void 0:V.call(U))??45;return Jo(p,D,t(),M,{pixelsPerTimeUnit:P})},h=p=>{if(!e.taskStore)return new Set;const D=e.taskStore.tasks;return Io(p,D)},E=p=>{var D;(D=e.taskStore)==null||D.toggleTaskCollapse(p)},I=()=>{var p;return((p=e.resourceStore)==null?void 0:p.displayResources())||[]},v=()=>e.startRow??0,x=()=>e.endRow??I().length,c=()=>e.startX??0,i=()=>e.endX??1/0;let g=null,y=-1;const H=()=>{var P;const p=(P=e.taskStore)==null?void 0:P.tasks;if(!p)return new Map;const D=Pe(()=>Object.keys(p));if(D.length===y&&g)return g;y=D.length;const M=new Map;return Pe(()=>{for(const L of D){const N=p[L];if(!N||N._isHidden)continue;const U=N.resource||"Unassigned";M.has(U)||M.set(U,[]),M.get(U).push(N)}}),g=M,M},q=X(()=>{const p=[],D=I(),M=H(),P=v(),L=x(),N=c(),U=i();for(let V=P;V<L&&V<D.length;V++){const re=D[V];if(re.type==="group")continue;const W=M.get(re.id);W&&Pe(()=>{if(U===1/0)for(let J=0;J<W.length;J++)p.push(W[J].id);else for(let J=0;J<W.length;J++){const ue=W[J],ge=ue.$bar;(!ge||ge.x+ge.width>=N-200&&ge.x<=U+200)&&p.push(ue.id)}})}return p}),R=p=>{var D,M;return((M=(D=e.ganttConfig)==null?void 0:D.isTaskExpanded)==null?void 0:M.call(D,p))??!1},r=()=>{var p,D;return((D=(p=e.ganttConfig)==null?void 0:p.renderMode)==null?void 0:D.call(p))==="simple"},w=X(()=>{const p=r(),D=q();return Pe(()=>{var re;const M=[],P=[],L=[],N=((re=e.taskStore)==null?void 0:re.tasks)??{},U=new Map,V=W=>(U.has(W)||U.set(W,R(W)),U.get(W));for(const W of D){const J=N[W];if(!J)continue;const ue=J.parentId,ge=J.type,ke=J._children;if(p){if(ue)continue;ge==="summary"||ge==="project"?P.push(W):M.push(W);continue}const pe=ke&&ke.length>0,_e=V(W);pe&&_e?L.push(W):ge==="summary"||ge==="project"?P.push(W):(!ue||!V(ue))&&M.push(W)}return{regularIds:M,summaryIds:P,expandedIds:L}})});let Y=0,T=0;const j=X(()=>{const p=w().regularIds;Y=Math.max(Y,p.length);const D=Y+Yt,M=new Array(D);for(let P=0;P<p.length;P++)M[P]=p[P];return M}),K=X(()=>{var M;const p=j(),D=((M=e.taskStore)==null?void 0:M.tasks)??{};return Pe(()=>p.map(P=>P?D[P]:void 0))}),ne=X(()=>{const p=w().summaryIds;T=Math.max(T,p.length);const D=T+Yt,M=new Array(D);for(let P=0;P<p.length;P++)M[P]=p[P];return M}),S=p=>{var N,U,V;const D=e.rowLayouts;if(!D)return null;const M=(U=(N=e.taskStore)==null?void 0:N.getTask)==null?void 0:U.call(N,p);if(!M)return null;const P=D.get(M.resource);if(!P)return null;if(r())return{...P,y:P.contentY,height:P.contentHeight,isExpanded:!1};const L=(V=P.taskPositions)==null?void 0:V.get(p);return L?{...P,y:L.y,height:L.height,isExpanded:L.isExpanded}:P};return(()=>{var p=Zo(),D=p.firstChild,M=D.nextSibling,P=M.nextSibling;return le(D,ye(vt,{get each(){return ne()},children:L=>(()=>{var N=es();return le(N,ye(Yo,{taskId:L,get taskStore(){return e.taskStore},get ganttConfig(){return e.ganttConfig},onCollectDescendants:h,onClampBatchDelta:k,onToggleCollapse:E,onDragEnd:a})),Ce(U=>O(N,"display",L()?"block":"none")),N})()})),le(M,ye(qt,{get each(){return w().expandedIds},children:L=>ye(jo,{taskId:L,get taskStore(){return e.taskStore},get ganttConfig(){return e.ganttConfig},get rowLayout(){return S(L)}})})),le(P,ye(vt,{get each(){return K()},children:L=>(()=>{var N=ts();return le(N,ye(Lo,{task:L,get taskStore(){return e.taskStore},get ganttConfig(){return e.ganttConfig},onConstrainPosition:n,onCollectDependents:f,onCollectDescendants:h,onClampBatchDelta:k,onDateChange:o,onProgressChange:s,onResizeEnd:a,onHover:l,onHoverEnd:u,onTaskClick:b})),Ce(U=>O(N,"display",L()?"block":"none")),N})()})),p})()}var os=$e("<div style=position:absolute><div style=position:absolute;top:0;left:0;width:100%;height:100%;opacity:0.15;border-radius:3px></div><div style=position:absolute;top:0;left:0;height:100%;background-color:#a3a3ff;opacity:0.3;border-radius:3px></div><div style=position:absolute;top:50%;left:8px;transform:translateY(-50%);color:#fff;font-size:12px;white-space:nowrap></div><div style=position:absolute;bottom:2px;right:4px;font-size:9px;color:#888>");function ss(e){const t=()=>typeof e.task=="function"?e.task():e.task,n=X(()=>{var l,u,b,f;const o=t(),s=(o==null?void 0:o.progress)??0,a=((l=o==null?void 0:o.$bar)==null?void 0:l.width)??100;return{color:(o==null?void 0:o.color)??"#3b82f6",progress:s,name:(o==null?void 0:o.name)??"",pw:a*s/100,id:(o==null?void 0:o.id)??"",x:((u=o==null?void 0:o.$bar)==null?void 0:u.x)??0,y:((b=o==null?void 0:o.$bar)==null?void 0:b.y)??0,width:a,height:((f=o==null?void 0:o.$bar)==null?void 0:f.height)??30}});return(()=>{var o=os(),s=o.firstChild,a=s.nextSibling,l=a.nextSibling,u=l.nextSibling;return le(l,()=>n().name),le(u,()=>n().id),Ce(b=>{var f=`translate(${n().x}px, ${n().y}px)`,k=`${n().width}px`,h=`${n().height}px`,E=n().color,I=`${n().pw}px`;return f!==b.e&&O(o,"transform",b.e=f),k!==b.t&&O(o,"width",b.t=k),h!==b.a&&O(o,"height",b.a=h),E!==b.o&&O(s,"background-color",b.o=E),I!==b.i&&O(a,"width",b.i=I),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o})()}var rs=$e('<div class=task-layer-minimal style="contain:layout style;position:relative;width:100%;height:100%">');function as(e){const t=()=>{var k;return((k=e.resourceStore)==null?void 0:k.displayResources())||[]},n=()=>e.startRow??0,o=()=>e.endRow??50,s=()=>e.startX??0,a=()=>e.endX??1/0;let l=null,u=-1;const b=()=>{var I;const k=(I=e.taskStore)==null?void 0:I.tasks;if(!k)return new Map;const h=Pe(()=>Object.keys(k));if(h.length===u&&l)return l;u=h.length;const E=new Map;return Pe(()=>{for(const v of h){const x=k[v];if(!x||x._isHidden)continue;const c=x.resource||"Unassigned";E.has(c)||E.set(c,[]),E.get(c).push(x)}}),l=E,E},f=X(()=>{const k=[],h=t(),E=b(),I=n(),v=o(),x=s(),c=a();for(let i=I;i<v&&i<h.length;i++){const g=h[i];if(g.type==="group")continue;const y=E.get(g.id);y&&Pe(()=>{if(c===1/0)for(let H=0;H<y.length;H++)k.push(y[H]);else for(let H=0;H<y.length;H++){const q=y[H],R=q.$bar;(!R||R.x+R.width>=x-200&&R.x<=c+200)&&k.push(q)}})}return k});return(()=>{var k=rs();return le(k,ye(vt,{get each(){return f()},children:h=>ye(ss,{task:h})})),k})()}function is(e){var be;const t=lo(),n=co(e.options||{}),o=go(e.options||{}),s=mo(e.resources||[]);typeof window<"u"&&(window.__ganttTaskStore=t,window.__ganttConfig=n,window.__ganttDateStore=o);const[a,l]=B(null),[u,b]=B(0),[f,k]=B(0),[h,E]=B(0),[I,v]=B(0),[x,c]=B(!1);let i=null;const[g,y]=B([]),[H,q]=B([]),[R,r]=B(null),[w,Y]=B({x:0,y:0}),[T,j]=B(!1),[K,ne]=B(null),[S,p]=B(!1),D=X(()=>{const m=R();return m?t.getTask(m):null}),M=X(()=>{const m=R();return m?t.getBarPosition(m):null}),P=X(()=>{const m=K();return m?t.getTask(m):null}),L=X(()=>{const m=K();return m?t.getBarPosition(m):null}),N=X(()=>{const m=K();return m?g().filter(z=>z.from===m||z.to===m):[]}),U=(m,z=!0)=>{if(!m||m.length===0){t.clear(),y([]),o.setupDates([]);return}_o(m.map(Se=>({_start:Se._start||new Date(Se.start),_end:Se._end||new Date(Se.end||Se.start)}))),o.setupDates(m),n.setGanttStart(o.ganttStart()),n.setGanttEnd(o.ganttEnd()),n.setUnit(o.unit()),n.setStep(o.step()),n.setColumnWidth(o.columnWidth());const G={ganttStart:o.ganttStart(),ganttEnd:o.ganttEnd(),unit:o.unit(),step:o.step(),columnWidth:o.columnWidth(),headerHeight:n.headerHeight(),barHeight:n.barHeight(),padding:n.padding()};let fe=null;const ve=s.resources().length>0;if(ve&&z)fe=s.resourceIndexMap();else if(!ve){const Se=ho(m);s.updateResources(Se),fe=s.resourceIndexMap()}const{tasks:me,relationships:He,resources:Fe}=Mo(m,G,fe),Re=Eo(me);ko(Re);const Ee=t.collapsedTasks();for(const Se of Re.values())Ao(Se.id,Re,Ee)&&(Se._isHidden=!0);t.updateTasks(Array.from(Re.values())),y(He),q(Fe)};yt(()=>{U(e.tasks)}),De(()=>{const m=e.tasks;s.collapsedGroups(),t.collapsedTasks(),m&&m.length>0&&Pe(()=>U(m))}),De(()=>{const m=e.options;m&&n.updateOptions(m)});const[V,re]=B((be=e.options)==null?void 0:be.view_mode);De(()=>{var G;const m=(G=e.options)==null?void 0:G.view_mode,z=V();m&&m!==z&&(re(m),o.changeViewMode(m),e.tasks&&e.tasks.length>0&&Pe(()=>U(e.tasks)))});const W=X(()=>{const m=t.tasks;return m?Object.keys(m).length:0}),J=X(()=>{const m=s.displayCount();return m>0?m:H().length}),ue=X(()=>o.gridWidth()),ge=X(()=>o.getAllDateInfos()),ke=X(()=>n.barHeight()+n.padding()),pe=X(()=>{const m=s.displayResources(),z=n.renderMode();if(!m||m.length===0)return new Map;const G=m.map((He,Fe)=>({id:He.id,type:He.type||"resource",displayIndex:Fe,taskId:He.taskId})),fe={barHeight:n.barHeight(),padding:n.padding(),subtaskHeightRatio:n.subtaskHeightRatio()};if(z==="simple")return $o(G,fe);const ve=n.expandedTasks(),me=t.tasks;return Ho(G,fe,ve,me)}),_e=X(()=>Po(pe()));De(()=>{const m=pe();!m||m.size===0||Pe(()=>{for(const[z,G]of m)if(z!=="__total__"&&G.taskPositions)for(const[fe,ve]of G.taskPositions){const me=t.tasks[fe];me&&me.$bar&&me.$bar.y!==ve.y&&t.updateBarPosition(fe,{y:ve.y})}})});const d=X(()=>{const z=pe().get("__total__");return z?z.height:(J()||W())*ke()}),F=X(()=>{const m=d();if(m>0)return m;const z=n.barHeight(),G=n.padding();return(J()||W())*(z+G)}),C=Fo({scrollX:u,scrollY:f,viewportWidth:h,viewportHeight:I,columnWidth:()=>o.columnWidth(),rowHeight:ke,totalRows:()=>J()||W(),sortedRowLayouts:_e,overscanCols:e.overscanCols??5,overscanRows:e.overscanRows??5,overscanX:e.overscanX??600}),ee=(m,z)=>{var G;(G=e.onDateChange)==null||G.call(e,m,z)},oe=(m,z)=>{var G;(G=e.onProgressChange)==null||G.call(e,m,z)},de=m=>{var z;(z=e.onResizeEnd)==null||z.call(e,m)},te=(m,z)=>{var G;ne(m),p(!0),(G=e.onTaskClick)==null||G.call(e,m,z)},ae=(m,z,G)=>{r(m),Y({x:z,y:G}),j(!0)},A=()=>{j(!1),r(null)},$=()=>{p(!1),ne(null)},Te=m=>{var fe;l(m),E(m.getContainerWidth()),v(m.getContainerHeight()),m.scrollLeftSignal&&m.scrollTopSignal?De(()=>{const ve=m.scrollLeftSignal(),me=m.scrollTopSignal();eo(()=>{b(ve),k(me)})}):(m.scrollLeftSignal&&De(()=>b(m.scrollLeftSignal())),m.scrollTopSignal&&De(()=>k(m.scrollTopSignal())));let z=f(),G=u();if(De(()=>{const ve=u(),me=f();(ve!==G||me!==z)&&(G=ve,z=me,c(!0),clearTimeout(i),i=setTimeout(()=>{c(!1)},150))}),m.containerWidthSignal&&De(()=>E(m.containerWidthSignal())),m.containerHeightSignal&&De(()=>v(m.containerHeightSignal())),((fe=e.options)==null?void 0:fe.scroll_to)==="today"){const ve=o.dateToX(new Date);m.scrollTo(ve-m.getContainerWidth()/4,!1)}};let Q=!1;De(()=>{var fe,ve;const m=t.tasks,z=a(),G=Object.keys(m);if(!Q&&z&&((fe=e.options)==null?void 0:fe.scroll_to)==="start"&&m&&G.length>0){const me=m[G[0]];(ve=me==null?void 0:me.$bar)!=null&&ve.x&&(z.scrollTo(Math.max(0,me.$bar.x-50),!1),Q=!0)}});const he=()=>{var m;return((m=e.options)==null?void 0:m.upper_header_height)||45},xe=()=>{var m;return((m=e.options)==null?void 0:m.lower_header_height)||30},ce=()=>{var m;return((m=e.options)==null?void 0:m.resource_column_width)||120};return X(()=>{var m,z,G,fe;return{stroke:((m=e.options)==null?void 0:m.arrow_color)||"#666",curveRadius:((z=e.options)==null?void 0:z.arrow_curve)||5,headShape:((G=e.options)==null?void 0:G.arrow_head_shape)||"chevron",headSize:((fe=e.options)==null?void 0:fe.arrow_head_size)||5,...e.arrowConfig}}),ye(Zn,{onDateChange:ee,onProgressChange:oe,onResizeEnd:de,onTaskClick:te,onHover:ae,onHoverEnd:A,get children(){return[ye(ao,{ganttConfig:n,get svgWidth(){return ue()},get svgHeight(){return F()},get headerHeight(){return n.headerHeight()},get resourceColumnWidth(){return ce()},resourceHeaderLabel:"Resource",onContainerReady:Te,get resourceColumn(){return ye(Qn,{resourceStore:s,ganttConfig:n,get width(){return ce()},get startRow(){return C.rowRange().start},get endRow(){return C.rowRange().end},get rowLayouts(){return pe()}})},get header(){return ye(Kn,{get dateInfos(){return ge()},get columnWidth(){return o.columnWidth()},get gridWidth(){return ue()},get upperHeaderHeight(){return he()},get lowerHeaderHeight(){return xe()},get startCol(){return C.colRange().start},get endCol(){return C.colRange().end}})},get barsLayer(){return bt(()=>e.taskLayerMode==="minimal")()?ye(as,{taskStore:t,ganttConfig:n,resourceStore:s,get startRow(){return C.rowRange().start},get endRow(){return C.rowRange().end},get startX(){return C.xRange().start},get endX(){return C.xRange().end}}):ye(ns,{taskStore:t,ganttConfig:n,get relationships(){return g()},resourceStore:s,onDateChange:ee,onProgressChange:oe,onResizeEnd:de,onTaskClick:te,onHover:ae,onHoverEnd:A,get startRow(){return C.rowRange().start},get endRow(){return C.rowRange().end},get startX(){return C.xRange().start},get endX(){return C.xRange().end},get rowLayouts(){return pe()}})},get children(){return ye(Jn,{get width(){return ue()},get height(){return F()},get barHeight(){return n.barHeight()},get padding(){return n.padding()},get taskCount(){return J()||W()},get columnWidth(){return o.columnWidth()},get dateInfos(){return ge()},get lines(){var m;return((m=e.options)==null?void 0:m.lines)||"both"},get startRow(){return C.rowRange().start},get endRow(){return C.rowRange().end},resourceStore:s,get rowLayouts(){return pe()}})}}),ye(so,{visible:T,position:w,task:D,barPosition:M}),ye(ro,{visible:S,task:P,barPosition:L,relationships:N,onClose:$})]}})}function ls(){var x;let e=[],t=!1,n=null,o=null,s=0,a=!1;const l=typeof PerformanceObserver<"u"&&((x=PerformanceObserver.supportedEntryTypes)==null?void 0:x.includes("long-animation-frame"));function u(){n=new PerformanceObserver(c=>{var i;for(const g of c.getEntries())e.push({timestamp:g.startTime,duration:g.duration,blockingDuration:g.blockingDuration||0,scripts:((i=g.scripts)==null?void 0:i.map(y=>y.sourceURL||y.name))||[],source:"laf",renderStart:g.renderStart,styleAndLayoutStart:g.styleAndLayoutStart,firstUIEventTimestamp:g.firstUIEventTimestamp})}),n.observe({type:"long-animation-frame",buffered:!0}),a=!0}function b(){s=performance.now();function c(){if(!t)return;const i=performance.now(),g=i-s;g>4&&e.push({timestamp:s,duration:g,blockingDuration:g>16.67?g-16.67:0,scripts:[],source:"raf"}),s=i,o=requestAnimationFrame(c)}o=requestAnimationFrame(c),a=!1}function f(c={}){t||(e=[],t=!0,l&&!c.preferRAF?u():b())}function k(){t=!1,n&&(n.disconnect(),n=null),o&&(cancelAnimationFrame(o),o=null)}function h(){return[...e]}function E(){e=[]}function I(){if(e.length===0)return{frameCount:0,totalDuration:0,avgFrameTime:0,avgFPS:0,minFrameTime:0,maxFrameTime:0,worstFrame:null,droppedFrames:0,percentile95:0,percentile99:0,blockingTime:0,source:a?"laf":"raf"};const c=e.map(r=>r.duration).sort((r,w)=>r-w),i=c.reduce((r,w)=>r+w,0),g=e.reduce((r,w)=>r+w.blockingDuration,0),y=e.reduce((r,w)=>w.duration>r.duration?w:r,e[0]),H=e.filter(r=>r.duration>16.67).length,q=Math.floor(c.length*.95),R=Math.floor(c.length*.99);return{frameCount:e.length,totalDuration:i,avgFrameTime:i/e.length,avgFPS:1e3/(i/e.length),minFrameTime:c[0],maxFrameTime:c[c.length-1],worstFrame:{timestamp:y.timestamp,duration:y.duration,blockingDuration:y.blockingDuration,scripts:y.scripts},droppedFrames:H,droppedFramePercent:H/e.length*100,percentile95:c[q]||c[c.length-1],percentile99:c[R]||c[c.length-1],blockingTime:g,source:a?"laf":"raf"}}function v(c=100){if(e.length===0)return[];const i=[];let g=e[0].timestamp,y=[];for(const H of e){if(H.timestamp-g>=c){if(y.length>0){const R=y.reduce((r,w)=>r+w.duration,0)/y.length;i.push({time:g,fps:1e3/R,frameCount:y.length})}g=H.timestamp,y=[]}y.push(H)}if(y.length>0){const q=y.reduce((R,r)=>R+r.duration,0)/y.length;i.push({time:g,fps:1e3/q,frameCount:y.length})}return i}return{startTracking:f,stopTracking:k,getFrames:h,clear:E,analyze:I,getFPSTimeline:v,get isTracking(){return t},get hasLAF(){return l}}}const Gt=new Map;let St=[],pt=!1;function cs(){pt=!0,St=[];function e(){pt&&(performance.now(),requestAnimationFrame(e))}requestAnimationFrame(e)}function ds(){pt=!1}function us(){Gt.clear(),St=[]}function gs(){return Array.from(Gt.values()).map(e=>({...e,minTime:e.minTime===1/0?0:e.minTime}))}function fs(){const e=new Map;for(const n of St)e.has(n.frameId)||e.set(n.frameId,[]),e.get(n.frameId).push(n);const t=[];for(const[n,o]of e)if(o.length>1){const s=new Set(o.map(l=>l.name)),a=o.reduce((l,u)=>l+u.duration,0);t.push({frameId:n,memoCount:s.size,invocationCount:o.length,totalTime:a,memos:Array.from(s),invocations:o.sort((l,u)=>l.timestamp-u.timestamp)})}return t.sort((n,o)=>o.totalTime-n.totalTime)}function hs(){const e=gs(),t=fs(),n=[],o=.1,s=1,a=100,l=5;for(const u of e){const b={name:u.name,status:"KEEP_MEMO",reason:"",metrics:{callCount:u.callCount,avgTime:u.avgTime.toFixed(3),totalTime:u.totalTime.toFixed(3)}};if(u.avgTime<o&&u.callCount<a)b.status="CONSIDER_PLAIN_FUNCTION",b.reason=`Avg time ${u.avgTime.toFixed(3)}ms is under ${o}ms threshold. Memo overhead may exceed computation cost.`;else if(u.avgTime>s&&u.callCount>a)b.status="OPTIMIZE_COMPUTATION",b.reason=`Called ${u.callCount} times with avg ${u.avgTime.toFixed(3)}ms. Total ${u.totalTime.toFixed(1)}ms spent in this memo.`;else{const f=t.filter(k=>k.memos.includes(u.name)).length;f>l&&(b.status="CHECK_REACTIVE_CASCADE",b.reason=`Involved in ${f} cascade events. May be triggering unnecessary reactive updates.`)}n.push(b)}return n.sort((u,b)=>{const f=parseFloat(u.metrics.totalTime);return parseFloat(b.metrics.totalTime)-f}),{summary:{memoCount:e.length,totalInvocations:e.reduce((u,b)=>u+b.callCount,0),totalTime:e.reduce((u,b)=>u+b.totalTime,0),cascadeEvents:t.length},recommendations:n,cascades:t.slice(0,10)}}function ms(e){const{frameAnalysis:t={},memoAnalysis:n={},config:o={},timeline:s=[]}=e;return{metadata:{version:"1.0.0",timestamp:new Date().toISOString(),browser:xs(),userAgent:(navigator==null?void 0:navigator.userAgent)||"unknown"},configuration:{taskCount:o.taskCount??0,arrowCount:o.arrowCount??0,viewMode:o.viewMode??"Day",viewportWidth:o.viewportWidth??(window==null?void 0:window.innerWidth)??0,viewportHeight:o.viewportHeight??(window==null?void 0:window.innerHeight)??0,arrowRenderer:o.arrowRenderer??"individual",testDuration:o.testDuration??0,testType:o.testType??"manual"},frameMetrics:{frameCount:t.frameCount??0,totalDuration:Me(t.totalDuration),avgFrameTime:Me(t.avgFrameTime),avgFPS:Me(t.avgFPS),minFrameTime:Me(t.minFrameTime),maxFrameTime:Me(t.maxFrameTime),percentile95:Me(t.percentile95),percentile99:Me(t.percentile99),droppedFrames:t.droppedFrames??0,droppedFramePercent:Me(t.droppedFramePercent),blockingTime:Me(t.blockingTime),source:t.source??"unknown",worstFrame:t.worstFrame?{timestamp:Me(t.worstFrame.timestamp),duration:Me(t.worstFrame.duration),blockingDuration:Me(t.worstFrame.blockingDuration),scripts:t.worstFrame.scripts||[]}:null},memoAnalysis:{summary:n.summary??{},recommendations:(n.recommendations||[]).slice(0,20),cascades:(n.cascades||[]).slice(0,10)},memory:ps(),timeline:s.map(a=>({time:Me(a.time),fps:Me(a.fps),frameCount:a.frameCount}))}}function vs(e,t={}){const{pretty:n=!0}=t;return JSON.stringify(e,null,n?2:0)}function ys(e,t){const n=vs(e),o=new Blob([n],{type:"application/json"}),s=URL.createObjectURL(o),a=new Date().toISOString().replace(/[:.]/g,"-"),l=t||`gantt-benchmark-${a}.json`,u=document.createElement("a");u.href=s,u.download=l,u.click(),URL.revokeObjectURL(s)}function bs(e){var n,o,s,a;const t=[];if(t.push("=== Gantt Chart Performance Benchmark ==="),t.push(`Timestamp: ${e.metadata.timestamp}`),t.push(`Browser: ${e.metadata.browser}`),t.push(""),t.push("Configuration:"),t.push(`  Tasks: ${e.configuration.taskCount}`),t.push(`  Arrows: ${e.configuration.arrowCount}`),t.push(`  Arrow Renderer: ${e.configuration.arrowRenderer}`),t.push(`  Viewport: ${e.configuration.viewportWidth}x${e.configuration.viewportHeight}`),t.push(""),t.push("Frame Metrics:"),t.push(`  Average FPS: ${e.frameMetrics.avgFPS}`),t.push(`  Average Frame: ${e.frameMetrics.avgFrameTime}ms`),t.push(`  Worst Frame: ${e.frameMetrics.maxFrameTime}ms`),t.push(`  95th Percentile: ${e.frameMetrics.percentile95}ms`),t.push(`  Dropped Frames: ${e.frameMetrics.droppedFrames} (${e.frameMetrics.droppedFramePercent}%)`),t.push(`  Measurement Source: ${e.frameMetrics.source}`),t.push(""),(o=(n=e.memoAnalysis)==null?void 0:n.summary)!=null&&o.memoCount&&(t.push("Memo Analysis:"),t.push(`  Tracked Memos: ${e.memoAnalysis.summary.memoCount}`),t.push(`  Total Invocations: ${e.memoAnalysis.summary.totalInvocations}`),t.push(`  Total Time: ${Me(e.memoAnalysis.summary.totalTime)}ms`),t.push(`  Cascade Events: ${e.memoAnalysis.summary.cascadeEvents}`),((s=e.memoAnalysis.recommendations)==null?void 0:s.length)>0)){t.push(""),t.push("Top Recommendations:");for(const l of e.memoAnalysis.recommendations.slice(0,5))t.push(`  [${l.status}] ${l.name}`),l.reason&&t.push(`    ${l.reason}`)}return(a=e.memory)!=null&&a.jsHeapSizeLimit&&(t.push(""),t.push("Memory:"),t.push(`  Used Heap: ${zt(e.memory.usedJSHeapSize)}`),t.push(`  Total Heap: ${zt(e.memory.totalJSHeapSize)}`)),t.join(`
`)}function Me(e,t=2){return typeof e!="number"||isNaN(e)?0:Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function xs(){if(typeof navigator>"u")return"unknown";const e=navigator.userAgent;if(e.includes("Chrome")){const t=e.match(/Chrome\/(\d+)/);return`Chrome ${(t==null?void 0:t[1])||""}`}if(e.includes("Firefox")){const t=e.match(/Firefox\/(\d+)/);return`Firefox ${(t==null?void 0:t[1])||""}`}if(e.includes("Safari")&&!e.includes("Chrome")){const t=e.match(/Version\/(\d+)/);return`Safari ${(t==null?void 0:t[1])||""}`}return"unknown"}function ps(){return typeof performance>"u"||!performance.memory?null:{jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize}}function zt(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,o)).toFixed(2))+" "+n[o]}var ws=$e('<div><div><h1 style=margin:0;font-size:20px>Performance Test</h1><div><div><span>Tasks:</span><span></span></div><div><span>Arrows:</span><span></span></div><div><span>Render:</span><span></span></div><div><span>FPS:</span><span></span></div><div><span>Worst:</span><span>ms</span></div><div><span>Avg:</span><span>ms</span></div><div><span>Scroll/s:</span><span></span></div><div><span>Heap:</span><span></span></div></div><div><label style=font-size:13px>View:<select style=width:100px;margin-left:5px><option value=Hour>Hour</option><option value=Day>Day</option><option value=Week>Week</option><option value=Month>Month</option></select></label><button>Reload</button><button></button><button></button><span style="color:#9ca3af;margin:0 5px">|</span><button></button><button>Export JSON</button><label style=font-size:13px>Arrows:<select style=width:100px;margin-left:5px><option value=individual>Individual</option><option value=batched>Batched</option></select></label><label style=font-size:13px>Mode:<select style=width:100px;margin-left:5px><option value=simple>Simple</option><option value=detailed>Detailed</option></select></label><label style=font-size:13px>TaskLayer:<select style=width:100px;margin-left:5px><option value=full>Full</option><option value=minimal>Minimal (V7j)</option></select></label></div><div style=display:flex;gap:15px;align-items:center;font-size:12px;color:#6b7280><span style=font-weight:bold>Buffers:</span><label style=display:flex;align-items:center;gap:4px>Rows:<input type=range min=1 max=30 style=width:60px><span style=min-width:20px></span></label><label style=display:flex;align-items:center;gap:4px>X:<input type=range min=200 max=3000 step=100 style=width:60px><span style=min-width:45px>px</span></label><label style=display:flex;align-items:center;gap:4px>Cols:<input type=range min=1 max=30 style=width:60px><span style=min-width:20px></span></label></div></div><div>');function ks(){const[e,t]=B([]),[n,o]=B(null),[s,a]=B({tasks:0,arrows:0}),[l,u]=B("Hour"),[b,f]=B(0),[k,h]=B(0),[E,I]=B(0),[v,x]=B(!1),[c,i]=B(!1),[g,y]=B(0),[H,q]=B(5),[R,r]=B(600),[w,Y]=B(5),[T,j]=B(null),[K,ne]=B(!1),[S,p]=B(null),[D,M]=B("batched"),[P,L]=B("simple"),[N,U]=B("full");let V=null,re=performance.now(),W=[],J=0,ue=performance.now(),ge=0,ke=performance.now();const[,pe]=io(Q=>{ge++;const he=Q-re;re=Q,W.push(he),W.length>60&&W.shift();const xe=Q-ke;if(xe>=1e3){if(f(Math.round(ge*1e3/xe)),ge=0,ke=Q,W.length>0){const be=Math.max(...W),m=W.reduce((z,G)=>z+G,0)/W.length;h(be.toFixed(1)),I(m.toFixed(1))}const ce=Q-ue;ce>=1e3&&(y(Math.round(J*1e3/ce)),J=0,ue=Q),performance.memory&&j((performance.memory.usedJSHeapSize/1048576).toFixed(1))}});let _e=null;const d=()=>{if(v()){_e&&(_e.abort=!0),x(!1);return}const Q=document.querySelector(".gantt-scroll-area");if(!Q)return;x(!0),W=[],h(0);const he={abort:!1};_e=he;const xe=3e4,ce=performance.now();let be=1,m=Q.scrollLeft;const z=()=>{if(he.abort||performance.now()-ce>xe){x(!1),console.log("H-Scroll test complete:",{worst:k(),avg:E()});return}const G=be*200;m+=G,m>Q.scrollWidth-Q.clientWidth-500?be=-1:m<500&&(be=1),Q.scrollLeft=m,requestAnimationFrame(z)};requestAnimationFrame(z)};let F=null;const C=()=>{if(c()){F&&(F.abort=!0),i(!1);return}const Q=document.querySelector(".gantt-scroll-area");if(!Q)return;i(!0),W=[],h(0);const he={abort:!1};F=he;const xe=3e4,ce=performance.now();let be=1,m=Q.scrollTop;const z=()=>{if(he.abort||performance.now()-ce>xe){i(!1),console.log("V-Scroll test complete:",{worst:k(),avg:E()});return}const G=be*100;m+=G,m>Q.scrollHeight-Q.clientHeight-200?be=-1:m<200&&(be=1),Q.scrollTop=m,requestAnimationFrame(z)};requestAnimationFrame(z)},ee=()=>{if(K()){oe();return}V=ls(),us(),cs(),V.startTracking(),ne(!0),W=[],console.log("Benchmark started - scroll or interact, then click Stop")},oe=()=>{if(!K())return;V==null||V.stopTracking(),ds(),ne(!1);const Q=(V==null?void 0:V.analyze())||{},he=hs(),xe=(V==null?void 0:V.getFPSTimeline(100))||[],ce=ms({frameAnalysis:Q,memoAnalysis:he,timeline:xe,config:{taskCount:s().tasks,arrowCount:s().arrows,viewMode:l(),arrowRenderer:D(),viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,testType:"manual"}});p(ce),console.log("Benchmark complete:",bs(ce))},de=()=>{const Q=S();Q?ys(Q):console.warn("No benchmark results to export. Run a benchmark first.")};yt(()=>{const Q=document.querySelector(".gantt-scroll-area");if(Q){const ce=()=>J++;Q.addEventListener("scroll",ce,{passive:!0}),ht(()=>Q.removeEventListener("scroll",ce))}let he=0;const xe=setInterval(()=>{if(v()||c()){const ce=performance.now();ce-he>2e3&&(he=ce,console.log("[PERF]",{fps:b(),avgFrame:E()+"ms",worstFrame:k()+"ms",scrollEvents:g()+"/sec",heap:T()+"MB"}))}},500);ht(()=>clearInterval(xe))});const te=X(()=>({view_mode:l(),renderMode:P(),bar_height:20,padding:8,column_width:l()==="Hour"?25:30,upper_header_height:35,lower_header_height:25,headerHeight:60,lines:"both",scroll_to:"start"})),ae=()=>{const Q=performance.now();t(to.tasks),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{o((performance.now()-Q).toFixed(1)),a({tasks:document.querySelectorAll(".bar-wrapper").length,arrows:document.querySelectorAll(".arrow-layer > g").length})},0)})})};yt(()=>{ae(),pe()});const A={container:{"max-width":"100%",height:"100vh",margin:0,padding:"10px",display:"flex","flex-direction":"column","box-sizing":"border-box",overflow:"hidden","font-family":'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},header:{"margin-bottom":"10px",display:"flex","align-items":"center",gap:"20px","flex-wrap":"wrap"},stats:{display:"flex",gap:"15px",padding:"10px 15px","background-color":"#1f2937",color:"#fff","border-radius":"6px","font-size":"13px","font-family":"monospace"},statItem:{display:"flex",gap:"5px"},statLabel:{color:"#9ca3af"},statValue:{color:"#10b981","font-weight":"bold"},controls:{display:"flex",gap:"10px","align-items":"center"},select:{padding:"6px 10px",border:"1px solid #d1d5db","border-radius":"4px","font-size":"13px",cursor:"pointer"},button:{padding:"6px 12px","background-color":"#3b82f6",color:"#fff",border:"none","border-radius":"4px",cursor:"pointer","font-size":"13px"},ganttWrapper:{border:"1px solid #e0e0e0","border-radius":"8px",overflow:"hidden","background-color":"#fff",flex:1,"min-height":0}},$=()=>b()>=55?"#10b981":b()>=30?"#f59e0b":"#ef4444",Te=Q=>Q<=16.67?"#10b981":Q<=33?"#f59e0b":"#ef4444";return(()=>{var Q=ws(),he=Q.firstChild,xe=he.firstChild,ce=xe.nextSibling,be=ce.firstChild,m=be.firstChild,z=m.nextSibling,G=be.nextSibling,fe=G.firstChild,ve=fe.nextSibling,me=G.nextSibling,He=me.firstChild,Fe=He.nextSibling,Re=me.nextSibling,Ee=Re.firstChild,Se=Ee.nextSibling,Ie=Re.nextSibling,Ye=Ie.firstChild,Ae=Ye.nextSibling,Ne=Ae.firstChild,Be=Ie.nextSibling,ze=Be.firstChild,Le=ze.nextSibling,Oe=Le.firstChild,We=Be.nextSibling,Xe=We.firstChild,qe=Xe.nextSibling,Ve=We.nextSibling,je=Ve.firstChild,Ct=je.nextSibling,ot=ce.nextSibling,Tt=ot.firstChild,Nt=Tt.firstChild,st=Nt.nextSibling,rt=Tt.nextSibling,Je=rt.nextSibling,Ke=Je.nextSibling,Ot=Ke.nextSibling,Qe=Ot.nextSibling,Ze=Qe.nextSibling,Mt=Ze.nextSibling,Jt=Mt.firstChild,at=Jt.nextSibling,_t=Mt.nextSibling,Kt=_t.firstChild,it=Kt.nextSibling,Qt=_t.nextSibling,Zt=Qt.firstChild,lt=Zt.nextSibling,en=ot.nextSibling,tn=en.firstChild,Dt=tn.nextSibling,nn=Dt.firstChild,ct=nn.nextSibling,on=ct.nextSibling,Ht=Dt.nextSibling,sn=Ht.firstChild,dt=sn.nextSibling,Rt=dt.nextSibling,rn=Rt.firstChild,an=Ht.nextSibling,ln=an.firstChild,ut=ln.nextSibling,cn=ut.nextSibling,Pt=he.nextSibling;return le(z,()=>s().tasks),le(ve,()=>s().arrows),le(Fe,(()=>{var _=bt(()=>!!n());return()=>_()?`${n()}ms`:"..."})()),le(Se,b),le(Ae,k,Ne),le(Le,E,Oe),le(qe,g),le(Ct,(()=>{var _=bt(()=>!!T());return()=>_()?`${T()}MB`:"N/A"})()),st.addEventListener("change",_=>u(_.target.value)),rt.$$click=ae,Je.$$click=d,le(Je,()=>v()?"Stop":"H-Scroll"),Ke.$$click=C,le(Ke,()=>c()?"Stop":"V-Scroll"),Qe.$$click=ee,le(Qe,()=>K()?"Stop Bench":"Benchmark"),Ze.$$click=de,at.addEventListener("change",_=>M(_.target.value)),it.addEventListener("change",_=>L(_.target.value)),lt.addEventListener("change",_=>U(_.target.value)),ct.$$input=_=>q(+_.target.value),le(on,H),dt.$$input=_=>r(+_.target.value),le(Rt,R,rn),ut.$$input=_=>Y(+_.target.value),le(cn,w),le(Pt,ye(is,{get tasks(){return e()},get options(){return te()},get overscanRows(){return H()},get overscanX(){return R()},get overscanCols(){return w()},get arrowRenderer(){return D()},get taskLayerMode(){return N()},onDateChange:(_,Ue)=>console.log("Date changed:",_,Ue),onProgressChange:(_,Ue)=>console.log("Progress changed:",_,Ue),onTaskClick:_=>console.log("Task clicked:",_)})),Ce(_=>{var Ue=A.container,dn=A.header,un=A.stats,gn=A.statItem,fn=A.statLabel,hn=A.statValue,mn=A.statItem,vn=A.statLabel,yn=A.statValue,bn=A.statItem,xn=A.statLabel,pn=A.statValue,wn=A.statItem,kn=A.statLabel,Sn={...A.statValue,color:$()},Cn=A.statItem,Tn=A.statLabel,Mn={...A.statValue,color:Te(k())},_n=A.statItem,Dn=A.statLabel,Hn={...A.statValue,color:Te(E())},Rn=A.statItem,Pn=A.statLabel,$n=A.statValue,Fn=A.statItem,En=A.statLabel,In=A.statValue,An=A.controls,Bn={...A.select},Ln=A.button,Wn={...A.button,"background-color":v()?"#ef4444":"#8b5cf6"},Yn={...A.button,"background-color":c()?"#ef4444":"#8b5cf6"},zn={...A.button,"background-color":K()?"#ef4444":"#059669"},Xn={...A.button,"background-color":S()?"#0891b2":"#6b7280"},$t=!S(),qn={...A.select},Vn={...A.select},jn={...A.select},Un=A.ganttWrapper;return _.e=se(Q,Ue,_.e),_.t=se(he,dn,_.t),_.a=se(ce,un,_.a),_.o=se(be,gn,_.o),_.i=se(m,fn,_.i),_.n=se(z,hn,_.n),_.s=se(G,mn,_.s),_.h=se(fe,vn,_.h),_.r=se(ve,yn,_.r),_.d=se(me,bn,_.d),_.l=se(He,xn,_.l),_.u=se(Fe,pn,_.u),_.c=se(Re,wn,_.c),_.w=se(Ee,kn,_.w),_.m=se(Se,Sn,_.m),_.f=se(Ie,Cn,_.f),_.y=se(Ye,Tn,_.y),_.g=se(Ae,Mn,_.g),_.p=se(Be,_n,_.p),_.b=se(ze,Dn,_.b),_.T=se(Le,Hn,_.T),_.A=se(We,Rn,_.A),_.O=se(Xe,Pn,_.O),_.I=se(qe,$n,_.I),_.S=se(Ve,Fn,_.S),_.W=se(je,En,_.W),_.C=se(Ct,In,_.C),_.B=se(ot,An,_.B),_.v=se(st,Bn,_.v),_.k=se(rt,Ln,_.k),_.x=se(Je,Wn,_.x),_.j=se(Ke,Yn,_.j),_.q=se(Qe,zn,_.q),_.z=se(Ze,Xn,_.z),$t!==_.P&&(Ze.disabled=_.P=$t),_.H=se(at,qn,_.H),_.F=se(it,Vn,_.F),_.M=se(lt,jn,_.M),_.D=se(Pt,Un,_.D),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0,H:void 0,F:void 0,M:void 0,D:void 0}),Ce(()=>st.value=l()),Ce(()=>at.value=D()),Ce(()=>it.value=P()),Ce(()=>lt.value=N()),Ce(()=>ct.value=H()),Ce(()=>dt.value=R()),Ce(()=>ut.value=w()),Q})()}wt(["click","input"]);no(()=>ye(ks,{}),document.getElementById("app"));
