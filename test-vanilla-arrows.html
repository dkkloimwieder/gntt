<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Vanilla Gantt Arrow Test</title>
    <link rel="stylesheet" href="dist/frappe-gantt.css">
    <style>
        body { font-family: monospace; padding: 20px; }
        .gantt { margin: 20px 0; }
        #output { background: #f5f5f5; padding: 15px; margin-top: 20px; }
        .path-display { background: white; padding: 10px; margin: 5px 0; border-left: 3px solid #666; }
    </style>
</head>
<body>
    <h2>Vanilla Gantt Arrow Path Output</h2>
    <p>Testing arrows to see actual generated paths</p>

    <div id="gantt-forward-up"></div>
    <div id="gantt-forward-down"></div>
    <div id="gantt-forward-same"></div>
    <div id="gantt-backward-up"></div>
    <div id="gantt-backward-down"></div>
    <div id="gantt-backward-same"></div>

    <div id="output"></div>

    <script src="dist/frappe-gantt.umd.js"></script>
    <script>
        const today = new Date();

        function createGantt(containerId, tasks, label) {
            const gantt = new Gantt(`#${containerId}`, tasks, {
                view_mode: 'Day',
                bar_height: 20,
                padding: 18,
                arrow_curve: 5
            });

            // Extract arrow path after rendering
            setTimeout(() => {
                const svg = document.querySelector(`#${containerId} svg`);
                const arrows = svg.querySelectorAll('.arrow');
                const output = document.getElementById('output');

                arrows.forEach((arrow, idx) => {
                    const path = arrow.querySelector('path');
                    if (path) {
                        const d = path.getAttribute('d');
                        const from = path.getAttribute('data-from');
                        const to = path.getAttribute('data-to');
                        output.innerHTML += `
                            <div class="path-display">
                                <strong>${label}</strong><br>
                                From: ${from} â†’ To: ${to}<br>
                                <code>${d}</code>
                            </div>
                        `;
                    }
                });
            }, 100);
        }

        // Forward up (pred below succ)
        createGantt('gantt-forward-up', [
            { id: 'pred', name: 'Pred', start: '2024-01-01', end: '2024-01-03', custom_class: 'pred' },
            { id: 'succ', name: 'Succ', start: '2024-01-04', end: '2024-01-06', dependencies: 'pred' }
        ], 'FORWARD UP');

        // Forward down (pred above succ)
        createGantt('gantt-forward-down', [
            { id: 'succ', name: 'Succ', start: '2024-01-04', end: '2024-01-06' },
            { id: 'pred', name: 'Pred', start: '2024-01-01', end: '2024-01-03', dependencies: 'succ', custom_class: 'pred' }
        ], 'FORWARD DOWN');

        // Forward same level
        createGantt('gantt-forward-same', [
            { id: 'pred', name: 'Pred', start: '2024-01-01', end: '2024-01-03', custom_class: 'pred' },
            { id: 'succ', name: 'Succ', start: '2024-01-05', end: '2024-01-07', dependencies: 'pred' }
        ], 'FORWARD SAME');

        // Backward up (pred below succ)
        createGantt('gantt-backward-up', [
            { id: 'pred', name: 'Pred', start: '2024-01-04', end: '2024-01-06', custom_class: 'pred' },
            { id: 'succ', name: 'Succ', start: '2024-01-01', end: '2024-01-03', dependencies: 'pred' }
        ], 'BACKWARD UP');

        // Backward down (pred above succ)
        createGantt('gantt-backward-down', [
            { id: 'succ', name: 'Succ', start: '2024-01-04', end: '2024-01-06' },
            { id: 'pred', name: 'Pred', start: '2024-01-01', end: '2024-01-03', dependencies: 'succ', custom_class: 'pred' }
        ], 'BACKWARD DOWN');

        // Backward same
        createGantt('gantt-backward-same', [
            { id: 'pred', name: 'Pred', start: '2024-01-03', end: '2024-01-05', custom_class: 'pred' },
            { id: 'succ', name: 'Succ', start: '2024-01-01', end: '2024-01-03', dependencies: 'pred' }
        ], 'BACKWARD SAME');
    </script>
</body>
</html>
